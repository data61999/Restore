(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{379:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return Fn}));var r=n(1),a=n.n(r),c=n(45),i=n.n(c),s=n(19),o=n(26),l=n(28),d=n(90),u=n(10),j=n(46),b=n(21),h=n(16),x=n.n(h),p=n(42),O=n(48),m=n.n(O),f=n(23),g=n(24),v=Object(f.a)((function e(t,n){Object(g.a)(this,e),this.items=void 0,this.metaData=void 0,this.items=t,this.metaData=n}));m.a.defaults.baseURL="/api/",m.a.defaults.withCredentials=!0;var y=function(e){return e.data};m.a.interceptors.request.use((function(e){var t,n=null===(t=se.getState().account.user)||void 0===t?void 0:t.token;return n&&(e.headers.Authorization="Bearer ".concat(n)),e})),m.a.interceptors.response.use(function(){var e=Object(b.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:if(!(n=t.headers.pagination)){e.next=7;break}return t.data=new v(t.data,JSON.parse(n)),e.abrupt("return",t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,n=t.data;switch(t.status){case 400:if(n.errors){var r=[];for(var a in n.errors)n.errors[a]&&r.push(n.errors[a]);throw r.flat()}p.b.error(n.title);break;case 401:case 404:p.b.error(n.title);break;case 403:p.b.error("You are not allowed to do");break;case 500:Fn.push({pathname:"/server-error",state:{error:n}})}return Promise.reject(e.response)}));var k=function(e,t){return m.a.get(e,{params:t}).then(y)},w=function(e,t){return m.a.post(e,t).then(y)},S=function(e){return m.a.delete(e).then(y)},C=function(e,t){return m.a.post(e,t,{headers:{"Content-type":"multipart/formData"}}).then(y)},I=function(e,t){return m.a.put(e,t,{headers:{"Content-type":"multipart/formData"}}).then(y)},P={get:function(){return k("basket")},addItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return w("basket?productId=".concat(e,"&quantity=").concat(t),{})},removeItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return S("basket?productId=".concat(e,"&quantity=").concat(t))}},q=function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return t},B={Catalog:{nomalList:function(){return k("Products?OrderBy=priceDesc&PageSize=4")},list:function(e){return k("products",e)},detail:function(e){return k("products/".concat(e))},filters:function(){return k("products/filters")}},TestError:{get400Error:function(){return k("buggy/bad-request")},get401Error:function(){return k("buggy/unauthorise")},get404Error:function(){return k("buggy/not-found")},get500Error:function(){return k("buggy/server-error")},getValidationError:function(){return k("buggy/validation-error")}},Basket:P,Account:{login:function(e){return w("/account/login",e)},register:function(e){return w("/account/register",e)},getCurrentUser:function(){return k("/account/currentUser")},getUserAddress:function(){return k("/account/getUserAddress")}},Orders:{list:function(){return k("/orders")},fetch:function(e){return k("/orders/".concat(e))},create:function(e){return w("/orders",e)}},Admin:{createProduct:function(e){return C("/products",q(e))},updateProduct:function(e){return I("/products",q(e))},deleteProduct:function(e){return S("/products?id=".concat(e))}}};var L=function(e){return"$".concat((e/100).toFixed(2))},A=Object(l.b)("basket/fetchBasketAsync",function(){var e=Object(b.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.Basket.get();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(){if(!function(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}("buyerId"))return!1}}),F=Object(l.b)("basket/addItemToBasket",function(){var e=Object(b.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.productId,a=t.quantity,c=void 0===a?1:a,e.prev=1,e.next=4,B.Basket.addItem(r,c);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(l.b)("basket/removeItemFromBasket",function(){var e=Object(b.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.productId,a=t.quantity,c=void 0===a?1:a,e.prev=1,e.next=4,B.Basket.removeItem(r,c);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(l.d)({name:"basket",initialState:{basket:null,status:""},reducers:{setBasket:function(e,t){e.basket=t.payload},clearBasket:function(e){e.basket=null}},extraReducers:function(e){e.addCase(F.pending,(function(e,t){var n=t.meta.arg.productId;e.status="pendingAddItem".concat(n)})),e.addCase(T.pending,(function(e,t){var n=t.meta.arg,r=n.productId,a=n.name;e.status="pendingRemoveItem".concat(r).concat(a)})),e.addCase(T.fulfilled,(function(e,t){var n,r=t.meta.arg,a=r.productId,c=r.quantity,i=null===(n=e.basket)||void 0===n?void 0:n.items.findIndex((function(e){return e.productId===a}));if(-1!==i&&void 0!==i){var s;if(e.basket.items[i].quantity-=c,e.basket.items[i].quantity<=0)null===(s=e.basket)||void 0===s||s.items.splice(i,1);e.status="idle"}})),e.addCase(T.rejected,(function(e,t){e.status="idle",console.log(t.payload)})),e.addMatcher(Object(l.e)(F.fulfilled,A.fulfilled),(function(e,t){e.basket=t.payload,e.status="idle"})),e.addMatcher(Object(l.e)(F.rejected,A.rejected),(function(e,t){e.status="idle",console.log(t.payload)}))}}),W=D.actions,U=W.setBasket,N=W.clearBasket,E=["basket"],V=["basket"],R=Object(l.b)("account/signin",function(){var e=Object(b.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.Account.login(t);case 3:return r=e.sent,a=r.basket,c=Object(j.a)(r,E),a&&n.dispatch(U(a)),localStorage.setItem("user",JSON.stringify(c)),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),z=Object(l.b)("account/fetchCurrentUser",function(){var e=Object(b.a)(x.a.mark((function e(t,n){var r,a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(M(JSON.parse(localStorage.getItem("user")))),e.prev=1,e.next=4,B.Account.getCurrentUser();case 4:return r=e.sent,a=r.basket,c=Object(j.a)(r,V),a&&n.dispatch(U(a)),localStorage.setItem("user",JSON.stringify(c)),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(){if(!localStorage.getItem("user"))return!1}}),H=Object(l.d)({name:"account",initialState:{user:null},reducers:{signOut:function(e){e.user=null,localStorage.removeItem("user"),Fn.push("/login")},setUser:function(e,t){var n=JSON.parse(atob(t.payload.token.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];e.user=Object(u.a)(Object(u.a)({},t.payload),{},{roles:"string"===typeof n?[n]:n})}},extraReducers:function(e){e.addCase(z.rejected,(function(e,t){e.user=null,localStorage.removeItem("user"),p.b.error("Session expired - please login again"),Fn.push("/")})),e.addCase(R.rejected,(function(e,t){var n=t.payload;console.log(n)})),e.addMatcher(Object(l.e)(R.fulfilled,z.fulfilled),(function(e,t){var n=JSON.parse(atob(t.payload.token.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];e.user=Object(u.a)(Object(u.a)({},t.payload),{},{roles:"string"===typeof n?[n]:n})}))}}),Q=H.actions,$=Q.signOut,M=Q.setUser,J=Object(l.c)(),G=function(e){var t=new URLSearchParams;return t.append("pageNumber",e.pageNumber.toString()),t.append("pageSize",e.pageSize.toString()),t.append("orderBy",e.orderBy),e.searchTerm&&t.append("searchTerm",e.searchTerm),e.brands.length>0&&t.append("brands",e.brands.toString()),e.types.length>0&&t.append("types",e.types.toString()),t},Y=Object(l.b)("catalog/fetchProductList",function(){var e=Object(b.a)(x.a.mark((function e(t,n){var r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=G(n.getState().catalog.productParams),e.prev=1,e.next=4,B.Catalog.list(r);case 4:return a=e.sent,n.dispatch(re(a.metaData)),e.abrupt("return",a.items);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(l.b)("catalog/fetchProduct",function(){var e=Object(b.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.Catalog.detail(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue({error:e.t0}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),Z=Object(l.b)("catalog/fetchFilters",function(){var e=Object(b.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.Catalog.filters();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue({error:e.t0.data}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(l.d)({name:"catalog",initialState:J.getInitialState({productsLoaded:!1,filtersLoaded:!1,status:"",brands:[],types:[],productParams:{orderBy:"name",pageNumber:1,pageSize:6,brands:[],types:[]},metaData:null}),reducers:{setProductParams:function(e,t){e.productsLoaded=!1,e.productParams=Object(u.a)(Object(u.a)(Object(u.a)({},e.productParams),t.payload),{},{pageNumber:1})},setPageNumber:function(e,t){e.productsLoaded=!1,e.productParams=Object(u.a)(Object(u.a)({},e.productParams),t.payload)},resetProductParams:function(e){e.productsLoaded=!1,e.productParams={orderBy:"name",pageNumber:1,pageSize:6,brands:[],types:[]}},setMetaData:function(e,t){e.metaData=t.payload},setProduct:function(e,t){J.upsertOne(e,t.payload),e.productsLoaded=!1},deleteProduct:function(e,t){J.removeOne(e,t.payload),e.productsLoaded=!1}},extraReducers:function(e){e.addCase(Y.pending,(function(e){e.status="pendingFetchProductList"})),e.addCase(Y.fulfilled,(function(e,t){J.setAll(e,t.payload),e.productsLoaded=!0,e.status="idle"})),e.addCase(Y.rejected,(function(e,t){e.status="idle",console.log(t.payload)})),e.addCase(_.pending,(function(e,t){e.status="pendingFetchProduct"})),e.addCase(_.fulfilled,(function(e,t){J.upsertOne(e,t.payload),e.status="idle"})),e.addCase(_.rejected,(function(e,t){e.status="idle",console.log(t.payload)})),e.addCase(Z.pending,(function(e){e.status="pendingFetchFiters"})),e.addCase(Z.fulfilled,(function(e,t){e.status="idle",e.filtersLoaded=!0,e.brands=t.payload.brands,e.types=t.payload.types})),e.addCase(Z.rejected,(function(e,t){e.status="idle"}))}}),X=J.getSelectors((function(e){return e.catalog})),ee=K.actions,te=ee.setProductParams,ne=ee.resetProductParams,re=ee.setMetaData,ae=ee.setPageNumber,ce=ee.setProduct,ie=ee.deleteProduct,se=Object(l.a)({reducer:{basket:D.reducer,catalog:K.reducer,account:H.reducer}}),oe=function(){return Object(d.b)()},le=d.c,de=n(12),ue=n(30),je=n(435),be=n(451),he=n(433),xe=n(91),pe=(n(251),n(121)),Oe=n(461),me=n(436),fe=n(466),ge=n(458),ve=n(437),ye=n(438),ke=n(439),we=n(198),Se=n.n(we),Ce=n(0),Ie=["1xx Khu\xf4ng Vi\u1ec7t P.Ph\xfa Trung Q.T\xe2n Ph\xfa","3xx/9x Tr\u1ea7n H\u01b0ng \u0110\u1ea1o Q.1","4xx Phan X\xedch Long P.3 Q.Ph\xfa Nhu\u1eadn","2x/5 T\xf4 Hi\u1ebfn Th\xe0nh Q.10","9x L\xea V\u0103n Th\u1ecd, Q.G\xf2 V\u1ea5p"],Pe=function(){return Object(Ce.jsxs)(he.a,{children:[Object(Ce.jsx)(pe.a,{gutterBottom:!0,variant:"h3",children:"For testing purposes"}),Object(Ce.jsxs)(je.a,{display:"flex",alignItems:"center",children:[Object(Ce.jsx)(Oe.a,{variant:"contained",color:"success",component:s.b,to:"/inventory",sx:{mr:2},children:"Go To Admin Page"}),Object(Ce.jsxs)(pe.a,{children:[Object(Ce.jsx)("b",{children:Object(Ce.jsx)("i",{children:"Username"})}),": Admin -"," ",Object(Ce.jsx)("b",{children:Object(Ce.jsx)("i",{children:"Password"})}),": Pa$$w0rd"]})]}),Object(Ce.jsx)(me.a,{sx:{m:2}}),Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",sx:{mb:2},children:[Object(Ce.jsx)(pe.a,{variant:"h3",align:"justify",sx:{mb:2},children:"Re-store always in style!"}),Object(Ce.jsx)(pe.a,{align:"justify",children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sunt vero cum, perspiciatis debitis ex unde, alias placeat, porro tempore quas recusandae. Omnis sapiente maxime non ratione sint corrupti est dolor. Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sunt vero cum, perspiciatis debitis ex unde, alias placeat, porro tempore quas recusandae. Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sunt vero cum, perspiciatis debitis ex unde, alias placeat, porro tempore quas recusandae. Omnis sapiente maxime non ratione sint corrupti est dolor."})]}),Object(Ce.jsxs)(fe.a,{children:[Object(Ce.jsx)(pe.a,{variant:"h6",children:"Store List:"}),Ie.map((function(e){return Object(Ce.jsx)(ge.a,{sx:{p:0},children:Object(Ce.jsxs)(ve.a,{sx:{p:0},children:[Object(Ce.jsx)(ye.a,{children:Object(Ce.jsx)(Se.a,{sx:{w:24}})}),Object(Ce.jsx)(ke.a,{children:e})]})},e)}))]})]})},qe=n(112),Be=n.n(qe),Le=n(494),Ae=n(467),Fe=n(462),Te=n(457),De=n(475),We=n(464),Ue=n(468),Ne=n(25);function Ee(){var e,t,n=Object(o.g)(),r=Object(o.h)(),a=oe(),c=Object(Ne.f)({mode:"all"}),i=c.register,l=c.handleSubmit,d=c.formState,j=d.isSubmitting,h=d.errors,p=d.isValid,O=function(){var e=Object(b.a)(x.a.mark((function e(t){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(R(t));case 3:n.push((null===(c=r.state)||void 0===c?void 0:c.from.pathname)||"/catalog"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(Ce.jsxs)(he.a,{component:Ae.a,maxWidth:"xs",sx:{display:"flex",flexDirection:"column",alignItems:"center",p:4},children:[Object(Ce.jsx)(Fe.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(Ce.jsx)(Be.a,{})}),Object(Ce.jsx)(pe.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(Ce.jsxs)(je.a,{component:"form",onSubmit:l(O),noValidate:!0,sx:{mt:1},children:[Object(Ce.jsx)(Ue.a,Object(u.a)(Object(u.a)({margin:"normal",fullWidth:!0,label:"Username",autoComplete:"username",autoFocus:!0},i("username",{required:"Username is requied"})),{},{error:!!h.username,helperText:null===h||void 0===h||null===(e=h.username)||void 0===e?void 0:e.message})),Object(Ce.jsx)(Ue.a,Object(u.a)(Object(u.a)({margin:"normal",fullWidth:!0,label:"Password",type:"password",autoComplete:"current-password"},i("password",{required:"Password is requied"})),{},{error:!!h.password,helperText:null===h||void 0===h||null===(t=h.password)||void 0===t?void 0:t.message})),Object(Ce.jsx)(De.a,{control:Object(Ce.jsx)(Te.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(Ce.jsx)(Le.a,{disabled:!p,loading:j,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(Ce.jsx)(We.a,{container:!0,children:Object(Ce.jsx)(We.a,{item:!0,children:Object(Ce.jsx)(s.b,{to:"/register",children:"Don't have an account? Sign Up"})})})]})]})}function Ve(){var e,t,n,r=Object(o.g)(),a=Object(Ne.f)({mode:"all"}),c=a.register,i=a.handleSubmit,l=a.setError,d=a.formState,j=d.isSubmitting,b=d.errors,h=d.isValid;return Object(Ce.jsxs)(he.a,{component:Ae.a,maxWidth:"xs",sx:{display:"flex",flexDirection:"column",alignItems:"center",p:4},children:[Object(Ce.jsx)(Fe.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(Ce.jsx)(Be.a,{})}),Object(Ce.jsx)(pe.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(Ce.jsxs)(je.a,{component:"form",onSubmit:i((function(e){return B.Account.register(e).then((function(){p.b.success("Registration successful - you can loggin now"),setTimeout((function(){return r.push("/login")}),3e3)})).catch((function(e){return function(e){e.forEach((function(e){e.includes("Email")&&l("email",{message:e}),e.includes("Username")&&l("username",{message:e}),e.includes("Password")&&l("password",{message:e})}))}(e)}))})),noValidate:!0,sx:{mt:1},children:[Object(Ce.jsx)(Ue.a,Object(u.a)(Object(u.a)({margin:"normal",fullWidth:!0,label:"Username",autoComplete:"username",autoFocus:!0},c("username",{required:"Username is requied"})),{},{error:!!b.username,helperText:null===b||void 0===b||null===(e=b.username)||void 0===e?void 0:e.message})),Object(Ce.jsx)(Ue.a,Object(u.a)(Object(u.a)({margin:"normal",fullWidth:!0,label:"Email",autoComplete:"email"},c("email",{required:"Email is requied",pattern:{value:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,message:"Not a valid email"}})),{},{error:!!b.email,helperText:null===b||void 0===b||null===(t=b.email)||void 0===t?void 0:t.message})),Object(Ce.jsx)(Ue.a,Object(u.a)(Object(u.a)({margin:"normal",fullWidth:!0,label:"Password",type:"password",autoComplete:"current-password"},c("password",{required:"Password is requied",pattern:{value:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).{4,20}$/,message:"Password does not meet complexity requiments (at least 6 characters, one uppercase, one lowercase character)"}})),{},{error:!!b.password,helperText:null===b||void 0===b||null===(n=b.password)||void 0===n?void 0:n.message})),Object(Ce.jsx)(Le.a,{disabled:!h,loading:j,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Register"}),Object(Ce.jsx)(We.a,{container:!0,children:Object(Ce.jsx)(We.a,{item:!0,children:Object(Ce.jsx)(s.b,{to:"/login",children:"Already have an account? Sign in"})})})]})]})}var Re=n(443),ze=n(444),He=n(478),Qe=n(479),$e=n(480),Me=n(481),Je=n(482),Ge=n(483),Ye=n(452),_e=function(e){var t=e.metaData,n=e.onPageChange,r=t.totalCount,a=t.totalPages,c=t.currentPage,i=t.pageSize;return Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Ce.jsxs)(pe.a,{children:["Displaying ",(c-1)*i+1,"-",c*i>r?r:c*i," ","of ",r," items"]}),Object(Ce.jsx)(Ye.a,{count:a,page:c,color:"secondary",size:"large",onChange:function(e,t){return function(e){n(e)}(t)}})]})},Ze=function(){var e=oe(),t=le(X.selectAll),n=le((function(e){return e.catalog})),a=n.productsLoaded,c=n.filtersLoaded,i=n.brands,s=n.types,o=n.productParams;return Object(r.useEffect)((function(){a||e(Y())}),[a,e]),Object(r.useEffect)((function(){c||e(Z())}),[e,c]),{productList:t,productsLoaded:a,filtersLoaded:c,brands:i,types:s,productParams:o}},Ke=n(442),Xe=n(471),et=n(474),tt=n(207),nt=function(e){var t,n=Object(Ne.e)(Object(u.a)(Object(u.a)({},e),{},{defaultValue:null})),a=n.fieldState,c=n.field,i={display:"flex",borer:"dashed 3px #eee",borderColor:"#000",borderRadius:"5px",paddingTop:"30px",alignItems:"center",height:200,width:500},s=Object(r.useCallback)((function(e){e[0]=Object.assign(e[0],{preview:URL.createObjectURL(e[0])}),c.onChange(e[0])}),[c]),o=Object(tt.a)({onDrop:s}),l=o.getRootProps,d=o.getInputProps,j=o.isDragActive;return Object(Ce.jsx)("div",Object(u.a)(Object(u.a)({},l()),{},{children:Object(Ce.jsxs)(Xe.a,{style:j?Object(u.a)(Object(u.a)({},i),{borderColor:"green"}):i,error:!!a.error,children:[Object(Ce.jsx)("input",Object(u.a)({},d())),Object(Ce.jsx)(Ke.a,{sx:{fontSize:"100px"}}),Object(Ce.jsx)(pe.a,{variant:"h4",children:"Drop image here"}),Object(Ce.jsx)(et.a,{children:null===(t=a.error)||void 0===t?void 0:t.message})]})}))},rt=n(472),at=n(454),ct=n(477),it=function(e){var t=Object(Ne.e)(Object(u.a)(Object(u.a)({},e),{},{defaultValue:""})),n=t.fieldState,r=t.field;return Object(Ce.jsxs)(Xe.a,{fullWidth:!0,error:!!n.error,children:[Object(Ce.jsx)(rt.a,{children:e.label}),Object(Ce.jsx)(at.a,{value:r.value,label:e.label,onChange:r.onChange,children:e.items.map((function(e,t){return Object(Ce.jsx)(ct.a,{value:e,children:e},t)}))})]})},st=function(e){var t,n=Object(Ne.e)(Object(u.a)(Object(u.a)({},e),{},{defaultValue:""})),r=n.fieldState,a=n.field;return Object(Ce.jsx)(Ue.a,Object(u.a)(Object(u.a)(Object(u.a)({},e),a),{},{multiline:e.multiline,rows:e.rows,type:e.type,fullWidth:!0,variant:"outlined",error:!!r.error,helperText:null===(t=r.error)||void 0===t?void 0:t.message}))},ot=n(118),lt=n(27),dt=lt.c({name:lt.d().required(),brand:lt.d().required(),type:lt.d().required(),quantityInStock:lt.b().min(0).required(),price:lt.b().required().min(100),description:lt.d().nullable(),file:lt.a().when("pictureUrl",{is:function(e){return!e},then:lt.a().required("Please provide an image")})}),ut=n(203),jt=function(e){var t=e.product,n=e.onCancel,a=oe(),c=Object(Ne.f)({mode:"all",resolver:Object(ot.a)(dt)}),i=c.handleSubmit,s=c.control,o=c.reset,l=c.watch,d=c.formState,u=d.isSubmitting,j=d.isDirty,h=le((function(e){return e.catalog})),p=h.brands,O=h.types,m=l("file",null);Object(r.useEffect)((function(){return!t||m||j||o(t),function(){m&&ut.URL.revokeObjectURL(m.preview)}}),[t,o,m,j]);var f=function(){var e=Object(b.a)(x.a.mark((function e(r){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,B.Admin.updateProduct(r);case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,B.Admin.createProduct(r);case 9:c=e.sent;case 10:a(ce(c)),n(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(Ce.jsxs)(je.a,{component:Ae.a,sx:{p:4},children:[Object(Ce.jsx)(pe.a,{variant:"h4",gutterBottom:!0,sx:{mb:4},children:"Product Details"}),Object(Ce.jsxs)("form",{onSubmit:i(f),children:[Object(Ce.jsxs)(We.a,{container:!0,spacing:3,children:[Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:12,children:Object(Ce.jsx)(st,{control:s,name:"name",label:"Product name"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(it,{control:s,items:p,name:"brand",label:"Brand"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(it,{control:s,items:O,name:"type",label:"Type"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(st,{type:"number",control:s,name:"price",label:"Price"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(st,{control:s,type:"number",name:"quantityInStock",label:"Quantity in Stock"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,children:Object(Ce.jsx)(st,{control:s,multiline:!0,rows:4,name:"description",label:"Description"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,children:Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Ce.jsx)(nt,{control:s,name:"file"}),m?Object(Ce.jsx)("img",{src:m.preview,alt:"preview",style:{maxHeight:200}}):Object(Ce.jsx)("img",{src:null===t||void 0===t?void 0:t.pictureUrl,alt:null===t||void 0===t?void 0:t.name,style:{maxHeight:200}})]})})]}),Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"space-between",sx:{mt:3},children:[Object(Ce.jsx)(Oe.a,{variant:"contained",color:"inherit",onClick:function(){return n()},children:"Cancel"}),Object(Ce.jsx)(Le.a,{loading:u,disabled:!j,type:"submit",variant:"contained",color:"success",children:"Submit"})]})]})]})},bt=function(){var e=oe(),t=Object(r.useState)(!1),n=Object(de.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(),s=Object(de.a)(i,2),o=s[0],l=s[1],d=Ze(),u=d.productList,j=d.productsLoaded,b=le((function(e){return e.catalog})).metaData,h=Object(r.useState)(!1),x=Object(de.a)(h,2),p=x[0],O=x[1],m=Object(r.useState)(0),f=Object(de.a)(m,2),g=f[0],v=f[1];Object(r.useEffect)((function(){return e(ne()),function(){e(ne()),e(ae({pageNumber:1}))}}),[e]),Object(r.useEffect)((function(){j||e(Y())}),[e,j]);return a?Object(Ce.jsx)(jt,{product:o,onCancel:function(){l(void 0),c(!1)}}):Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"space-between",children:[Object(Ce.jsx)(pe.a,{sx:{p:2},variant:"h4",children:"Inventory"}),Object(Ce.jsx)(je.a,{display:"flex",children:Object(Ce.jsx)(Oe.a,{sx:{m:2},size:"large",variant:"contained",onClick:function(){return c(!0)},children:"Create"})})]}),Object(Ce.jsx)(He.a,{component:Ae.a,children:Object(Ce.jsxs)(Qe.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(Ce.jsx)($e.a,{children:Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"#"}),Object(Ce.jsx)(Je.a,{align:"left",children:"Product"}),Object(Ce.jsx)(Je.a,{align:"right",children:"Price"}),Object(Ce.jsx)(Je.a,{align:"center",children:"Type"}),Object(Ce.jsx)(Je.a,{align:"center",children:"Brand"}),Object(Ce.jsx)(Je.a,{align:"center",children:"Quantity"}),Object(Ce.jsx)(Je.a,{align:"right"})]})}),Object(Ce.jsx)(Ge.a,{children:u.map((function(t){return Object(Ce.jsxs)(Me.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(Ce.jsx)(Je.a,{component:"th",scope:"row",children:t.id}),Object(Ce.jsx)(Je.a,{align:"left",children:Object(Ce.jsxs)(je.a,{display:"flex",alignItems:"center",children:[Object(Ce.jsx)("img",{src:t.pictureUrl,alt:t.name,style:{objectFit:"contain",height:50,marginRight:20,minWidth:100}}),Object(Ce.jsx)("span",{children:t.name})]})}),Object(Ce.jsx)(Je.a,{align:"right",children:L(t.price)}),Object(Ce.jsx)(Je.a,{align:"center",children:t.type}),Object(Ce.jsx)(Je.a,{align:"center",children:t.brand}),Object(Ce.jsx)(Je.a,{align:"center",children:t.quantityInStock}),Object(Ce.jsxs)(Je.a,{align:"right",children:[Object(Ce.jsx)(Oe.a,{startIcon:Object(Ce.jsx)(Re.a,{}),onClick:function(){return function(e){l(e),c(!0)}(t)}}),Object(Ce.jsx)(Le.a,{loading:p&&g===t.id,startIcon:Object(Ce.jsx)(ze.a,{}),color:"error",onClick:function(){return n=t.id,O(!0),v(n),void B.Admin.deleteProduct(n).then((function(){return e(ie(n))})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}));var n}})]})]},t.id)}))})]})}),Object(Ce.jsx)(je.a,{sx:{mt:2},children:b&&Object(Ce.jsx)(_e,{metaData:b,onPageChange:function(t){console.log(typeof t),e(ae({pageNumber:t}))}})})]})};function ht(e){var t=e.subtotal,n=le((function(e){return e.basket})).basket;void 0===t&&(t=(null===n||void 0===n?void 0:n.items.reduce((function(e,t){return e+t.price*t.quantity}),0))||0);var r=t>=1e4?0:500,a=t+r;return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(He.a,{component:Ae.a,variant:"outlined",children:Object(Ce.jsx)(Qe.a,{children:Object(Ce.jsxs)(Ge.a,{children:[Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{colSpan:2,children:"Subtotal"}),Object(Ce.jsx)(Je.a,{align:"right",children:L(t)})]}),Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{colSpan:2,children:"Delivery fee*"}),Object(Ce.jsx)(Je.a,{align:"right",children:L(r)})]}),Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{colSpan:2,children:"Total"}),Object(Ce.jsx)(Je.a,{align:"right",children:L(a)})]}),Object(Ce.jsx)(Me.a,{children:Object(Ce.jsx)(Je.a,{children:Object(Ce.jsx)("span",{style:{fontStyle:"italic"},children:"*Orders over $100 qualify for free delivery"})})})]})})})})}var xt=n(445),pt=n(446),Ot=function(e){var t=e.items,n=e.isBasket,r=void 0===n||n,a=le((function(e){return e.basket})).status,c=oe();return Object(Ce.jsx)(He.a,{component:Ae.a,children:Object(Ce.jsxs)(Qe.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(Ce.jsx)($e.a,{children:Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Name"}),Object(Ce.jsx)(Je.a,{align:"right",children:"Price"}),Object(Ce.jsx)(Je.a,{align:"right",children:"Quantity"}),Object(Ce.jsx)(Je.a,{align:"right",children:"SubTotal"}),r&&Object(Ce.jsx)(Je.a,{align:"right"})]})}),Object(Ce.jsx)(Ge.a,{children:t.map((function(e){return Object(Ce.jsxs)(Me.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(Ce.jsx)(Je.a,{component:"th",scope:"row",children:Object(Ce.jsxs)(je.a,{display:"flex",alignItems:"center",children:[Object(Ce.jsx)("img",{src:e.pictureUrl,alt:e.name,style:{objectFit:"contain",height:50,marginRight:20,minWidth:100}}),e.name]})}),Object(Ce.jsxs)(Je.a,{align:"right",children:["$",(e.price/100).toFixed(2)]}),Object(Ce.jsxs)(Je.a,{align:"right",children:[r&&Object(Ce.jsx)(Le.a,{loading:a.includes("pendingRemoveItem".concat(e.productId,"rem")),color:"error",onClick:function(){return c(T({productId:e.productId,quantity:1,name:"rem"}))},children:Object(Ce.jsx)(xt.a,{})}),e.quantity,r&&Object(Ce.jsx)(Le.a,{loading:a.includes("pendingAddItem".concat(e.productId)),color:"secondary",onClick:function(){return c(F({productId:e.productId}))},children:Object(Ce.jsx)(pt.a,{})})]}),Object(Ce.jsxs)(Je.a,{align:"right",children:["$",(e.price/100*e.quantity).toFixed(2)]}),r&&Object(Ce.jsx)(Je.a,{align:"right",children:Object(Ce.jsx)(Le.a,{color:"error",loading:a.includes("pendingRemoveItem".concat(e.productId,"del")),onClick:function(){return c(T({productId:e.productId,quantity:e.quantity,name:"del"}))},children:Object(Ce.jsx)(ze.a,{})})})]},e.productId)}))})]})})},mt=n(204),ft=n.n(mt),gt=function(){var e=le((function(e){return e.basket})).basket;return e&&0!==e.items.length?Object(Ce.jsxs)(r.Fragment,{children:[Object(Ce.jsx)(Ot,{items:e.items}),Object(Ce.jsxs)(We.a,{container:!0,children:[Object(Ce.jsx)(We.a,{item:!0,xs:6}),Object(Ce.jsxs)(We.a,{item:!0,xs:6,children:[Object(Ce.jsx)(ht,{}),Object(Ce.jsx)(Oe.a,{disabled:0===e.items.length,component:s.b,to:"/checkout",variant:"contained",fullWidth:!0,size:"large",children:"Check out"})]})]})]}):Object(Ce.jsxs)(je.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(Ce.jsx)(Fe.a,{children:Object(Ce.jsx)(ft.a,{fontSize:"large",color:"primary"})}),Object(Ce.jsx)(pe.a,{variant:"h3",sx:{fontStyle:"bold"},children:"Your basket is empty"}),Object(Ce.jsx)(pe.a,{variant:"h4",color:"#777",children:"Start shopping, we have what you need!"}),Object(Ce.jsx)(Oe.a,{sx:{mt:1},variant:"contained",color:"success",size:"large",component:s.b,to:"/catalog",children:"Return catalog page"})]})},vt=n(13),yt=n(392),kt=function(e){var t=e.items,n=e.checked,a=e.onChange,c=Object(r.useState)(n||[]),i=Object(de.a)(c,2),s=i[0],o=i[1];return Object(Ce.jsx)(yt.a,{children:t.map((function(e){return Object(Ce.jsx)(De.a,{control:Object(Ce.jsx)(Te.a,{checked:s.includes(e),onClick:function(){return function(e){var t=[];t=s.findIndex((function(t){return t===e}))>=0?s.filter((function(t){return t!==e})):[].concat(Object(vt.a)(s),[e]),o(t),a(t)}(e)}}),label:e},e)}))})},wt=n(440),St=n(447),Ct=n(455),It=function(e){var t=e.options,n=e.selectedValue,r=e.onChange;return Object(Ce.jsxs)(Xe.a,{children:[Object(Ce.jsx)(wt.a,{id:"demo-radio-buttons-group-label"}),Object(Ce.jsx)(St.a,{value:n,onChange:r,children:t.map((function(e){var t=e.value,n=e.label;return Object(Ce.jsx)(De.a,{value:t,control:Object(Ce.jsx)(Ct.a,{}),label:n},t)}))})]})},Pt=n(473),qt=n(476),Bt=function(e){var t=e.message,n=void 0===t?"Loading...":t;return Object(Ce.jsx)(Pt.a,{open:!0,invisible:!0,children:Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:[Object(Ce.jsx)(qt.a,{size:100,color:"secondary"}),Object(Ce.jsx)(pe.a,{variant:"h4",sx:{position:"fixed",top:"60%"},children:n})]})})},Lt=n(484),At=n(485),Ft=n(465),Tt=n(486),Dt=n(487);function Wt(){return Object(Ce.jsxs)(We.a,{item:!0,xs:!0,component:Lt.a,children:[Object(Ce.jsx)(At.a,{avatar:Object(Ce.jsx)(Ft.a,{animation:"wave",variant:"circular",width:40,height:40}),title:Object(Ce.jsx)(Ft.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}})}),Object(Ce.jsx)(Ft.a,{sx:{height:190},animation:"wave",variant:"rectangular"}),Object(Ce.jsx)(Tt.a,{children:Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(Ft.a,{animation:"wave",height:10,style:{marginBottom:6}}),Object(Ce.jsx)(Ft.a,{animation:"wave",height:10,width:"80%"})]})}),Object(Ce.jsx)(Dt.a,{children:Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(Ft.a,{animation:"wave",height:10,width:"40%"}),Object(Ce.jsx)(Ft.a,{animation:"wave",height:10,width:"20%"})]})})]})}var Ut=n(488),Nt=function(e){var t=e.product,n=le((function(e){return e.basket})).status,r=Object(o.g)(),a=oe();return Object(Ce.jsxs)(Lt.a,{sx:{maxWidth:345},children:[Object(Ce.jsx)(At.a,{avatar:Object(Ce.jsx)(Fe.a,{sx:{bgcolor:"secondary.main"},children:t.name.charAt(0).toUpperCase()}),title:t.name,titleTypographyProps:{fontWeight:"bold",color:"primary.main"}}),Object(Ce.jsx)(Ut.a,{onClick:function(){return r.push("/catalog/".concat(t.id))},component:"img",height:"150",image:t.pictureUrl,alt:t.name,sx:{objectFit:"contain",bgcolor:"#d1e6fa"}}),Object(Ce.jsxs)(Tt.a,{children:[Object(Ce.jsxs)(pe.a,{gutterBottom:!0,variant:"h5",component:"div",children:["$",(t.price/100).toFixed(2)]}),Object(Ce.jsxs)(pe.a,{variant:"body2",color:"text.secondary",children:[t.brand," / ",t.type]})]}),Object(Ce.jsxs)(Dt.a,{children:[Object(Ce.jsx)(Le.a,{disabled:t.quantityInStock<=0,variant:"outlined",sx:{mr:1},loading:n==="pendingAddItem".concat(t.id),size:"small",onClick:function(){return a(F({productId:t.id}))},children:t.quantityInStock<=0?"Out of stock":"Add to cart"}),Object(Ce.jsx)(Oe.a,{variant:"outlined",size:"small",component:s.b,to:"/catalog/".concat(t.id),children:"View"})]})]})},Et=function(e){var t=e.products,n=le((function(e){return e.catalog})).productsLoaded;return Object(Ce.jsx)(We.a,{container:!0,spacing:4,children:t.map((function(e){return Object(Ce.jsx)(We.a,{item:!0,xs:4,children:n?Object(Ce.jsx)(Nt,{product:e}):Object(Ce.jsx)(Wt,{},e.id)},e.id)}))})},Vt=n(108),Rt=function(){var e=oe(),t=le((function(e){return e.catalog})).productParams,n=Object(r.useState)(t.searchTerm||""),a=Object(de.a)(n,2),c=a[0],i=a[1],s=Object(Vt.a)((function(t){e(te({searchTerm:t.target.value}))}),500);return Object(Ce.jsx)(Ue.a,{label:"Search product",variant:"outlined",fullWidth:!0,value:c,onChange:function(e){i(e.target.value),s(e)}})},zt=[{value:"name",label:"Alphabetical"},{value:"priceDesc",label:"Price - High to low"},{value:"price",label:"Price - Low to high"}],Ht=function(){var e=oe(),t=Ze(),n=t.productList,a=t.productsLoaded,c=t.productParams,i=t.brands,s=t.types,o=t.filtersLoaded,l=le((function(e){return e.catalog})).metaData;return Object(r.useEffect)((function(){a||e(Y())}),[a,e]),Object(r.useEffect)((function(){o||e(Z())}),[e,o]),o?Object(Ce.jsxs)(We.a,{container:!0,spacing:2,children:[Object(Ce.jsxs)(We.a,{item:!0,xs:3,children:[Object(Ce.jsx)(Ae.a,{sx:{mb:2},children:Object(Ce.jsx)(Rt,{})}),Object(Ce.jsx)(Ae.a,{sx:{mb:2,p:2},children:Object(Ce.jsx)(It,{selectedValue:c.orderBy,options:zt,onChange:function(t){e(te({orderBy:t.target.value}))}})}),Object(Ce.jsx)(Ae.a,{sx:{mb:2,p:2},children:Object(Ce.jsx)(kt,{items:i,checked:c.brands,onChange:function(t){e(te({brands:t}))}})}),Object(Ce.jsx)(Ae.a,{sx:{mb:2,p:2},children:Object(Ce.jsx)(kt,{items:s,checked:c.types,onChange:function(t){e(te({types:t}))}})})]}),Object(Ce.jsx)(We.a,{item:!0,xs:9,children:Object(Ce.jsx)(Et,{products:n})}),Object(Ce.jsx)(We.a,{item:!0,xs:3}),Object(Ce.jsx)(We.a,{item:!0,xs:9,children:l&&Object(Ce.jsx)(_e,{metaData:l,onPageChange:function(t){return e(ae({pageNumber:t}))}})})]}):Object(Ce.jsx)(Bt,{message:"Loading products..."})},Qt=function(){var e=oe(),t=Object(o.i)().id,n=le((function(e){return X.selectById(e,t)}));console.log(n);var a=le((function(e){return e.catalog})).status,c=le((function(e){return e.basket})),i=c.basket,s=c.status,l=Object(r.useState)(1),d=Object(de.a)(l,2),u=d[0],j=d[1],b=null===i||void 0===i?void 0:i.items.find((function(e){return e.productId===(null===n||void 0===n?void 0:n.id)}));Object(r.useEffect)((function(){n||e(_(parseInt(t))),b&&j(b.quantity)}),[t,b,n,e]);return a.includes("pending")?Object(Ce.jsx)(Bt,{message:"Loading product..."}):n?Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)(We.a,{container:!0,spacing:2,children:[Object(Ce.jsx)(We.a,{item:!0,xs:6,children:Object(Ce.jsx)("img",{src:n.pictureUrl,alt:n.name,style:{width:"100%",maxHeight:300,objectFit:"contain"}})}),Object(Ce.jsxs)(We.a,{item:!0,xs:6,children:[Object(Ce.jsx)(pe.a,{variant:"h3",children:n.name}),Object(Ce.jsx)(me.a,{sx:{mb:2}}),Object(Ce.jsxs)(pe.a,{variant:"h4",color:"secondary",children:["$",(n.price/100).toFixed(2)]}),Object(Ce.jsx)(He.a,{children:Object(Ce.jsx)(Qe.a,{children:Object(Ce.jsxs)(Ge.a,{children:[Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Name"}),Object(Ce.jsx)(Je.a,{children:n.name})]}),Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Description"}),Object(Ce.jsx)(Je.a,{children:n.description})]}),Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Type"}),Object(Ce.jsx)(Je.a,{children:n.type})]}),Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Brand"}),Object(Ce.jsx)(Je.a,{children:n.brand})]}),Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Quantity in stock"}),Object(Ce.jsx)(Je.a,{children:n.quantityInStock})]})]})})}),Object(Ce.jsxs)(We.a,{container:!0,spacing:2,children:[Object(Ce.jsx)(We.a,{item:!0,xs:6,children:Object(Ce.jsx)(Ue.a,{variant:"outlined",type:"number",label:"Quantity in cart",fullWidth:!0,value:u,onChange:function(e){parseInt(e.target.value)>=0&&j(parseInt(e.target.value))}})}),Object(Ce.jsx)(We.a,{item:!0,xs:6,children:Object(Ce.jsx)(Le.a,{loading:s.includes("pending"),sx:{height:"55px"},color:"primary",size:"large",variant:"contained",fullWidth:!0,onClick:function(){if(!b||u>(null===b||void 0===b?void 0:b.quantity)){var t=b?u-b.quantity:u;e(F({productId:null===n||void 0===n?void 0:n.id,quantity:t}))}else{var r=b.quantity-u;e(T({productId:null===n||void 0===n?void 0:n.id,quantity:r}))}},disabled:n.quantityInStock<=0||0===u&&!b||u===(null===b||void 0===b?void 0:b.quantity),children:n.quantityInStock<=0?"Out of stock":b?"Update quantity":"Add to cart"})})]})]})]})}):Object(Ce.jsx)(pe.a,{variant:"h2",children:"Product not found"})},$t=n(459),Mt=n(489),Jt=n(456),Gt=function(e){var t=Object(Ne.e)(Object(u.a)(Object(u.a)({},e),{},{defaultValue:!1})).field;return Object(Ce.jsx)(De.a,{disabled:e.disabled||!1,control:Object(Ce.jsx)(Te.a,Object(u.a)(Object(u.a)({},t),{},{checked:t.value,color:"secondary"})),label:e.label})};function Yt(){var e=Object(Ne.g)(),t=e.control,n=e.formState;return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(pe.a,{variant:"h6",gutterBottom:!0,children:"Shipping address"}),Object(Ce.jsxs)(We.a,{container:!0,spacing:3,children:[Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(st,{control:t,name:"fullName",label:"Full name"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(st,{control:t,name:"phoneNumber",label:"Phone number"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:12,children:Object(Ce.jsx)(st,{control:t,name:"address1",label:"Address 1"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:12,children:Object(Ce.jsx)(st,{control:t,name:"address2",label:"Address 2"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(st,{control:t,name:"city",label:"City"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,sm:6,children:Object(Ce.jsx)(st,{control:t,name:"country",label:"Country"})}),Object(Ce.jsx)(We.a,{item:!0,xs:12,children:Object(Ce.jsx)(Gt,{disabled:!n.isDirty,control:t,name:"saveAddress",label:"Save it as the default address"})})]})]})}function _t(){var e=le((function(e){return e.basket})).basket;return Object(Ce.jsxs)(Ce.Fragment,{children:[e&&Object(Ce.jsx)(Ot,{items:e.items,isBasket:!1}),Object(Ce.jsxs)(We.a,{container:!0,children:[Object(Ce.jsx)(We.a,{item:!0,xs:6}),Object(Ce.jsx)(We.a,{item:!0,xs:6,children:Object(Ce.jsx)(ht,{})})]})]})}var Zt=[lt.c({fullName:lt.d().required("Fulname is required"),address1:lt.d().required("Address 1 is required"),address2:lt.d(),city:lt.d().required("City is required"),phoneNumber:lt.b().required(),country:lt.d().required("Country is required")}),lt.c({}),lt.c({nameOnCard:lt.d().required("Name on card is required")})],Kt=["nameOnCard","saveAddress"],Xt=["Shipping address","Review your order"];function en(e){switch(e){case 0:return Object(Ce.jsx)(Yt,{});case 1:return Object(Ce.jsx)(_t,{});default:throw new Error("Unknown step")}}function tn(){var e=Object(r.useState)(0),t=Object(de.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),i=Object(de.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(!1),d=Object(de.a)(l,2),h=d[0],p=d[1],O=oe(),m=Zt[n],f=Object(Ne.f)({mode:"all",resolver:Object(ot.a)(m)});Object(r.useEffect)((function(){B.Account.getUserAddress().then((function(e){e&&f.reset(Object(u.a)(Object(u.a)(Object(u.a)({},f.getValues()),e),{},{saveAddress:!1}))}))}),[f]);var g=function(){var e=Object(b.a)(x.a.mark((function e(t){var r,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.nameOnCard,r=t.saveAddress,c=Object(j.a)(t,Kt),n!==Xt.length-1){e.next=20;break}return e.prev=3,p(!0),e.next=7,B.Orders.create({saveAddress:r,shippingAddress:c});case 7:i=e.sent,o(i),O(N()),a(n+1),p(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),p(!1);case 18:e.next=21;break;case 20:a(n+1);case 21:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(Ce.jsx)(Ne.a,Object(u.a)(Object(u.a)({},f),{},{children:Object(Ce.jsxs)(Ae.a,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[Object(Ce.jsx)(pe.a,{component:"h1",variant:"h4",align:"center",children:"Checkout"}),Object(Ce.jsx)($t.a,{activeStep:n,sx:{pt:3,pb:5},children:Xt.map((function(e){return Object(Ce.jsx)(Mt.a,{children:Object(Ce.jsx)(Jt.a,{children:e})},e)}))}),Object(Ce.jsx)(Ce.Fragment,{children:n===Xt.length?Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(pe.a,{variant:"h5",gutterBottom:!0,children:"Thank you for your order."}),Object(Ce.jsxs)(pe.a,{variant:"subtitle1",children:["Your order number is ",s,". We have emailed your order confirmation, and will send you an update when your order has shipped."]})]}):Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("form",{onSubmit:f.handleSubmit(g),children:[en(n),Object(Ce.jsxs)(je.a,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==n&&Object(Ce.jsx)(Oe.a,{onClick:function(){a(n-1)},sx:{mt:3,ml:1},children:"Back"}),Object(Ce.jsx)(Le.a,{loading:h,disabled:!f.formState.isValid,variant:"contained",type:"submit",sx:{mt:3,ml:1},children:n===Xt.length-1?"Place order":"Next"})]})]})})})]})}))}var nn=function(){return Object(Ce.jsx)("div",{children:"ContactPage"})},rn=n(448),an=n(205),cn=n.n(an),sn=function(){var e=Object(r.useState)([]),t=Object(de.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){B.Catalog.nomalList().then((function(e){return a(e.items)})).catch((function(e){return console.log(e)}))}),[]);return Object(Ce.jsxs)("div",{className:"homepage",children:[Object(Ce.jsxs)(cn.a,Object(u.a)(Object(u.a)({},{dots:!0,arrows:!1,fade:!0,infinite:!0,autoplay:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)("img",{src:"/images/banner_1.png",alt:"hero",style:{display:"block",width:"100%",maxHeight:500,objectFit:"cover"}})}),Object(Ce.jsx)("div",{children:Object(Ce.jsx)("img",{src:"/images/banner_2.png",alt:"hero",style:{display:"block",width:"100%",maxHeight:500,objectFit:"cover"}})}),Object(Ce.jsx)("div",{children:Object(Ce.jsx)("img",{src:"/images/banner_3.png",alt:"hero",style:{display:"block",width:"100%",maxHeight:500,objectFit:"cover"}})})]})),Object(Ce.jsx)(rn.a,{children:Object(Ce.jsxs)(je.a,{mt:4,children:[Object(Ce.jsx)(pe.a,{variant:"h4",sx:{fontStyle:"italic"},children:"What's trending"}),Object(Ce.jsx)(We.a,{container:!0,spacing:4,sx:{pt:1,mb:4},children:n.length>0&&n.map((function(e){return Object(Ce.jsx)(We.a,{item:!0,xs:3,children:Object(Ce.jsx)(Nt,{product:e})},e.id)}))})]})})]})},on=function(e){var t=e.order,n=e.setSelectedOrder;return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)(je.a,{display:"flex",justifyContent:"space-between",children:[Object(Ce.jsxs)(pe.a,{sx:{p:2},gutterBottom:!0,variant:"h4",children:["Order #",t.id," - ",t.orderStatus]}),Object(Ce.jsx)(Oe.a,{onClick:function(){return n(0)},sx:{m:2},size:"large",variant:"contained",children:"Back"})]}),Object(Ce.jsx)(Ot,{items:t.orderItems,isBasket:!1}),Object(Ce.jsxs)(We.a,{container:!0,children:[Object(Ce.jsx)(We.a,{item:!0,xs:6}),Object(Ce.jsx)(We.a,{item:!0,xs:6,children:Object(Ce.jsx)(ht,{subtotal:t.subtotal})})]})]})},ln=function(){var e=Object(r.useState)(null),t=Object(de.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),i=Object(de.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(0),d=Object(de.a)(l,2),u=d[0],j=d[1];return Object(r.useEffect)((function(){o(!0),B.Orders.list().then((function(e){return a(e)})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)}))}),[]),s?Object(Ce.jsx)(Bt,{message:"Loading orders..."}):u>0?Object(Ce.jsx)(on,{order:null===n||void 0===n?void 0:n.find((function(e){return e.id===u})),setSelectedOrder:j}):Object(Ce.jsx)(He.a,{component:Ae.a,children:Object(Ce.jsxs)(Qe.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(Ce.jsx)($e.a,{children:Object(Ce.jsxs)(Me.a,{children:[Object(Ce.jsx)(Je.a,{children:"Order number"}),Object(Ce.jsx)(Je.a,{align:"right",children:"Total"}),Object(Ce.jsx)(Je.a,{align:"right",children:"Order date"}),Object(Ce.jsx)(Je.a,{align:"right",children:"Order status"}),Object(Ce.jsx)(Je.a,{align:"right"})]})}),Object(Ce.jsx)(Ge.a,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(Ce.jsxs)(Me.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(Ce.jsx)(Je.a,{component:"th",scope:"row",children:e.id}),Object(Ce.jsx)(Je.a,{align:"right",children:e.total}),Object(Ce.jsx)(Je.a,{align:"right",children:e.orderDate.split("T")[0]}),Object(Ce.jsx)(Je.a,{align:"right",children:e.orderStatus}),Object(Ce.jsx)(Je.a,{align:"right",children:Object(Ce.jsx)(Oe.a,{onClick:function(){return j(e.id)},children:"View"})})]},e.id)}))})]})})},dn=function(){return Object(Ce.jsxs)(he.a,{component:Ae.a,sx:{height:400},children:[Object(Ce.jsx)(pe.a,{variant:"h3",gutterBottom:!0,children:"Oops - we could not find what are you looking for"}),Object(Ce.jsx)(me.a,{}),Object(Ce.jsx)(Oe.a,{fullWidth:!0,component:s.b,to:"/catalog",children:"Go back to shop"})]})},un=function(){var e=Object(o.g)(),t=Object(o.h)().state;return Object(Ce.jsxs)(he.a,{component:Ae.a,children:[null!==t&&void 0!==t&&t.error?Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(pe.a,{variant:"h3",color:"error",gutterBottom:!0,children:t.error.title}),Object(Ce.jsx)(me.a,{}),Object(Ce.jsx)(pe.a,{children:t.error.detail||"Internal server error"})]}):Object(Ce.jsx)(pe.a,{variant:"h5",gutterBottom:!0,children:"Server error"}),Object(Ce.jsx)(Oe.a,{onClick:function(){return e.push("/catalog")},children:"Go back to the store"})]})},jn={textDecoration:"none",color:"inherit"},bn=function(){return Object(Ce.jsx)(je.a,{px:{xs:3},py:{xs:3},mt:2,bgcolor:"text.secondary",color:"white",children:Object(Ce.jsx)(rn.a,{children:Object(Ce.jsxs)(We.a,{container:!0,spacing:5,children:[Object(Ce.jsxs)(We.a,{item:!0,xs:4,children:[Object(Ce.jsx)(je.a,{borderBottom:1,fontWeight:"600",children:"Help"}),Object(Ce.jsx)(je.a,{children:Object(Ce.jsx)(s.b,{to:"/about",style:jn,children:"About"})})]}),Object(Ce.jsxs)(We.a,{item:!0,xs:4,children:[Object(Ce.jsx)(je.a,{borderBottom:1,fontWeight:"600",children:"Account"}),Object(Ce.jsx)(je.a,{children:Object(Ce.jsx)(s.b,{to:"/login",style:jn,children:"Login"})}),Object(Ce.jsx)(je.a,{children:Object(Ce.jsx)(s.b,{to:"/register",style:jn,children:"Register"})})]}),Object(Ce.jsxs)(We.a,{item:!0,xs:4,children:[Object(Ce.jsx)(je.a,{borderBottom:1,fontWeight:"600",children:"Shopping"}),Object(Ce.jsx)(je.a,{children:Object(Ce.jsx)(s.b,{to:"/basket",style:jn,children:"Cart"})}),Object(Ce.jsx)(je.a,{children:Object(Ce.jsx)(s.b,{to:"/order",style:jn,children:"Order"})})]})]})})})},hn=n(450),xn=n(490),pn=n(491),On=n(492),mn=n(493),fn=n(453),gn=n(449),vn=n(206),yn=n(441),kn=function(){var e=oe(),t=le((function(e){return e.account})).user,n=Object(r.useState)(null),a=Object(de.a)(n,2),c=a[0],i=a[1],o=Boolean(c),l=function(){i(null)};return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(Oe.a,{onClick:function(e){i(e.currentTarget)},sx:{color:"inherit",typography:"h6"},children:null===t||void 0===t?void 0:t.email}),Object(Ce.jsxs)(vn.a,{anchorEl:c,open:o,onClose:l,TransitionComponent:yn.a,children:[Object(Ce.jsx)(ct.a,{onClick:l,component:s.b,to:"/orders",children:"My orders"}),Object(Ce.jsx)(ct.a,{onClick:function(){e(N()),e($())},children:"Log out"})]})]})},wn=[{title:"catalog",path:"/catalog"},{title:"about",path:"/about"}],Sn=[{title:"login",path:"/login"},{title:"register",path:"/register"}],Cn={color:"inherit",typography:"h6",textDecoration:"none","&:hover":{color:"grey.500"},"&:active":{color:"text.secondary"}},In=function(e){var t,n=e.darkMode,r=e.handleThemeChange,a=le((function(e){return e.account})).user,c=le((function(e){return e.basket})).basket,i=(null===c||void 0===c?void 0:c.items.reduce((function(e,t){return e+t.quantity}),0))||0;return Object(Ce.jsx)(xn.a,{position:"static",children:Object(Ce.jsxs)(pn.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(Ce.jsxs)(gn.a,{display:"flex",alignItems:"center",children:[Object(Ce.jsx)(pe.a,{variant:"h5",component:s.c,to:"/",sx:Cn,children:"Re-store"}),Object(Ce.jsx)(On.a,{checked:n,onChange:r})]}),Object(Ce.jsxs)(fe.a,{sx:{display:"flex"},children:[wn.map((function(e){var t=e.title,n=e.path;return Object(Ce.jsx)(ge.a,{component:s.c,to:n,sx:Cn,children:t.toUpperCase()},n)})),a&&(null===(t=a.roles)||void 0===t?void 0:t.includes("Admin"))&&Object(Ce.jsx)(ge.a,{component:s.c,to:"/inventory",sx:Cn,children:"INVENTORY"})]}),Object(Ce.jsxs)(gn.a,{display:"flex",alignItems:"center",children:[Object(Ce.jsx)(mn.a,{component:s.b,to:"/basket",size:"large",sx:{color:"inherit"},children:Object(Ce.jsx)(fn.a,{badgeContent:i,color:"secondary",children:Object(Ce.jsx)(hn.a,{})})}),a?Object(Ce.jsx)(kn,{}):Object(Ce.jsx)(fe.a,{sx:{display:"flex"},children:Sn.map((function(e){var t=e.title,n=e.path;return Object(Ce.jsx)(ge.a,{component:s.c,to:n,sx:Cn,children:t.toUpperCase()},n)}))})]})]})})},Pn=["component","roles"];function qn(e){var t=e.component,n=e.roles,r=Object(j.a)(e,Pn),a=le((function(e){return e.account})).user;return Object(Ce.jsx)(o.b,Object(u.a)(Object(u.a)({},r),{},{render:function(e){return a?!n||null!==n&&void 0!==n&&n.some((function(e){var t;return null===(t=a.roles)||void 0===t?void 0:t.includes(e)}))?Object(Ce.jsx)(t,Object(u.a)({},e)):(p.b.error("Not authorised to access this area"),Object(Ce.jsx)(o.a,{to:{pathname:"/catalog",state:{from:e.location}}})):Object(Ce.jsx)(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var Bn=function(){var e=oe(),t=Object(r.useState)(!0),n=Object(de.a)(t,2),a=n[0],c=n[1],i=Object(r.useCallback)(Object(b.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(z());case 3:return t.next=5,e(A());case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]);Object(r.useEffect)((function(){i().then((function(){return c(!1)}))}),[i]);var s=Object(r.useState)(!1),l=Object(de.a)(s,2),d=l[0],u=l[1],j=d?"dark":"light",h=Object(xe.a)({palette:{mode:j,background:{default:"light"===j?"#eaeaea":"#121212"}}});return a?Object(Ce.jsx)(Bt,{}):Object(Ce.jsxs)(ue.c,{theme:h,children:[Object(Ce.jsxs)(je.a,{minHeight:"100vh",children:[Object(Ce.jsx)(p.a,{position:"bottom-right",hideProgressBar:!0,theme:"colored"}),Object(Ce.jsx)(be.a,{}),Object(Ce.jsx)(In,{darkMode:d,handleThemeChange:function(){u(!d)}}),Object(Ce.jsx)(o.b,{exact:!0,path:"/",component:sn}),Object(Ce.jsx)(o.b,{path:"/(.+)",render:function(){return Object(Ce.jsx)(he.a,{sx:{mt:4},children:Object(Ce.jsxs)(o.d,{children:[Object(Ce.jsx)(o.b,{exact:!0,path:"/",component:sn}),Object(Ce.jsx)(o.b,{exact:!0,path:"/catalog",component:Ht}),Object(Ce.jsx)(o.b,{path:"/catalog/:id",component:Qt}),Object(Ce.jsx)(o.b,{path:"/about",component:Pe}),Object(Ce.jsx)(o.b,{path:"/contact",component:nn}),Object(Ce.jsx)(o.b,{path:"/server-error",component:un}),Object(Ce.jsx)(o.b,{path:"/basket",component:gt}),Object(Ce.jsx)(qn,{path:"/checkout",component:tn}),Object(Ce.jsx)(qn,{path:"/orders",component:ln}),Object(Ce.jsx)(qn,{path:"/inventory",roles:["Admin"],component:bt}),Object(Ce.jsx)(o.b,{path:"/login",component:Ee}),Object(Ce.jsx)(o.b,{path:"/register",component:Ve}),Object(Ce.jsx)(o.b,{path:"*",component:dn})]})})}})]}),Object(Ce.jsx)(bn,{})]})},Ln=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,495)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},An=n(36),Fn=(n(377),n(378),Object(An.a)());se.dispatch(Y()),i.a.render(Object(Ce.jsx)(a.a.StrictMode,{children:Object(Ce.jsx)(d.a,{store:se,children:Object(Ce.jsx)(s.a,{children:Object(Ce.jsx)(o.c,{history:Fn,children:Object(Ce.jsx)(Bn,{})})})})}),document.getElementById("root")),Ln()}},[[379,1,2]]]);
//# sourceMappingURL=main.fae282b3.chunk.js.map