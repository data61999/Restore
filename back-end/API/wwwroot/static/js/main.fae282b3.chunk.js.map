{"version":3,"sources":["app/models/Pagination.ts","app/api/agent.ts","app/uti/utilities.ts","features/basket/basketSlice.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","app/store/configureStore.ts","features/about/AboutPage.tsx","features/account/Login.tsx","features/account/Register.tsx","app/components/PaginationApp.tsx","app/hook/useProducts.ts","app/components/AppDropzone.tsx","app/components/AppSelectList.tsx","app/components/AppTextInput.tsx","features/admin/productValidation.ts","features/admin/inventory/ProductForm.tsx","features/admin/inventory/InventoryPage.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketPage.tsx","app/components/CheckboxButtons.tsx","app/components/RadioButtonGroup.tsx","app/layout/LoadingComponent.tsx","features/catalog/ProductCardSkeleton.tsx","features/catalog/ProductItem.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/Catalog.tsx","features/catalog/ProductDetail.tsx","app/components/AppCheckbox.tsx","features/checkout/AddressForm.tsx","features/checkout/Review.tsx","features/checkout/checkoutValidation.ts","features/checkout/CheckoutPage.tsx","features/contact/ContactPage.tsx","features/home/HomePage.tsx","features/order/OrderDetail.tsx","features/order/Order.tsx","app/errors/NotFound.tsx","app/errors/ServerError.tsx","app/layout/Footer.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","app/layout/PrivateRoute.tsx","app/layout/App.tsx","reportWebVitals.ts","index.tsx"],"names":["PaginatedList","items","metadata","metaData","this","axios","defaults","baseURL","process","withCredentials","requestBody","response","data","interceptors","request","use","config","token","store","getState","account","user","headers","Authorization","a","pagination","JSON","parse","error","status","errors","modalStateErrors","key","push","flat","toast","title","history","pathname","state","Promise","reject","url","params","get","then","body","post","delete","put","Basket","addItem","productId","quantity","removeItem","createFormData","item","formData","FormData","append","agent","Catalog","nomalList","list","detail","id","filters","TestError","get400Error","get401Error","get404Error","get500Error","getValidationError","Account","login","value","register","getCurrentUser","getUserAddress","Orders","fetch","create","values","Admin","createProduct","updateProduct","deleteProduct","currencyFormat","currency","toFixed","fetchBasketAsync","createAsyncThunk","_","thunkApi","rejectWithValue","condition","b","document","cookie","match","pop","getCookie","addItemToBasketAsync","removeItemFromBasket","basketSilice","createSlice","name","initialState","basket","reducers","setBasket","action","payload","clearBasket","extraReducers","builder","addCase","pending","meta","arg","fulfilled","removedItemIndex","findIndex","undefined","splice","rejected","console","log","addMatcher","isAnyOf","actions","signInAsync","userDto","dispatch","localStorage","setItem","stringify","fetchCurrentUserAsync","setUser","getItem","accountSlice","signOut","roles","atob","split","productsAdapter","createEntityAdapter","getAxiosParams","urlSearhParams","URLSearchParams","pageNumber","toString","pageSize","orderBy","searchTerm","brands","length","types","fetchProductListAsync","catalog","productParams","setMetaData","fetchProductAsync","fetchFiltersAsync","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","setPageNumber","resetProductParams","setProduct","upsertOne","removeOne","setAll","productsSelector","getSelectors","configureStore","reducer","useAppDispatch","useDispatch","useAppSelector","useSelector","storeMap","AboutPage","Container","Typography","gutterBottom","variant","Box","display","alignItems","Button","color","component","Link","to","sx","mr","Divider","m","justifyContent","flexDirection","mb","align","List","map","address","ListItem","p","ListItemButton","ListItemIcon","w","ListItemText","Login","useHistory","location","useLocation","useForm","mode","handleSubmit","formState","isSubmitting","isValid","formSubmit","from","Paper","maxWidth","Avatar","bgcolor","onSubmit","noValidate","mt","TextField","margin","fullWidth","label","autoComplete","autoFocus","required","username","helperText","message","type","password","FormControlLabel","control","Checkbox","LoadingButton","disabled","loading","Grid","container","Register","setError","success","setTimeout","catch","forEach","includes","handleErrors","pattern","email","PaginationApp","onPageChange","totalCount","totalPages","currentPage","Pagination","count","page","size","onChange","e","handleChangePageNumber","useProducts","productList","selectAll","useEffect","AppDropzone","props","useController","defaultValue","fieldState","field","dzStyles","borer","borderColor","borderRadius","paddingTop","height","width","onDrop","useCallback","acceptedFiles","Object","assign","preview","URL","createObjectURL","useDropzone","getRootProps","getInputProps","isDragActive","FormControl","style","UploadFile","fontSize","FormHelperText","AppSelectList","InputLabel","Select","index","MenuItem","AppTextInput","multiline","rows","validationSchema","yup","brand","quantityInStock","min","price","description","nullable","file","when","is","ProductForm","product","onCancel","resolver","yupResolver","reset","watch","isDirty","watchFile","revokeObjectURL","handleSubmitData","spacing","xs","sm","src","alt","maxHeight","pictureUrl","onClick","InventoryPage","useState","isEdit","setIsEdit","selectedProduct","setSelectedProduct","setLoading","target","setTarget","TableContainer","Table","minWidth","TableHead","TableRow","TableCell","TableBody","border","scope","objectFit","marginRight","startIcon","Edit","handleSelectedProduct","Delete","finally","BasketSummary","subtotal","reduce","sum","deliveryFee","total","colSpan","fontStyle","BasketTable","isBasket","Remove","Add","BasketPage","CheckboxButtons","checked","checkedItems","setCheckedItems","FormGroup","newChecked","i","filter","handleChecked","RadioButtonGroup","options","selectedValue","FormLabel","RadioGroup","Radio","LoadingComponent","Backdrop","open","invisible","CircularProgress","position","top","ProductCardSkeleton","Card","CardHeader","avatar","Skeleton","animation","marginBottom","CardContent","CardActions","ProductItem","charAt","toUpperCase","titleTypographyProps","fontWeight","CardMedia","image","ProductList","products","ProductSearch","setSearchTerm","debounceSearch","debounce","event","sortOptions","ProductDetail","useParams","selectById","productStatus","setQuantity","itemInBasket","find","parseInt","updatedQuantity","AppCheckbox","AddressForm","useFormContext","Review","fullName","address1","address2","city","phoneNumber","country","nameOnCard","steps","getStepContent","step","Error","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","currentValidationSchema","methods","getValues","saveAddress","handleNext","shippingAddress","orderNum","my","md","Stepper","pt","pb","Step","StepLabel","ml","ContactPage","HomePage","setProducts","className","dots","arrows","fade","infinite","autoplay","speed","slidesToShow","slidesToScroll","OrderDetail","order","setSelectedOrder","orderStatus","orderItems","orders","setOrders","selectedOrderNumber","setSelectedOrderNumber","orderDate","NotFound","ServerError","linkStyle","textDecoration","Footer","px","py","borderBottom","SignedInMenu","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","Menu","onClose","TransitionComponent","Fade","midLinks","path","rightLinks","navLinkStyle","Header","darkMode","handleThemeChange","itemCount","AppBar","Toolbar","NavLink","Switch","IconButton","Badge","badgeContent","ShoppingCart","PrivateRoute","Component","rest","render","some","r","App","initApp","setDarkMode","paletteType","theme","createTheme","palette","background","default","minHeight","hideProgressBar","CssBaseline","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fae282b3.chunk.js","sourcesContent":["export interface MetaData {\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalPages: number;\r\n  totalCount: number;\r\n}\r\n\r\nexport class PaginatedList<T> {\r\n  items: T;\r\n  metaData: MetaData;\r\n\r\n  constructor(items: T, metadata: MetaData) {\r\n    this.items = items;\r\n    this.metaData = metadata;\r\n  }\r\n}\r\n","import axios, { AxiosError, AxiosResponse } from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport { history } from '../..';\r\nimport { PaginatedList } from '../models/Pagination';\r\nimport { store } from '../store/configureStore';\r\n\r\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.defaults.withCredentials = true;\r\n\r\nconst requestBody = (response: AxiosResponse) => response.data;\r\n\r\naxios.interceptors.request.use((config) => {\r\n  const token = store.getState().account.user?.token;\r\n  if (token) config.headers!.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n  async (response: AxiosResponse) => {\r\n    if (process.env.NODE_ENV === 'development') await sleep();\r\n    const pagination = response.headers['pagination'];\r\n    if (pagination) {\r\n      response.data = new PaginatedList(response.data, JSON.parse(pagination));\r\n      return response;\r\n    }\r\n    return response;\r\n  },\r\n  (error: AxiosError) => {\r\n    const { data, status } = error.response!;\r\n    switch (status) {\r\n      case 400:\r\n        if (data.errors) {\r\n          const modalStateErrors: string[] = [];\r\n          for (const key in data.errors) {\r\n            if (data.errors[key]) {\r\n              modalStateErrors.push(data.errors[key]);\r\n            }\r\n          }\r\n          throw modalStateErrors.flat();\r\n        }\r\n        toast.error(data.title);\r\n        break;\r\n      case 401:\r\n        toast.error(data.title);\r\n        break;\r\n      case 403:\r\n        toast.error('You are not allowed to do');\r\n        break;\r\n      case 404:\r\n        toast.error(data.title);\r\n        break;\r\n      case 500:\r\n        history.push({\r\n          pathname: '/server-error',\r\n          state: { error: data },\r\n        });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n    return Promise.reject(error.response);\r\n  }\r\n);\r\n\r\nconst request = {\r\n  get: (url: string, params?: URLSearchParams) =>\r\n    axios.get(url, { params }).then(requestBody),\r\n  post: (url: string, body: {}) => axios.post(url, body).then(requestBody),\r\n  put: (url: string, body: {}) => axios.put(url, body).then(requestBody),\r\n  delete: (url: string) => axios.delete(url).then(requestBody),\r\n  postForm: (url: string, data: FormData) =>\r\n    axios\r\n      .post(url, data, {\r\n        headers: { 'Content-type': 'multipart/formData' },\r\n      })\r\n      .then(requestBody),\r\n  putForm: (url: string, data: FormData) =>\r\n    axios\r\n      .put(url, data, {\r\n        headers: { 'Content-type': 'multipart/formData' },\r\n      })\r\n      .then(requestBody),\r\n};\r\n\r\nconst Catalog = {\r\n  nomalList: () => request.get('Products?OrderBy=priceDesc&PageSize=4'),\r\n  list: (params: URLSearchParams) => request.get('products', params),\r\n  detail: (id: number) => request.get(`products/${id}`),\r\n  filters: () => request.get('products/filters'),\r\n};\r\n\r\nconst TestError = {\r\n  get400Error: () => request.get('buggy/bad-request'),\r\n  get401Error: () => request.get('buggy/unauthorise'),\r\n  get404Error: () => request.get('buggy/not-found'),\r\n  get500Error: () => request.get('buggy/server-error'),\r\n  getValidationError: () => request.get('buggy/validation-error'),\r\n};\r\n\r\nconst Basket = {\r\n  get: () => request.get('basket'),\r\n  addItem: (productId: number, quantity: number = 1) =>\r\n    request.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\r\n  removeItem: (productId: number, quantity: number = 1) =>\r\n    request.delete(`basket?productId=${productId}&quantity=${quantity}`),\r\n};\r\n\r\nconst Account = {\r\n  login: (value: any) => request.post('/account/login', value),\r\n  register: (value: any) => request.post('/account/register', value),\r\n  getCurrentUser: () => request.get('/account/currentUser'),\r\n  getUserAddress: () => request.get('/account/getUserAddress'),\r\n};\r\n\r\nconst Orders = {\r\n  list: () => request.get('/orders'),\r\n  fetch: (id: number) => request.get(`/orders/${id}`),\r\n  create: (values: any) => request.post('/orders', values),\r\n};\r\n\r\nconst createFormData = (item: any) => {\r\n  let formData = new FormData();\r\n\r\n  for (const key in item) {\r\n    formData.append(key, item[key]);\r\n  }\r\n\r\n  return formData;\r\n};\r\n\r\nconst Admin = {\r\n  createProduct: (data: any) =>\r\n    request.postForm('/products', createFormData(data)),\r\n  updateProduct: (data: any) =>\r\n    request.putForm('/products', createFormData(data)),\r\n  deleteProduct: (id: number) => request.delete(`/products?id=${id}`),\r\n};\r\n\r\nconst agent = {\r\n  Catalog,\r\n  TestError,\r\n  Basket,\r\n  Account,\r\n  Orders,\r\n  Admin,\r\n};\r\n\r\nexport default agent;\r\n","export function getCookie(key: string) {\r\n  var b = document.cookie.match('(^|;)\\\\s*' + key + '\\\\s*=\\\\s*([^;]+)');\r\n  return b ? b.pop() : '';\r\n}\r\n\r\nexport const currencyFormat = (currency: number) => {\r\n  return `$${(currency / 100).toFixed(2)}`;\r\n};\r\n","import { createAsyncThunk, createSlice, isAnyOf } from '@reduxjs/toolkit';\r\nimport agent from '../../app/api/agent';\r\nimport { Basket } from '../../app/models/Basket';\r\nimport { getCookie } from '../../app/uti/utilities';\r\n\r\ninterface BasketState {\r\n  basket: Basket | null;\r\n  status: string;\r\n}\r\n\r\nconst initialState: BasketState = {\r\n  basket: null,\r\n  status: '',\r\n};\r\n\r\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\r\n  'basket/fetchBasketAsync',\r\n  async (_, thunkApi) => {\r\n    try {\r\n      return await agent.Basket.get();\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!getCookie('buyerId')) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const addItemToBasketAsync = createAsyncThunk<\r\n  Basket,\r\n  { productId: number; quantity?: number }\r\n>('basket/addItemToBasket', async ({ productId, quantity = 1 }, thunkApi) => {\r\n  try {\r\n    return await agent.Basket.addItem(productId, quantity);\r\n  } catch (error: any) {\r\n    return thunkApi.rejectWithValue({ error: error.data });\r\n  }\r\n});\r\n\r\nexport const removeItemFromBasket = createAsyncThunk<\r\n  Basket,\r\n  { productId: number; quantity: number; name?: string }\r\n>(\r\n  'basket/removeItemFromBasket',\r\n  async ({ productId, quantity = 1 }, thunkApi) => {\r\n    try {\r\n      return await agent.Basket.removeItem(productId, quantity);\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const basketSilice = createSlice({\r\n  name: 'basket',\r\n  initialState,\r\n  reducers: {\r\n    setBasket: (state, action) => {\r\n      state.basket = action.payload;\r\n    },\r\n    clearBasket: (state) => {\r\n      state.basket = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(addItemToBasketAsync.pending, (state, action) => {\r\n      const id = action.meta.arg.productId;\r\n      state.status = `pendingAddItem${id}`;\r\n    });\r\n\r\n    builder.addCase(removeItemFromBasket.pending, (state, action) => {\r\n      const { productId, name } = action.meta.arg;\r\n      state.status = `pendingRemoveItem${productId}${name}`;\r\n    });\r\n    builder.addCase(removeItemFromBasket.fulfilled, (state, action) => {\r\n      const { productId, quantity } = action.meta.arg;\r\n\r\n      const removedItemIndex = state.basket?.items.findIndex(\r\n        (item) => item.productId === productId\r\n      );\r\n\r\n      if (removedItemIndex === -1 || removedItemIndex === undefined) return;\r\n\r\n      state.basket!.items[removedItemIndex].quantity -= quantity;\r\n\r\n      if (state.basket!.items[removedItemIndex].quantity <= 0) {\r\n        state.basket?.items.splice(removedItemIndex, 1);\r\n      }\r\n\r\n      state.status = 'idle';\r\n    });\r\n    builder.addCase(removeItemFromBasket.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n      console.log(action.payload);\r\n    });\r\n\r\n    builder.addMatcher(\r\n      isAnyOf(addItemToBasketAsync.fulfilled, fetchBasketAsync.fulfilled),\r\n      (state, action) => {\r\n        state.basket = action.payload;\r\n        state.status = 'idle';\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      isAnyOf(addItemToBasketAsync.rejected, fetchBasketAsync.rejected),\r\n      (state, action) => {\r\n        state.status = 'idle';\r\n        console.log(action.payload);\r\n      }\r\n    );\r\n  },\r\n});\r\n\r\nexport const { setBasket, clearBasket } = basketSilice.actions;\r\n","import { createAsyncThunk, createSlice, isAnyOf } from '@reduxjs/toolkit';\r\nimport { FieldValues } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { history } from '../..';\r\nimport agent from '../../app/api/agent';\r\nimport { User } from '../../app/models/User';\r\nimport { setBasket } from '../basket/basketSlice';\r\n\r\ninterface AccountState {\r\n  user: User | null;\r\n}\r\n\r\nconst initialState: AccountState = {\r\n  user: null,\r\n};\r\n\r\nexport const signInAsync = createAsyncThunk<User, FieldValues>(\r\n  'account/signin',\r\n  async (data, thunkApi) => {\r\n    try {\r\n      const userDto = await agent.Account.login(data);\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkApi.dispatch(setBasket(basket));\r\n\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      return user;\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchCurrentUserAsync = createAsyncThunk<User>(\r\n  'account/fetchCurrentUser',\r\n  async (_, thunkApi) => {\r\n    thunkApi.dispatch(setUser(JSON.parse(localStorage.getItem('user')!)));\r\n    try {\r\n      const userDto = await agent.Account.getCurrentUser();\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkApi.dispatch(setBasket(basket));\r\n\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      return user;\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!localStorage.getItem('user')) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const accountSlice = createSlice({\r\n  name: 'account',\r\n  initialState,\r\n  reducers: {\r\n    signOut: (state) => {\r\n      state.user = null;\r\n      localStorage.removeItem('user');\r\n      history.push('/login');\r\n    },\r\n    setUser: (state, action) => {\r\n      let claims = JSON.parse(atob(action.payload.token.split('.')[1]));\r\n      let roles =\r\n        claims['http://schemas.microsoft.com/ws/2008/06/identity/claims/role'];\r\n      state.user = {\r\n        ...action.payload,\r\n        roles: typeof roles === 'string' ? [roles] : roles,\r\n      };\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchCurrentUserAsync.rejected, (state, action) => {\r\n      state.user = null;\r\n      localStorage.removeItem('user');\r\n      toast.error('Session expired - please login again');\r\n      history.push('/');\r\n    });\r\n\r\n    builder.addCase(signInAsync.rejected, (state, action) => {\r\n      const error = action.payload;\r\n      console.log(error);\r\n    });\r\n\r\n    builder.addMatcher(\r\n      isAnyOf(signInAsync.fulfilled, fetchCurrentUserAsync.fulfilled),\r\n      (state, action) => {\r\n        let claims = JSON.parse(atob(action.payload.token.split('.')[1]));\r\n        let roles =\r\n          claims[\r\n            'http://schemas.microsoft.com/ws/2008/06/identity/claims/role'\r\n          ];\r\n        state.user = {\r\n          ...action.payload,\r\n          roles: typeof roles === 'string' ? [roles] : roles,\r\n        };\r\n      }\r\n    );\r\n  },\r\n});\r\n\r\nexport const { signOut, setUser } = accountSlice.actions;\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from '@reduxjs/toolkit';\r\nimport agent from '../../app/api/agent';\r\nimport { MetaData } from '../../app/models/Pagination';\r\nimport { Product, ProductParams } from '../../app/models/Product';\r\nimport { RootState } from '../../app/store/configureStore';\r\n\r\ninterface CatalogState {\r\n  productsLoaded: boolean;\r\n  filtersLoaded: boolean;\r\n  status: string;\r\n  brands: string[];\r\n  types: string[];\r\n  productParams: ProductParams;\r\n  metaData: MetaData | null;\r\n}\r\n\r\nconst productsAdapter = createEntityAdapter<Product>();\r\n\r\nconst getAxiosParams = (urlSearhParams: ProductParams) => {\r\n  const params = new URLSearchParams();\r\n  params.append('pageNumber', urlSearhParams.pageNumber.toString());\r\n  params.append('pageSize', urlSearhParams.pageSize.toString());\r\n  params.append('orderBy', urlSearhParams.orderBy);\r\n  if (urlSearhParams.searchTerm)\r\n    params.append('searchTerm', urlSearhParams.searchTerm);\r\n  if (urlSearhParams.brands.length > 0) {\r\n    params.append('brands', urlSearhParams.brands.toString());\r\n  }\r\n  if (urlSearhParams.types.length > 0) {\r\n    params.append('types', urlSearhParams.types.toString());\r\n  }\r\n  return params;\r\n};\r\n\r\nexport const fetchProductListAsync = createAsyncThunk<\r\n  Product[],\r\n  void,\r\n  { state: RootState }\r\n>('catalog/fetchProductList', async (_, thunkApi) => {\r\n  const params = getAxiosParams(thunkApi.getState().catalog.productParams);\r\n  try {\r\n    const response = await agent.Catalog.list(params);\r\n    thunkApi.dispatch(setMetaData(response.metaData));\r\n\r\n    return response.items;\r\n  } catch (error: any) {\r\n    return thunkApi.rejectWithValue({ error: error.data });\r\n  }\r\n});\r\n\r\nexport const fetchProductAsync = createAsyncThunk<Product, number>(\r\n  'catalog/fetchProduct',\r\n  async (productId, thunkApi) => {\r\n    try {\r\n      return await agent.Catalog.detail(productId);\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchFiltersAsync = createAsyncThunk(\r\n  'catalog/fetchFilters',\r\n  async (_, thunkApi) => {\r\n    try {\r\n      return await agent.Catalog.filters();\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nconst initParams = () => ({\r\n  orderBy: 'name',\r\n  pageNumber: 1,\r\n  pageSize: 6,\r\n  brands: [],\r\n  types: [],\r\n});\r\n\r\nexport const catalogSlice = createSlice({\r\n  name: 'catalog',\r\n  initialState: productsAdapter.getInitialState<CatalogState>({\r\n    productsLoaded: false,\r\n    filtersLoaded: false,\r\n    status: '',\r\n    brands: [],\r\n    types: [],\r\n    productParams: initParams(),\r\n    metaData: null,\r\n  }),\r\n  reducers: {\r\n    setProductParams: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = {\r\n        ...state.productParams,\r\n        ...action.payload,\r\n        pageNumber: 1,\r\n      };\r\n    },\r\n    setPageNumber: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = { ...state.productParams, ...action.payload };\r\n    },\r\n    resetProductParams: (state) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = initParams();\r\n    },\r\n    setMetaData: (state, action) => {\r\n      state.metaData = action.payload;\r\n      // state.productsLoaded = false;\r\n    },\r\n    setProduct: (state, action) => {\r\n      productsAdapter.upsertOne(state, action.payload);\r\n      state.productsLoaded = false;\r\n    },\r\n    deleteProduct: (state, action) => {\r\n      productsAdapter.removeOne(state, action.payload);\r\n      state.productsLoaded = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchProductListAsync.pending, (state) => {\r\n      state.status = 'pendingFetchProductList';\r\n    });\r\n    builder.addCase(fetchProductListAsync.fulfilled, (state, action) => {\r\n      productsAdapter.setAll(state, action.payload);\r\n      state.productsLoaded = true;\r\n      state.status = 'idle';\r\n    });\r\n    builder.addCase(fetchProductListAsync.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n      console.log(action.payload);\r\n    });\r\n    builder.addCase(fetchProductAsync.pending, (state, action) => {\r\n      state.status = 'pendingFetchProduct';\r\n    });\r\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\r\n      productsAdapter.upsertOne(state, action.payload);\r\n      state.status = 'idle';\r\n    });\r\n    builder.addCase(fetchProductAsync.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n      console.log(action.payload);\r\n    });\r\n    // fetch filter\r\n    builder.addCase(fetchFiltersAsync.pending, (state) => {\r\n      state.status = 'pendingFetchFiters';\r\n    });\r\n    builder.addCase(fetchFiltersAsync.fulfilled, (state, action) => {\r\n      state.status = 'idle';\r\n      state.filtersLoaded = true;\r\n      state.brands = action.payload.brands;\r\n      state.types = action.payload.types;\r\n    });\r\n    builder.addCase(fetchFiltersAsync.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n    });\r\n  },\r\n});\r\n\r\nexport const productsSelector = productsAdapter.getSelectors<RootState>(\r\n  (state) => state.catalog\r\n);\r\n\r\nexport const {\r\n  setProductParams,\r\n  resetProductParams,\r\n  setMetaData,\r\n  setPageNumber,\r\n  setProduct,\r\n  deleteProduct,\r\n} = catalogSlice.actions;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { accountSlice } from '../../features/account/accountSlice';\r\nimport { catalogSlice } from '../../features/catalog/catalogSlice';\r\nimport { basketSilice } from '../../features/basket/basketSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    basket: basketSilice.reducer,\r\n    catalog: catalogSlice.reducer,\r\n    account: accountSlice.reducer,\r\n  },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemButton,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\r\n\r\nconst storeMap = [\r\n  '1xx Khung Vit P.Ph Trung Q.Tn Ph',\r\n  '3xx/9x Trn Hng o Q.1',\r\n  '4xx Phan Xch Long P.3 Q.Ph Nhun',\r\n  '2x/5 T Hin Thnh Q.10',\r\n  '9x L Vn Th, Q.G Vp',\r\n];\r\n\r\nconst AboutPage = () => {\r\n  // const [validationErrors, setValidationErrors] = useState<string[]>([]);\r\n\r\n  // const getValidationErrors = () => {\r\n  //   agent.TestError.getValidationError()\r\n  //     .then(() => console.log('should not see it'))\r\n  //     .catch((errors) => setValidationErrors(errors));\r\n  // };\r\n\r\n  return (\r\n    <Container>\r\n      <Typography gutterBottom variant='h3'>\r\n        For testing purposes\r\n      </Typography>\r\n      <Box display='flex' alignItems='center'>\r\n        <Button\r\n          variant='contained'\r\n          color='success'\r\n          component={Link}\r\n          to='/inventory'\r\n          sx={{ mr: 2 }}\r\n        >\r\n          Go To Admin Page\r\n        </Button>\r\n        <Typography>\r\n          <b>\r\n            <i>Username</i>\r\n          </b>\r\n          : Admin -{' '}\r\n          <b>\r\n            <i>Password</i>\r\n          </b>\r\n          : Pa$$w0rd\r\n        </Typography>\r\n      </Box>\r\n      {/* <ButtonGroup fullWidth>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get400Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 400 Error\r\n        </Button>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get401Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 401 Error\r\n        </Button>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get404Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 404 Error\r\n        </Button>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get500Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 500 Error\r\n        </Button>\r\n        <Button variant='contained' onClick={getValidationErrors}>\r\n          Test validation error\r\n        </Button>\r\n      </ButtonGroup>\r\n\r\n      {validationErrors.length > 0 && (\r\n        <Alert severity='error'>\r\n          <AlertTitle>Validation Errors</AlertTitle>\r\n          <List>\r\n            {validationErrors.map((error) => (\r\n              <ListItem key={error}>\r\n                <ListItemText>{error}</ListItemText>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Alert>\r\n      )} */}\r\n\r\n      <Divider sx={{ m: 2 }} />\r\n      <Box\r\n        display='flex'\r\n        justifyContent='center'\r\n        alignItems='center'\r\n        flexDirection='column'\r\n        sx={{ mb: 2 }}\r\n      >\r\n        <Typography variant='h3' align='justify' sx={{ mb: 2 }}>\r\n          Re-store always in style!\r\n        </Typography>\r\n        <Typography align='justify'>\r\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sunt vero\r\n          cum, perspiciatis debitis ex unde, alias placeat, porro tempore quas\r\n          recusandae. Omnis sapiente maxime non ratione sint corrupti est dolor.\r\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sunt vero\r\n          cum, perspiciatis debitis ex unde, alias placeat, porro tempore quas\r\n          recusandae. Lorem, ipsum dolor sit amet consectetur adipisicing elit.\r\n          Sunt vero cum, perspiciatis debitis ex unde, alias placeat, porro\r\n          tempore quas recusandae. Omnis sapiente maxime non ratione sint\r\n          corrupti est dolor.\r\n        </Typography>\r\n      </Box>\r\n      <List>\r\n        <Typography variant='h6'>Store List:</Typography>\r\n        {storeMap.map((address) => (\r\n          <ListItem key={address} sx={{ p: 0 }}>\r\n            <ListItemButton sx={{ p: 0 }}>\r\n              <ListItemIcon>\r\n                <ArrowRightIcon sx={{ w: 24 }} />\r\n              </ListItemIcon>\r\n              <ListItemText>{address}</ListItemText>\r\n            </ListItemButton>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AboutPage;\r\n","import LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { Paper } from '@mui/material';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Box from '@mui/material/Box';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Container from '@mui/material/Container';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport * as React from 'react';\r\nimport { FieldValues, useForm } from 'react-hook-form';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useAppDispatch } from '../../app/store/configureStore';\r\nimport { signInAsync } from './accountSlice';\r\n\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const dispatch = useAppDispatch();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: 'all',\r\n  });\r\n\r\n  const formSubmit = async (data: FieldValues) => {\r\n    try {\r\n      await dispatch(signInAsync(data));\r\n      history.push(location.state?.from.pathname || '/catalog');\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth='xs'\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component='h1' variant='h5'>\r\n        Sign in\r\n      </Typography>\r\n      <Box\r\n        component='form'\r\n        onSubmit={handleSubmit(formSubmit)}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Username'\r\n          autoComplete='username'\r\n          autoFocus\r\n          {...register('username', { required: 'Username is requied' })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Password'\r\n          type='password'\r\n          autoComplete='current-password'\r\n          {...register('password', { required: 'Password is requied' })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n        <FormControlLabel\r\n          control={<Checkbox value='remember' color='primary' />}\r\n          label='Remember me'\r\n        />\r\n        <LoadingButton\r\n          disabled={!isValid}\r\n          loading={isSubmitting}\r\n          type='submit'\r\n          fullWidth\r\n          variant='contained'\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Sign In\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to='/register'>{\"Don't have an account? Sign Up\"}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { Paper } from '@mui/material';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Box from '@mui/material/Box';\r\nimport Container from '@mui/material/Container';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport * as React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport agent from '../../app/api/agent';\r\n\r\nexport default function Register() {\r\n  const history = useHistory();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setError,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: 'all',\r\n  });\r\n\r\n  const handleErrors = (errors: any) => {\r\n    errors.forEach((error: string) => {\r\n      if (error.includes('Email')) setError('email', { message: error });\r\n      if (error.includes('Username')) setError('username', { message: error });\r\n      if (error.includes('Password')) setError('password', { message: error });\r\n    });\r\n  };\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth='xs'\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component='h1' variant='h5'>\r\n        Sign up\r\n      </Typography>\r\n      <Box\r\n        component='form'\r\n        onSubmit={handleSubmit((data) =>\r\n          agent.Account.register(data)\r\n            .then(() => {\r\n              toast.success('Registration successful - you can loggin now');\r\n              setTimeout(() => history.push('/login'), 3000);\r\n            })\r\n            .catch((errors) => handleErrors(errors))\r\n        )}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Username'\r\n          autoComplete='username'\r\n          autoFocus\r\n          {...register('username', {\r\n            required: 'Username is requied',\r\n          })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Email'\r\n          autoComplete='email'\r\n          {...register('email', {\r\n            required: 'Email is requied',\r\n            pattern: {\r\n              value: /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/,\r\n              message: 'Not a valid email',\r\n            },\r\n          })}\r\n          error={!!errors.email}\r\n          helperText={errors?.email?.message}\r\n        />\r\n\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Password'\r\n          type='password'\r\n          autoComplete='current-password'\r\n          {...register('password', {\r\n            required: 'Password is requied',\r\n            pattern: {\r\n              value: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{4,20}$/,\r\n              message:\r\n                'Password does not meet complexity requiments (at least 6 characters, one uppercase, one lowercase character)',\r\n            },\r\n          })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n\r\n        <LoadingButton\r\n          disabled={!isValid}\r\n          loading={isSubmitting}\r\n          type='submit'\r\n          fullWidth\r\n          variant='contained'\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Register\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to='/login'>{'Already have an account? Sign in'}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { Box, Typography, Pagination } from '@mui/material';\r\nimport { MetaData } from '../models/Pagination';\r\n\r\ninterface Props {\r\n  metaData: MetaData;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nconst PaginationApp = ({ metaData, onPageChange }: Props) => {\r\n  const { totalCount, totalPages, currentPage, pageSize } = metaData;\r\n\r\n  const handleChangePageNumber = (page: number) => {\r\n    onPageChange(page);\r\n  };\r\n\r\n  return (\r\n    <Box display='flex' justifyContent='space-between' alignItems='center'>\r\n      <Typography>\r\n        Displaying {(currentPage - 1) * pageSize + 1}-\r\n        {currentPage * pageSize > totalCount\r\n          ? totalCount\r\n          : currentPage * pageSize}{' '}\r\n        of {totalCount} items\r\n      </Typography>\r\n      <Pagination\r\n        count={totalPages}\r\n        page={currentPage}\r\n        color='secondary'\r\n        size='large'\r\n        onChange={(e, page) => handleChangePageNumber(page)}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PaginationApp;\r\n","import { useEffect } from 'react';\r\nimport {\r\n  productsSelector,\r\n  fetchProductListAsync,\r\n  fetchFiltersAsync,\r\n} from '../../features/catalog/catalogSlice';\r\nimport { useAppDispatch, useAppSelector } from '../store/configureStore';\r\n\r\nconst useProducts = () => {\r\n  const dispatch = useAppDispatch();\r\n  const productList = useAppSelector(productsSelector.selectAll);\r\n  const { productsLoaded, filtersLoaded, brands, types, productParams } =\r\n    useAppSelector((state) => state.catalog);\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductListAsync());\r\n  }, [productsLoaded, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!filtersLoaded) dispatch(fetchFiltersAsync());\r\n  }, [dispatch, filtersLoaded]);\r\n\r\n  return {\r\n    productList,\r\n    productsLoaded,\r\n    filtersLoaded,\r\n    brands,\r\n    types,\r\n    productParams,\r\n  };\r\n};\r\n\r\nexport default useProducts;\r\n","import { UploadFile } from '@mui/icons-material';\r\nimport { FormControl, FormHelperText, Typography } from '@mui/material';\r\nimport { useCallback } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { useController, UseControllerProps } from 'react-hook-form';\r\n\r\ninterface Props extends UseControllerProps {}\r\n\r\nconst AppDropzone = (props: Props) => {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: null });\r\n\r\n  const dzStyles = {\r\n    display: 'flex',\r\n    borer: 'dashed 3px #eee',\r\n    borderColor: '#000',\r\n    borderRadius: '5px',\r\n    paddingTop: '30px',\r\n    alignItems: 'center',\r\n    height: 200,\r\n    width: 500,\r\n  };\r\n\r\n  const dzActive = {\r\n    borderColor: 'green',\r\n  };\r\n\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      acceptedFiles[0] = Object.assign(acceptedFiles[0], {\r\n        preview: URL.createObjectURL(acceptedFiles[0]),\r\n      });\r\n      field.onChange(acceptedFiles[0]);\r\n    },\r\n    [field]\r\n  );\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <div {...getRootProps()}>\r\n      <FormControl\r\n        style={isDragActive ? { ...dzStyles, ...dzActive } : dzStyles}\r\n        error={!!fieldState.error}\r\n      >\r\n        <input {...getInputProps()} />\r\n        <UploadFile sx={{ fontSize: '100px' }} />\r\n        <Typography variant='h4'>Drop image here</Typography>\r\n        <FormHelperText>{fieldState.error?.message}</FormHelperText>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppDropzone;\r\n","import { FormControl, InputLabel, Select, MenuItem } from '@mui/material';\r\nimport { useController, UseControllerProps } from 'react-hook-form';\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n  items: string[];\r\n}\r\n\r\nconst AppSelectList = (props: Props) => {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: '' });\r\n\r\n  return (\r\n    <FormControl fullWidth error={!!fieldState.error}>\r\n      <InputLabel>{props.label}</InputLabel>\r\n      <Select value={field.value} label={props.label} onChange={field.onChange}>\r\n        {props.items.map((item, index) => (\r\n          <MenuItem key={index} value={item}>\r\n            {item}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default AppSelectList;\r\n","import { TextField } from '@mui/material';\r\nimport { useController, UseControllerProps } from 'react-hook-form';\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n  multiline?: boolean;\r\n  rows?: number;\r\n  type?: string;\r\n}\r\n\r\nconst AppTextInput = (props: Props) => {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: '' });\r\n\r\n  return (\r\n    <TextField\r\n      {...props}\r\n      {...field}\r\n      multiline={props.multiline}\r\n      rows={props.rows}\r\n      type={props.type}\r\n      fullWidth\r\n      variant='outlined'\r\n      error={!!fieldState.error}\r\n      helperText={fieldState.error?.message}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AppTextInput;\r\n","import * as yup from 'yup';\r\n\r\nexport const validationSchema = yup.object({\r\n  name: yup.string().required(),\r\n  brand: yup.string().required(),\r\n  type: yup.string().required(),\r\n  quantityInStock: yup.number().min(0).required(),\r\n  price: yup.number().required().min(100),\r\n  description: yup.string().nullable(),\r\n  file: yup.mixed().when('pictureUrl', {\r\n    is: (value: string) => !value,\r\n    then: yup.mixed().required('Please provide an image'),\r\n  }),\r\n});\r\n","import { Box, Paper, Typography, Grid, Button } from '@mui/material';\r\nimport { useEffect } from 'react';\r\nimport { FieldValues, useForm } from 'react-hook-form';\r\nimport AppDropzone from '../../../app/components/AppDropzone';\r\nimport AppSelectList from '../../../app/components/AppSelectList';\r\nimport AppTextInput from '../../../app/components/AppTextInput';\r\nimport { Product } from '../../../app/models/Product';\r\nimport {\r\n  useAppDispatch,\r\n  useAppSelector,\r\n} from '../../../app/store/configureStore';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { validationSchema } from '../productValidation';\r\nimport { URL } from 'url';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport agent from '../../../app/api/agent';\r\nimport { setProduct } from '../../catalog/catalogSlice';\r\n\r\ninterface Props {\r\n  product?: Product;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst ProductForm = ({ product, onCancel }: Props) => {\r\n  const dispatch = useAppDispatch();\r\n  const {\r\n    handleSubmit,\r\n    control,\r\n    reset,\r\n    watch,\r\n    formState: { isSubmitting, isDirty },\r\n  } = useForm({\r\n    mode: 'all',\r\n    resolver: yupResolver<any>(validationSchema),\r\n  });\r\n  const { brands, types } = useAppSelector((state) => state.catalog);\r\n  const watchFile = watch('file', null);\r\n\r\n  useEffect(() => {\r\n    if (product && !watchFile && !isDirty) reset(product);\r\n    return () => {\r\n      if (watchFile) URL.revokeObjectURL(watchFile.preview);\r\n    };\r\n  }, [product, reset, watchFile, isDirty]);\r\n\r\n  const handleSubmitData = async (data: FieldValues) => {\r\n    try {\r\n      let response: Product;\r\n      if (product) {\r\n        response = await agent.Admin.updateProduct(data);\r\n      } else {\r\n        response = await agent.Admin.createProduct(data);\r\n      }\r\n      dispatch(setProduct(response));\r\n      onCancel();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box component={Paper} sx={{ p: 4 }}>\r\n      <Typography variant='h4' gutterBottom sx={{ mb: 4 }}>\r\n        Product Details\r\n      </Typography>\r\n      <form onSubmit={handleSubmit(handleSubmitData)}>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <AppTextInput control={control} name='name' label='Product name' />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppSelectList\r\n              control={control}\r\n              items={brands}\r\n              name='brand'\r\n              label='Brand'\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppSelectList\r\n              control={control}\r\n              items={types}\r\n              name='type'\r\n              label='Type'\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput\r\n              type='number'\r\n              control={control}\r\n              name='price'\r\n              label='Price'\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput\r\n              control={control}\r\n              type='number'\r\n              name='quantityInStock'\r\n              label='Quantity in Stock'\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <AppTextInput\r\n              control={control}\r\n              multiline={true}\r\n              rows={4}\r\n              name='description'\r\n              label='Description'\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Box\r\n              display='flex'\r\n              justifyContent='space-between'\r\n              alignItems='center'\r\n            >\r\n              <AppDropzone control={control} name='file' />\r\n              {watchFile ? (\r\n                <img\r\n                  src={watchFile.preview}\r\n                  alt='preview'\r\n                  style={{ maxHeight: 200 }}\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={product?.pictureUrl}\r\n                  alt={product?.name}\r\n                  style={{ maxHeight: 200 }}\r\n                />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box display='flex' justifyContent='space-between' sx={{ mt: 3 }}>\r\n          <Button\r\n            variant='contained'\r\n            color='inherit'\r\n            onClick={() => onCancel()}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <LoadingButton\r\n            loading={isSubmitting}\r\n            disabled={!isDirty}\r\n            type='submit'\r\n            variant='contained'\r\n            color='success'\r\n          >\r\n            Submit\r\n          </LoadingButton>\r\n        </Box>\r\n      </form>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ProductForm;\r\n","import { Edit, Delete } from '@mui/icons-material';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport agent from '../../../app/api/agent';\r\nimport PaginationApp from '../../../app/components/PaginationApp';\r\nimport useProducts from '../../../app/hook/useProducts';\r\nimport { Product } from '../../../app/models/Product';\r\nimport {\r\n  useAppDispatch,\r\n  useAppSelector,\r\n} from '../../../app/store/configureStore';\r\nimport { currencyFormat } from '../../../app/uti/utilities';\r\nimport {\r\n  deleteProduct,\r\n  fetchProductListAsync,\r\n  resetProductParams,\r\n  setPageNumber,\r\n} from '../../catalog/catalogSlice';\r\nimport ProductForm from './ProductForm';\r\n\r\nconst InventoryPage = () => {\r\n  const dispatch = useAppDispatch();\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState<Product | undefined>();\r\n  const { productList, productsLoaded } = useProducts();\r\n  const { metaData } = useAppSelector((state) => state.catalog);\r\n  const [loading, setLoading] = useState(false);\r\n  const [target, setTarget] = useState(0);\r\n\r\n  useEffect(() => {\r\n    dispatch(resetProductParams());\r\n    return () => {\r\n      dispatch(resetProductParams());\r\n      dispatch(setPageNumber({ pageNumber: 1 }));\r\n    };\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductListAsync());\r\n  }, [dispatch, productsLoaded]);\r\n\r\n  const handleSelectedProduct = (product: Product) => {\r\n    setSelectedProduct(product);\r\n    setIsEdit(true);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setSelectedProduct(undefined);\r\n    setIsEdit(false);\r\n  };\r\n\r\n  const handleDeleteProduct = (id: number) => {\r\n    setLoading(true);\r\n    setTarget(id);\r\n\r\n    agent.Admin.deleteProduct(id)\r\n      .then(() => dispatch(deleteProduct(id)))\r\n      .catch((error) => console.log(error))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  if (isEdit)\r\n    return (\r\n      <ProductForm product={selectedProduct} onCancel={handleCancelEdit} />\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <Box display='flex' justifyContent='space-between'>\r\n        <Typography sx={{ p: 2 }} variant='h4'>\r\n          Inventory\r\n        </Typography>\r\n        <Box display='flex'>\r\n          <Button\r\n            sx={{ m: 2 }}\r\n            size='large'\r\n            variant='contained'\r\n            onClick={() => setIsEdit(true)}\r\n          >\r\n            Create\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      <TableContainer component={Paper}>\r\n        <Table sx={{ minWidth: 650 }} aria-label='simple table'>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>#</TableCell>\r\n              <TableCell align='left'>Product</TableCell>\r\n              <TableCell align='right'>Price</TableCell>\r\n              <TableCell align='center'>Type</TableCell>\r\n              <TableCell align='center'>Brand</TableCell>\r\n              <TableCell align='center'>Quantity</TableCell>\r\n              <TableCell align='right'></TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productList.map((product) => (\r\n              <TableRow\r\n                key={product.id}\r\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n              >\r\n                <TableCell component='th' scope='row'>\r\n                  {product.id}\r\n                </TableCell>\r\n                <TableCell align='left'>\r\n                  <Box display='flex' alignItems='center'>\r\n                    <img\r\n                      src={product.pictureUrl}\r\n                      alt={product.name}\r\n                      style={{\r\n                        objectFit: 'contain',\r\n                        height: 50,\r\n                        marginRight: 20,\r\n                        minWidth: 100,\r\n                      }}\r\n                    />\r\n                    <span>{product.name}</span>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell align='right'>\r\n                  {currencyFormat(product.price)}\r\n                </TableCell>\r\n                <TableCell align='center'>{product.type}</TableCell>\r\n                <TableCell align='center'>{product.brand}</TableCell>\r\n                <TableCell align='center'>{product.quantityInStock}</TableCell>\r\n                <TableCell align='right'>\r\n                  <Button\r\n                    startIcon={<Edit />}\r\n                    onClick={() => handleSelectedProduct(product)}\r\n                  />\r\n                  <LoadingButton\r\n                    loading={loading && target === product.id}\r\n                    startIcon={<Delete />}\r\n                    color='error'\r\n                    onClick={() => handleDeleteProduct(product.id)}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      <Box sx={{ mt: 2 }}>\r\n        {metaData && (\r\n          <PaginationApp\r\n            metaData={metaData}\r\n            onPageChange={(page) => {\r\n              console.log(typeof page);\r\n              dispatch(setPageNumber({ pageNumber: page }));\r\n            }}\r\n          />\r\n        )}\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InventoryPage;\r\n","import {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n} from '@mui/material';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport { currencyFormat } from '../../app/uti/utilities';\r\n\r\ninterface Props {\r\n  subtotal?: number;\r\n}\r\n\r\nexport default function BasketSummary({ subtotal }: Props) {\r\n  const DELIVERY_FEE = 500;\r\n  const BORDER_FEE = 10000;\r\n\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  if (subtotal === undefined) {\r\n    subtotal =\r\n      basket?.items.reduce(\r\n        (sum, item) => (sum += item.price * item.quantity),\r\n        0\r\n      ) || 0;\r\n  }\r\n  const deliveryFee = subtotal >= BORDER_FEE ? 0 : DELIVERY_FEE;\r\n  const total = subtotal + deliveryFee;\r\n\r\n  return (\r\n    <>\r\n      <TableContainer component={Paper} variant={'outlined'}>\r\n        <Table>\r\n          <TableBody>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Subtotal</TableCell>\r\n              <TableCell align='right'>{currencyFormat(subtotal)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\r\n              <TableCell align='right'>{currencyFormat(deliveryFee)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Total</TableCell>\r\n              <TableCell align='right'>{currencyFormat(total)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>\r\n                <span style={{ fontStyle: 'italic' }}>\r\n                  *Orders over $100 qualify for free delivery\r\n                </span>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </>\r\n  );\r\n}\r\n","import { Remove, Add, Delete } from '@mui/icons-material';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Box,\r\n} from '@mui/material';\r\nimport { BasketItem } from '../../app/models/Basket';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { removeItemFromBasket, addItemToBasketAsync } from './basketSlice';\r\n\r\ninterface Props {\r\n  items: BasketItem[];\r\n  isBasket?: boolean;\r\n}\r\n\r\nconst BasketTable = ({ items, isBasket = true }: Props) => {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label='simple table'>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Name</TableCell>\r\n            <TableCell align='right'>Price</TableCell>\r\n            <TableCell align='right'>Quantity</TableCell>\r\n            <TableCell align='right'>SubTotal</TableCell>\r\n            {isBasket && <TableCell align='right'></TableCell>}\r\n          </TableRow>\r\n        </TableHead>\r\n\r\n        <TableBody>\r\n          {items.map((item) => (\r\n            <TableRow\r\n              key={item.productId}\r\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n            >\r\n              <TableCell component='th' scope='row'>\r\n                <Box display='flex' alignItems='center'>\r\n                  <img\r\n                    src={item.pictureUrl}\r\n                    alt={item.name}\r\n                    style={{\r\n                      objectFit: 'contain',\r\n                      height: 50,\r\n                      marginRight: 20,\r\n                      minWidth: 100,\r\n                    }}\r\n                  />\r\n                  {item.name}\r\n                </Box>\r\n              </TableCell>\r\n\r\n              <TableCell align='right'>\r\n                ${(item.price / 100).toFixed(2)}\r\n              </TableCell>\r\n\r\n              <TableCell align='right'>\r\n                {isBasket && (\r\n                  <LoadingButton\r\n                    loading={status.includes(\r\n                      `pendingRemoveItem${item.productId}rem`\r\n                    )}\r\n                    color='error'\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        removeItemFromBasket({\r\n                          productId: item.productId,\r\n                          quantity: 1,\r\n                          name: 'rem',\r\n                        })\r\n                      )\r\n                    }\r\n                  >\r\n                    <Remove />\r\n                  </LoadingButton>\r\n                )}\r\n\r\n                {item.quantity}\r\n\r\n                {isBasket && (\r\n                  <LoadingButton\r\n                    loading={status.includes(`pendingAddItem${item.productId}`)}\r\n                    color='secondary'\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        addItemToBasketAsync({\r\n                          productId: item.productId,\r\n                        })\r\n                      )\r\n                    }\r\n                  >\r\n                    <Add />\r\n                  </LoadingButton>\r\n                )}\r\n              </TableCell>\r\n\r\n              <TableCell align='right'>\r\n                ${((item.price / 100) * item.quantity).toFixed(2)}\r\n              </TableCell>\r\n\r\n              {isBasket && (\r\n                <TableCell align='right'>\r\n                  <LoadingButton\r\n                    color='error'\r\n                    loading={status.includes(\r\n                      `pendingRemoveItem${item.productId}del`\r\n                    )}\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        removeItemFromBasket({\r\n                          productId: item.productId,\r\n                          quantity: item.quantity,\r\n                          name: 'del',\r\n                        })\r\n                      )\r\n                    }\r\n                  >\r\n                    <Delete></Delete>\r\n                  </LoadingButton>\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default BasketTable;\r\n","import { Avatar, Box, Button, Grid, Typography } from '@mui/material';\r\nimport { Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport BasketSummary from './BasketSummary';\r\nimport BasketTable from './BasketTable';\r\nimport RemoveShoppingCartIcon from '@mui/icons-material/RemoveShoppingCart';\r\n\r\nconst BasketPage = () => {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  // if (status) return <LoadingComponent message='basket loading...' />;\r\n\r\n  if (!basket || basket.items.length === 0)\r\n    return (\r\n      <Box display='flex' flexDirection='column' alignItems='center'>\r\n        <Avatar>\r\n          <RemoveShoppingCartIcon fontSize='large' color='primary' />\r\n        </Avatar>\r\n        <Typography variant='h3' sx={{ fontStyle: 'bold' }}>\r\n          Your basket is empty\r\n        </Typography>\r\n        <Typography variant='h4' color='#777'>\r\n          Start shopping, we have what you need!\r\n        </Typography>\r\n        <Button\r\n          sx={{ mt: 1 }}\r\n          variant='contained'\r\n          color='success'\r\n          size='large'\r\n          component={Link}\r\n          to='/catalog'\r\n        >\r\n          Return catalog page\r\n        </Button>\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <Fragment>\r\n      <BasketTable items={basket.items} />\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary />\r\n          <Button\r\n            disabled={basket.items.length === 0}\r\n            component={Link}\r\n            to='/checkout'\r\n            variant='contained'\r\n            fullWidth\r\n            size='large'\r\n          >\r\n            Check out\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default BasketPage;\r\n","import { FormGroup, FormControlLabel, Checkbox } from '@mui/material';\r\nimport { useState } from 'react';\r\n\r\ninterface Props {\r\n  items: string[];\r\n  checked?: string[];\r\n  onChange: (items: string[]) => void;\r\n}\r\n\r\nconst CheckboxButtons = ({ items, checked, onChange }: Props) => {\r\n  const [checkedItems, setCheckedItems] = useState(checked || []);\r\n\r\n  const handleChecked = (value: string) => {\r\n    const currentIndex = checkedItems.findIndex((i) => i === value);\r\n    let newChecked: string[] = [];\r\n    if (currentIndex >= 0) newChecked = checkedItems.filter((i) => i !== value);\r\n    else newChecked = [...checkedItems, value];\r\n    setCheckedItems(newChecked);\r\n\r\n    onChange(newChecked);\r\n  };\r\n\r\n  return (\r\n    <FormGroup>\r\n      {items.map((item) => (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={checkedItems.includes(item)}\r\n              onClick={() => handleChecked(item)}\r\n            />\r\n          }\r\n          label={item}\r\n          key={item}\r\n        />\r\n      ))}\r\n    </FormGroup>\r\n  );\r\n};\r\n\r\nexport default CheckboxButtons;\r\n","import {\r\n  FormControl,\r\n  FormLabel,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n} from '@mui/material';\r\n\r\ninterface Props {\r\n  options: any[];\r\n  selectedValue: string;\r\n  onChange: (event: any) => void;\r\n}\r\n\r\nconst RadioButtonGroup = ({ options, selectedValue, onChange }: Props) => {\r\n  return (\r\n    <FormControl>\r\n      <FormLabel id='demo-radio-buttons-group-label'></FormLabel>\r\n      <RadioGroup value={selectedValue} onChange={onChange}>\r\n        {options.map(({ value, label }) => (\r\n          <FormControlLabel\r\n            value={value}\r\n            control={<Radio />}\r\n            label={label}\r\n            key={value}\r\n          />\r\n        ))}\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default RadioButtonGroup;\r\n","import { Backdrop, Box, CircularProgress, Typography } from '@mui/material';\r\n\r\ninterface Props {\r\n  message?: string;\r\n}\r\n\r\nconst LoadingComponent = ({ message = 'Loading...' }: Props) => {\r\n  return (\r\n    <Backdrop open={true} invisible={true}>\r\n      <Box\r\n        display='flex'\r\n        justifyContent='center'\r\n        alignItems='center'\r\n        height='100vh'\r\n      >\r\n        <CircularProgress size={100} color='secondary' />\r\n        <Typography variant='h4' sx={{ position: 'fixed', top: '60%' }}>\r\n          {message}\r\n        </Typography>\r\n      </Box>\r\n    </Backdrop>\r\n  );\r\n};\r\nexport default LoadingComponent;\r\n","import {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  Grid,\r\n  Skeleton,\r\n} from '@mui/material';\r\n\r\nexport default function ProductCardSkeleton() {\r\n  return (\r\n    <Grid item xs component={Card}>\r\n      <CardHeader\r\n        avatar={\r\n          <Skeleton\r\n            animation='wave'\r\n            variant='circular'\r\n            width={40}\r\n            height={40}\r\n          />\r\n        }\r\n        title={\r\n          <Skeleton\r\n            animation='wave'\r\n            height={10}\r\n            width='80%'\r\n            style={{ marginBottom: 6 }}\r\n          />\r\n        }\r\n      />\r\n      <Skeleton sx={{ height: 190 }} animation='wave' variant='rectangular' />\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation='wave' height={10} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation='wave' height={10} width='80%' />\r\n        </>\r\n      </CardContent>\r\n      <CardActions>\r\n        <>\r\n          <Skeleton animation='wave' height={10} width='40%' />\r\n          <Skeleton animation='wave' height={10} width='20%' />\r\n        </>\r\n      </CardActions>\r\n    </Grid>\r\n  );\r\n}\r\n","import { LoadingButton } from '@mui/lab';\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  CardMedia,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { Product } from '../../app/models/Product';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { addItemToBasketAsync } from '../basket/basketSlice';\r\n\r\ninterface Props {\r\n  product: Product;\r\n}\r\n\r\nconst ProductItem = ({ product }: Props) => {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <Card sx={{ maxWidth: 345 }}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar sx={{ bgcolor: 'secondary.main' }}>\r\n            {product.name.charAt(0).toUpperCase()}\r\n          </Avatar>\r\n        }\r\n        title={product.name}\r\n        titleTypographyProps={{\r\n          fontWeight: 'bold',\r\n          color: 'primary.main',\r\n        }}\r\n      />\r\n      <CardMedia\r\n        onClick={() => history.push(`/catalog/${product.id}`)}\r\n        component='img'\r\n        height='150'\r\n        image={product.pictureUrl}\r\n        alt={product.name}\r\n        sx={{ objectFit: 'contain', bgcolor: '#d1e6fa' }}\r\n      />\r\n      <CardContent>\r\n        <Typography gutterBottom variant='h5' component='div'>\r\n          ${(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n        <Typography variant='body2' color='text.secondary'>\r\n          {product.brand} / {product.type}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <LoadingButton\r\n          disabled={product.quantityInStock <= 0}\r\n          variant='outlined'\r\n          sx={{ mr: 1 }}\r\n          loading={status === `pendingAddItem${product.id}`}\r\n          size='small'\r\n          onClick={() =>\r\n            dispatch(addItemToBasketAsync({ productId: product.id }))\r\n          }\r\n        >\r\n          {product.quantityInStock <= 0 ? 'Out of stock' : 'Add to cart'}\r\n        </LoadingButton>\r\n        <Button\r\n          variant='outlined'\r\n          size='small'\r\n          component={Link}\r\n          to={`/catalog/${product.id}`}\r\n        >\r\n          View\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n","import { Grid } from '@mui/material';\r\nimport { Product } from '../../app/models/Product';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport ProductCardSkeleton from './ProductCardSkeleton';\r\nimport ProductItem from './ProductItem';\r\n\r\ninterface Props {\r\n  products: Product[];\r\n}\r\n\r\nconst ProductList = ({ products }: Props) => {\r\n  const { productsLoaded } = useAppSelector((state) => state.catalog);\r\n  return (\r\n    <Grid container spacing={4}>\r\n      {products.map((product) => (\r\n        <Grid item xs={4} key={product.id}>\r\n          {!productsLoaded ? (\r\n            <ProductCardSkeleton key={product.id} />\r\n          ) : (\r\n            <ProductItem product={product} />\r\n          )}\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n","import { debounce, TextField } from '@mui/material';\r\nimport { useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { setProductParams } from './catalogSlice';\r\n\r\nconst ProductSearch = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { productParams } = useAppSelector((state) => state.catalog);\r\n  const [searchTerm, setSearchTerm] = useState(productParams.searchTerm || '');\r\n\r\n  const debounceSearch = debounce((event) => {\r\n    dispatch(setProductParams({ searchTerm: event.target.value }));\r\n  }, 500);\r\n\r\n  return (\r\n    <TextField\r\n      label='Search product'\r\n      variant='outlined'\r\n      fullWidth\r\n      value={searchTerm}\r\n      onChange={(event) => {\r\n        setSearchTerm(event.target.value);\r\n        debounceSearch(event);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProductSearch;\r\n","import { Grid, Paper } from '@mui/material';\r\nimport { useEffect } from 'react';\r\nimport CheckboxButtons from '../../app/components/CheckboxButtons';\r\nimport PaginationApp from '../../app/components/PaginationApp';\r\nimport RadioButtonGroup from '../../app/components/RadioButtonGroup';\r\nimport useProducts from '../../app/hook/useProducts';\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport {\r\n  fetchFiltersAsync,\r\n  fetchProductListAsync,\r\n  setPageNumber,\r\n  setProductParams,\r\n} from './catalogSlice';\r\nimport ProductList from './ProductList';\r\nimport ProductSearch from './ProductSearch';\r\n\r\nconst sortOptions = [\r\n  { value: 'name', label: 'Alphabetical' },\r\n  { value: 'priceDesc', label: 'Price - High to low' },\r\n  { value: 'price', label: 'Price - Low to high' },\r\n];\r\n\r\nconst Catalog = () => {\r\n  const dispatch = useAppDispatch();\r\n  const {\r\n    productList,\r\n    productsLoaded,\r\n    productParams,\r\n    brands,\r\n    types,\r\n    filtersLoaded,\r\n  } = useProducts();\r\n\r\n  const { metaData } = useAppSelector((state) => state.catalog);\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductListAsync());\r\n  }, [productsLoaded, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!filtersLoaded) dispatch(fetchFiltersAsync());\r\n  }, [dispatch, filtersLoaded]);\r\n\r\n  if (!filtersLoaded) return <LoadingComponent message='Loading products...' />;\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item xs={3}>\r\n        <Paper sx={{ mb: 2 }}>\r\n          <ProductSearch />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <RadioButtonGroup\r\n            selectedValue={productParams.orderBy}\r\n            options={sortOptions}\r\n            onChange={(event) => {\r\n              dispatch(setProductParams({ orderBy: event.target.value }));\r\n            }}\r\n          />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckboxButtons\r\n            items={brands}\r\n            checked={productParams.brands}\r\n            onChange={(items: string[]) => {\r\n              dispatch(setProductParams({ brands: items }));\r\n            }}\r\n          />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckboxButtons\r\n            items={types}\r\n            checked={productParams.types}\r\n            onChange={(items: string[]) => {\r\n              dispatch(setProductParams({ types: items }));\r\n            }}\r\n          />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={9}>\r\n        <ProductList products={productList} />\r\n      </Grid>\r\n\r\n      <Grid item xs={3} />\r\n      <Grid item xs={9}>\r\n        {metaData && (\r\n          <PaginationApp\r\n            metaData={metaData}\r\n            onPageChange={(page) =>\r\n              dispatch(setPageNumber({ pageNumber: page }))\r\n            }\r\n          />\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Catalog;\r\n","import { LoadingButton } from '@mui/lab';\r\nimport {\r\n  Divider,\r\n  Grid,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableRow,\r\n  TextField,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport {\r\n  addItemToBasketAsync,\r\n  removeItemFromBasket,\r\n} from '../basket/basketSlice';\r\nimport { fetchProductAsync, productsSelector } from './catalogSlice';\r\n\r\nconst ProductDetail = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { id } = useParams<{ id: string }>();\r\n  const product = useAppSelector((state) =>\r\n    productsSelector.selectById(state, id)\r\n  );\r\n\r\n  console.log(product);\r\n  const { status: productStatus } = useAppSelector((state) => state.catalog);\r\n\r\n  const { basket, status } = useAppSelector((state) => state.basket);\r\n  const [quantity, setQuantity] = useState<number>(1);\r\n  const itemInBasket = basket?.items.find((i) => i.productId === product?.id);\r\n\r\n  useEffect(() => {\r\n    if (!product) dispatch(fetchProductAsync(parseInt(id)));\r\n    if (itemInBasket) setQuantity(itemInBasket.quantity);\r\n  }, [id, itemInBasket, product, dispatch]);\r\n\r\n  const handleChangeQuantity = (e: any) => {\r\n    if (parseInt(e.target.value) >= 0) setQuantity(parseInt(e.target.value));\r\n  };\r\n\r\n  const handleUpdateCart = () => {\r\n    if (!itemInBasket || quantity > itemInBasket?.quantity) {\r\n      const updatedQuantity = itemInBasket\r\n        ? quantity - itemInBasket.quantity\r\n        : quantity;\r\n      dispatch(\r\n        addItemToBasketAsync({\r\n          productId: product?.id!,\r\n          quantity: updatedQuantity,\r\n        })\r\n      );\r\n    } else {\r\n      const updatedQuantity = itemInBasket.quantity - quantity;\r\n      dispatch(\r\n        removeItemFromBasket({\r\n          productId: product?.id!,\r\n          quantity: updatedQuantity,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  if (productStatus.includes('pending'))\r\n    return <LoadingComponent message='Loading product...' />;\r\n\r\n  if (!product) return <Typography variant='h2'>Product not found</Typography>;\r\n  return (\r\n    <>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={6}>\r\n          <img\r\n            src={product.pictureUrl}\r\n            alt={product.name}\r\n            style={{ width: '100%', maxHeight: 300, objectFit: 'contain' }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Typography variant='h3'>{product.name}</Typography>\r\n          <Divider sx={{ mb: 2 }} />\r\n          <Typography variant='h4' color='secondary'>\r\n            ${(product.price / 100).toFixed(2)}\r\n          </Typography>\r\n          <TableContainer>\r\n            <Table>\r\n              <TableBody>\r\n                <TableRow>\r\n                  <TableCell>Name</TableCell>\r\n                  <TableCell>{product.name}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Description</TableCell>\r\n                  <TableCell>{product.description}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Type</TableCell>\r\n                  <TableCell>{product.type}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Brand</TableCell>\r\n                  <TableCell>{product.brand}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Quantity in stock</TableCell>\r\n                  <TableCell>{product.quantityInStock}</TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                variant='outlined'\r\n                type='number'\r\n                label='Quantity in cart'\r\n                fullWidth\r\n                value={quantity}\r\n                onChange={handleChangeQuantity}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <LoadingButton\r\n                loading={status.includes('pending')}\r\n                sx={{ height: '55px' }}\r\n                color='primary'\r\n                size='large'\r\n                variant='contained'\r\n                fullWidth\r\n                onClick={handleUpdateCart}\r\n                disabled={\r\n                  product.quantityInStock <= 0 ||\r\n                  (quantity === 0 && !itemInBasket) ||\r\n                  quantity === itemInBasket?.quantity\r\n                }\r\n              >\r\n                {product.quantityInStock <= 0\r\n                  ? 'Out of stock'\r\n                  : itemInBasket\r\n                  ? 'Update quantity'\r\n                  : 'Add to cart'}\r\n              </LoadingButton>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n","import { Checkbox, FormControlLabel } from '@mui/material';\r\nimport { useController, UseControllerProps } from 'react-hook-form';\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst AppCheckbox = (props: Props) => {\r\n  const { field } = useController({ ...props, defaultValue: false });\r\n  return (\r\n    <FormControlLabel\r\n      disabled={props.disabled || false}\r\n      control={<Checkbox {...field} checked={field.value} color='secondary' />}\r\n      label={props.label}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AppCheckbox;\r\n","import { Grid, Typography } from '@mui/material';\r\nimport { useFormContext } from 'react-hook-form';\r\nimport AppCheckbox from '../../app/components/AppCheckbox';\r\nimport AppTextInput from '../../app/components/AppTextInput';\r\n\r\nexport default function AddressForm() {\r\n  const { control, formState } = useFormContext();\r\n  return (\r\n    <>\r\n      <Typography variant='h6' gutterBottom>\r\n        Shipping address\r\n      </Typography>\r\n\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='fullName' label='Full name' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput\r\n            control={control}\r\n            name='phoneNumber'\r\n            label='Phone number'\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name='address1' label='Address 1' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name='address2' label='Address 2' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='city' label='City' />\r\n        </Grid>\r\n        {/* <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='state' label='State' />\r\n        </Grid> */}\r\n        {/* <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='zip' label='Zip' />\r\n        </Grid> */}\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='country' label='Country' />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppCheckbox\r\n            disabled={!formState.isDirty}\r\n            control={control}\r\n            name='saveAddress'\r\n            label='Save it as the default address'\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { Grid } from '@mui/material';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport BasketSummary from '../basket/BasketSummary';\r\nimport BasketTable from '../basket/BasketTable';\r\n\r\nexport default function Review() {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  return (\r\n    <>\r\n      {basket && <BasketTable items={basket.items} isBasket={false} />}\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import * as yup from 'yup';\r\n\r\nexport const validationSchema = [\r\n  yup.object({\r\n    fullName: yup.string().required('Fulname is required'),\r\n    address1: yup.string().required('Address 1 is required'),\r\n    address2: yup.string(),\r\n    city: yup.string().required('City is required'),\r\n    phoneNumber: yup.number().required(),\r\n    // state: yup.string().required('State is required'),\r\n    // zip: yup.string().required('Zip is required'),\r\n    country: yup.string().required('Country is required'),\r\n  }),\r\n  yup.object({}),\r\n  yup.object({\r\n    nameOnCard: yup.string().required('Name on card is required'),\r\n  }),\r\n];\r\n","import {\r\n  Paper,\r\n  Typography,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Box,\r\n  Button,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { FieldValues, FormProvider, useForm } from 'react-hook-form';\r\nimport AddressForm from './AddressForm';\r\nimport Review from './Review';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { validationSchema } from './checkoutValidation';\r\nimport { useAppDispatch } from '../../app/store/configureStore';\r\nimport agent from '../../app/api/agent';\r\nimport { clearBasket } from '../basket/basketSlice';\r\nimport { LoadingButton } from '@mui/lab';\r\n\r\nconst steps = ['Shipping address', 'Review your order'];\r\n// const steps = ['Shipping address', 'Review your order', 'Payment details'];\r\n\r\nfunction getStepContent(step: number) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddressForm />;\r\n    case 1:\r\n      return <Review />;\r\n    // case 2:\r\n    //   return <PaymentForm />;\r\n    default:\r\n      throw new Error('Unknown step');\r\n  }\r\n}\r\n\r\nexport default function CheckoutPage() {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [orderNumber, setOrderNumber] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n\r\n  const methods = useForm({\r\n    mode: 'all',\r\n    resolver: yupResolver(currentValidationSchema),\r\n  });\r\n\r\n  useEffect(() => {\r\n    agent.Account.getUserAddress().then((response) => {\r\n      if (response) {\r\n        methods.reset({\r\n          ...methods.getValues(),\r\n          ...response,\r\n          saveAddress: false,\r\n        });\r\n      }\r\n    });\r\n  }, [methods]);\r\n\r\n  const handleNext = async (data: FieldValues) => {\r\n    console.log(data);\r\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\r\n\r\n    if (activeStep === steps.length - 1) {\r\n      try {\r\n        setLoading(true);\r\n        const orderNum = await agent.Orders.create({\r\n          saveAddress,\r\n          shippingAddress,\r\n        });\r\n        setOrderNumber(orderNum);\r\n        dispatch(clearBasket());\r\n        setActiveStep(activeStep + 1);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep(activeStep - 1);\r\n  };\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <Paper\r\n        variant='outlined'\r\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\r\n      >\r\n        <Typography component='h1' variant='h4' align='center'>\r\n          Checkout\r\n        </Typography>\r\n\r\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n\r\n        <>\r\n          {activeStep === steps.length ? (\r\n            <>\r\n              <Typography variant='h5' gutterBottom>\r\n                Thank you for your order.\r\n              </Typography>\r\n              <Typography variant='subtitle1'>\r\n                Your order number is {orderNumber}. We have emailed your order\r\n                confirmation, and will send you an update when your order has\r\n                shipped.\r\n              </Typography>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <form onSubmit={methods.handleSubmit(handleNext)}>\r\n                {getStepContent(activeStep)}\r\n                <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                  {activeStep !== 0 && (\r\n                    <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\r\n                      Back\r\n                    </Button>\r\n                  )}\r\n                  <LoadingButton\r\n                    loading={loading}\r\n                    disabled={!methods.formState.isValid}\r\n                    variant='contained'\r\n                    type='submit'\r\n                    sx={{ mt: 3, ml: 1 }}\r\n                  >\r\n                    {activeStep === steps.length - 1 ? 'Place order' : 'Next'}\r\n                  </LoadingButton>\r\n                </Box>\r\n              </form>\r\n            </>\r\n          )}\r\n        </>\r\n      </Paper>\r\n    </FormProvider>\r\n  );\r\n}\r\n","const ContactPage = () => {\r\n  return <div>ContactPage</div>;\r\n};\r\n\r\nexport default ContactPage;\r\n","import { Box, Grid, Typography } from '@mui/material';\r\nimport { Container } from '@mui/system';\r\nimport { useEffect, useState } from 'react';\r\nimport Slider from 'react-slick';\r\nimport agent from '../../app/api/agent';\r\nimport { Product } from '../../app/models/Product';\r\nimport ProductItem from '../catalog/ProductItem';\r\n\r\nconst HomePage = () => {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n\r\n  useEffect(() => {\r\n    agent.Catalog.nomalList()\r\n      .then((products) => setProducts(products.items))\r\n      .catch((error) => console.log(error));\r\n  }, []);\r\n\r\n  const settings = {\r\n    dots: true,\r\n    arrows: false,\r\n    fade: true,\r\n    infinite: true,\r\n    autoplay: true,\r\n    speed: 500,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n  };\r\n\r\n  return (\r\n    <div className='homepage'>\r\n      <Slider {...settings}>\r\n        <div>\r\n          <img\r\n            src='/images/banner_1.png'\r\n            alt='hero'\r\n            style={{\r\n              display: 'block',\r\n              width: '100%',\r\n              maxHeight: 500,\r\n              objectFit: 'cover',\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <img\r\n            src='/images/banner_2.png'\r\n            alt='hero'\r\n            style={{\r\n              display: 'block',\r\n              width: '100%',\r\n              maxHeight: 500,\r\n              objectFit: 'cover',\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <img\r\n            src='/images/banner_3.png'\r\n            alt='hero'\r\n            style={{\r\n              display: 'block',\r\n              width: '100%',\r\n              maxHeight: 500,\r\n              objectFit: 'cover',\r\n            }}\r\n          />\r\n        </div>\r\n      </Slider>\r\n\r\n      <Container>\r\n        <Box mt={4}>\r\n          <Typography variant='h4' sx={{ fontStyle: 'italic' }}>\r\n            What's trending\r\n          </Typography>\r\n          <Grid container spacing={4} sx={{ pt: 1, mb: 4 }}>\r\n            {products.length > 0 &&\r\n              products.map((product) => (\r\n                <Grid item xs={3} key={product.id}>\r\n                  {<ProductItem product={product} />}\r\n                </Grid>\r\n              ))}\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import { Box, Button, Grid, Typography } from '@mui/material';\r\nimport { BasketItem } from '../../app/models/Basket';\r\nimport { Order } from '../../app/models/Order';\r\nimport BasketSummary from '../basket/BasketSummary';\r\nimport BasketTable from '../basket/BasketTable';\r\n\r\ninterface Props {\r\n  order: Order;\r\n  setSelectedOrder: (id: number) => void;\r\n}\r\n\r\nconst OrderDetail = ({ order, setSelectedOrder }: Props) => {\r\n  return (\r\n    <>\r\n      <Box display='flex' justifyContent='space-between'>\r\n        <Typography sx={{ p: 2 }} gutterBottom variant='h4'>\r\n          Order #{order.id} - {order.orderStatus}\r\n        </Typography>\r\n        <Button\r\n          onClick={() => setSelectedOrder(0)}\r\n          sx={{ m: 2 }}\r\n          size='large'\r\n          variant='contained'\r\n        >\r\n          Back\r\n        </Button>\r\n      </Box>\r\n      <BasketTable items={order.orderItems as BasketItem[]} isBasket={false} />\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary subtotal={order.subtotal} />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderDetail;\r\n","import {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Button,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport agent from '../../app/api/agent';\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { Order } from '../../app/models/Order';\r\nimport OrderDetail from './OrderDetail';\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState<Order[] | null>(null);\r\n  const [loading, setLoading] = useState<Boolean>(true);\r\n  const [selectedOrderNumber, setSelectedOrderNumber] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    agent.Orders.list()\r\n      .then((orders) => setOrders(orders))\r\n      .catch((error) => console.log(error))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) return <LoadingComponent message='Loading orders...' />;\r\n\r\n  if (selectedOrderNumber > 0)\r\n    return (\r\n      <OrderDetail\r\n        order={orders?.find((order) => order.id === selectedOrderNumber)!}\r\n        setSelectedOrder={setSelectedOrderNumber}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label='simple table'>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Order number</TableCell>\r\n            <TableCell align='right'>Total</TableCell>\r\n            <TableCell align='right'>Order date</TableCell>\r\n            <TableCell align='right'>Order status</TableCell>\r\n            <TableCell align='right'></TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {orders?.map((order) => (\r\n            <TableRow\r\n              key={order.id}\r\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n            >\r\n              <TableCell component='th' scope='row'>\r\n                {order.id}\r\n              </TableCell>\r\n              <TableCell align='right'>{order.total}</TableCell>\r\n              <TableCell align='right'>\r\n                {order.orderDate.split('T')[0]}\r\n              </TableCell>\r\n              <TableCell align='right'>{order.orderStatus}</TableCell>\r\n              <TableCell align='right'>\r\n                <Button onClick={() => setSelectedOrderNumber(order.id)}>\r\n                  View\r\n                </Button>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import { Button, Container, Divider, Paper, Typography } from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <Container component={Paper} sx={{ height: 400 }}>\r\n      <Typography variant='h3' gutterBottom>\r\n        Oops - we could not find what are you looking for\r\n      </Typography>\r\n      <Divider />\r\n      <Button fullWidth component={Link} to='/catalog'>\r\n        Go back to shop\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import { Button, Container, Divider, Paper, Typography } from '@mui/material';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\nconst ServerError = () => {\r\n  const history = useHistory();\r\n  const { state } = useLocation<any>();\r\n  return (\r\n    <Container component={Paper}>\r\n      {state?.error ? (\r\n        <>\r\n          <Typography variant='h3' color='error' gutterBottom>\r\n            {state.error.title}\r\n          </Typography>\r\n          <Divider />\r\n          <Typography>\r\n            {state.error.detail || 'Internal server error'}\r\n          </Typography>\r\n        </>\r\n      ) : (\r\n        <Typography variant='h5' gutterBottom>\r\n          Server error\r\n        </Typography>\r\n      )}\r\n      <Button onClick={() => history.push('/catalog')}>\r\n        Go back to the store\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ServerError;\r\n","import { Box, Grid } from '@mui/material';\r\nimport { Container } from '@mui/system';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst linkStyle = {\r\n  textDecoration: 'none',\r\n  color: 'inherit',\r\n};\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <Box\r\n      px={{ xs: 3 }}\r\n      py={{ xs: 3 }}\r\n      mt={2}\r\n      bgcolor='text.secondary'\r\n      color='white'\r\n    >\r\n      <Container>\r\n        <Grid container spacing={5}>\r\n          <Grid item xs={4}>\r\n            <Box borderBottom={1} fontWeight='600'>\r\n              Help\r\n            </Box>\r\n            <Box>\r\n              <Link to='/about' style={linkStyle}>\r\n                About\r\n              </Link>\r\n            </Box>\r\n          </Grid>\r\n\r\n          <Grid item xs={4}>\r\n            <Box borderBottom={1} fontWeight='600'>\r\n              Account\r\n            </Box>\r\n            <Box>\r\n              <Link to='/login' style={linkStyle}>\r\n                Login\r\n              </Link>\r\n            </Box>\r\n            <Box>\r\n              <Link to='/register' style={linkStyle}>\r\n                Register\r\n              </Link>\r\n            </Box>\r\n          </Grid>\r\n\r\n          <Grid item xs={4}>\r\n            <Box borderBottom={1} fontWeight='600'>\r\n              Shopping\r\n            </Box>\r\n            <Box>\r\n              <Link to='/basket' style={linkStyle}>\r\n                Cart\r\n              </Link>\r\n            </Box>\r\n            <Box>\r\n              <Link to='/order' style={linkStyle}>\r\n                Order\r\n              </Link>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState } from 'react';\r\nimport { Button, Menu, Fade, MenuItem } from '@mui/material';\r\nimport { useAppDispatch, useAppSelector } from '../store/configureStore';\r\nimport { signOut } from '../../features/account/accountSlice';\r\nimport { clearBasket } from '../../features/basket/basketSlice';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst SignedInMenu = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { user } = useAppSelector((state) => state.account);\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={handleClick} sx={{ color: 'inherit', typography: 'h6' }}>\r\n        {user?.email}\r\n      </Button>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Fade}\r\n      >\r\n        {/* <MenuItem onClick={handleClose}>Profile</MenuItem> */}\r\n        <MenuItem onClick={handleClose} component={Link} to='/orders'>\r\n          My orders\r\n        </MenuItem>\r\n        <MenuItem\r\n          onClick={() => {\r\n            dispatch(clearBasket());\r\n            dispatch(signOut());\r\n          }}\r\n        >\r\n          Log out\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignedInMenu;\r\n","import { ShoppingCart } from '@mui/icons-material';\r\nimport {\r\n  AppBar,\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  Switch,\r\n  Toolbar,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { useAppSelector } from '../store/configureStore';\r\nimport SignedInMenu from './SignedInMenu';\r\n\r\ninterface Props {\r\n  darkMode: boolean;\r\n  handleThemeChange: () => void;\r\n}\r\n\r\nconst midLinks = [\r\n  { title: 'catalog', path: '/catalog' },\r\n  { title: 'about', path: '/about' },\r\n  // { title: 'contact', path: '/contact' },\r\n];\r\n\r\nconst rightLinks = [\r\n  { title: 'login', path: '/login' },\r\n  { title: 'register', path: '/register' },\r\n];\r\n\r\nconst navLinkStyle = {\r\n  color: 'inherit',\r\n  typography: 'h6',\r\n  textDecoration: 'none',\r\n  '&:hover': {\r\n    color: 'grey.500',\r\n  },\r\n  '&:active': {\r\n    color: 'text.secondary',\r\n  },\r\n};\r\n\r\nconst Header = ({ darkMode, handleThemeChange }: Props) => {\r\n  const { user } = useAppSelector((state) => state.account);\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  const itemCount =\r\n    basket?.items.reduce((sum, item) => (sum += item.quantity), 0) || 0;\r\n\r\n  return (\r\n    <AppBar position='static'>\r\n      <Toolbar\r\n        sx={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Box display='flex' alignItems='center'>\r\n          <Typography variant='h5' component={NavLink} to='/' sx={navLinkStyle}>\r\n            Re-store\r\n          </Typography>\r\n          <Switch checked={darkMode} onChange={handleThemeChange} />\r\n        </Box>\r\n\r\n        <List sx={{ display: 'flex' }}>\r\n          {midLinks.map(({ title, path }) => (\r\n            <ListItem\r\n              component={NavLink}\r\n              to={path}\r\n              key={path}\r\n              sx={navLinkStyle}\r\n            >\r\n              {title.toUpperCase()}\r\n            </ListItem>\r\n          ))}\r\n\r\n          {user && user.roles?.includes('Admin') && (\r\n            <ListItem component={NavLink} to={'/inventory'} sx={navLinkStyle}>\r\n              INVENTORY\r\n            </ListItem>\r\n          )}\r\n        </List>\r\n\r\n        <Box display='flex' alignItems='center'>\r\n          <IconButton\r\n            component={Link}\r\n            to='/basket'\r\n            size='large'\r\n            sx={{ color: 'inherit' }}\r\n          >\r\n            <Badge badgeContent={itemCount} color='secondary'>\r\n              <ShoppingCart />\r\n            </Badge>\r\n          </IconButton>\r\n\r\n          {user ? (\r\n            <SignedInMenu />\r\n          ) : (\r\n            <List sx={{ display: 'flex' }}>\r\n              {rightLinks.map(({ title, path }) => (\r\n                <ListItem\r\n                  component={NavLink}\r\n                  to={path}\r\n                  key={path}\r\n                  sx={navLinkStyle}\r\n                >\r\n                  {title.toUpperCase()}\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          )}\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ComponentType } from 'react';\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  RouteComponentProps,\r\n  RouteProps,\r\n} from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { useAppSelector } from '../store/configureStore';\r\n\r\ninterface Props extends RouteProps {\r\n  component: ComponentType<RouteComponentProps<any>> | ComponentType<any>;\r\n  roles?: string[];\r\n}\r\n\r\nexport default function PrivateRoute({\r\n  component: Component,\r\n  roles,\r\n  ...rest\r\n}: Props) {\r\n  const { user } = useAppSelector((state) => state.account);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (!user) {\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: '/login', state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n\r\n        if (roles && !roles?.some((r) => user.roles?.includes(r))) {\r\n          toast.error('Not authorised to access this area');\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: '/catalog', state: { from: props.location } }}\r\n            />\r\n          );\r\n        }\r\n\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { ThemeProvider } from '@emotion/react';\nimport { Box, Container, CssBaseline } from '@mui/material';\nimport createTheme from '@mui/material/styles/createTheme';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport AboutPage from '../../features/about/AboutPage';\nimport { fetchCurrentUserAsync } from '../../features/account/accountSlice';\nimport Login from '../../features/account/Login';\nimport Register from '../../features/account/Register';\nimport InventoryPage from '../../features/admin/inventory/InventoryPage';\nimport BasketPage from '../../features/basket/BasketPage';\nimport { fetchBasketAsync } from '../../features/basket/basketSlice';\nimport Catalog from '../../features/catalog/Catalog';\nimport ProductDetail from '../../features/catalog/ProductDetail';\nimport CheckoutPage from '../../features/checkout/CheckoutPage';\nimport ContactPage from '../../features/contact/ContactPage';\nimport HomePage from '../../features/home/HomePage';\nimport Orders from '../../features/order/Order';\nimport NotFound from '../errors/NotFound';\nimport ServerError from '../errors/ServerError';\nimport { useAppDispatch } from '../store/configureStore';\nimport Footer from './Footer';\nimport Header from './Header';\nimport LoadingComponent from './LoadingComponent';\nimport PrivateRoute from './PrivateRoute';\n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n\n  const initApp = useCallback(async () => {\n    try {\n      await dispatch(fetchCurrentUserAsync());\n      await dispatch(fetchBasketAsync());\n    } catch (error) {\n      console.log(error);\n    }\n  }, [dispatch]);\n\n  useEffect(() => {\n    initApp().then(() => setLoading(false));\n  }, [initApp]);\n\n  const [darkMode, setDarkMode] = useState(false);\n  const paletteType = darkMode ? 'dark' : 'light';\n  const theme = createTheme({\n    palette: {\n      mode: paletteType,\n      background: {\n        default: paletteType === 'light' ? '#eaeaea' : '#121212',\n      },\n    },\n  });\n\n  const handleThemeChange = () => {\n    setDarkMode(!darkMode);\n  };\n\n  if (loading) return <LoadingComponent />;\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Box minHeight='100vh'>\n        <ToastContainer\n          position='bottom-right'\n          hideProgressBar\n          theme='colored'\n        />\n        <CssBaseline />\n        <Header darkMode={darkMode} handleThemeChange={handleThemeChange} />\n        <Route exact path='/' component={HomePage} />\n        <Route\n          path={'/(.+)'}\n          render={() => (\n            <Container sx={{ mt: 4 }}>\n              <Switch>\n                <Route exact path='/' component={HomePage} />\n                <Route exact path='/catalog' component={Catalog} />\n                <Route path='/catalog/:id' component={ProductDetail} />\n                <Route path='/about' component={AboutPage} />\n                <Route path='/contact' component={ContactPage} />\n                <Route path='/server-error' component={ServerError} />\n                <Route path='/basket' component={BasketPage} />\n                <PrivateRoute path='/checkout' component={CheckoutPage} />\n                <PrivateRoute path='/orders' component={Orders} />\n                <PrivateRoute\n                  path='/inventory'\n                  roles={['Admin']}\n                  component={InventoryPage}\n                />\n                <Route path='/login' component={Login} />\n                <Route path='/register' component={Register} />\n                <Route path='*' component={NotFound} />\n              </Switch>\n            </Container>\n          )}\n        />\n      </Box>\n      <Footer />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Router } from 'react-router-dom';\nimport { store } from './app/store/configureStore';\nimport App from './app/layout/App';\nimport reportWebVitals from './reportWebVitals';\nimport { createBrowserHistory } from 'history';\nimport { Provider } from 'react-redux';\nimport { fetchProductListAsync } from './features/catalog/catalogSlice';\nimport 'slick-carousel/slick/slick.css';\nimport 'slick-carousel/slick/slick-theme.css';\n\nexport const history = createBrowserHistory();\n\nstore.dispatch(fetchProductListAsync());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <Router history={history}>\n          <App />\n        </Router>\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}