{"version":3,"sources":["app/models/Pagination.ts","app/uti/utilities.ts","features/basket/basketSlice.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","app/store/configureStore.ts","app/api/agent.ts","features/about/AboutPage.tsx","features/account/Login.tsx","features/account/Register.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketPage.tsx","app/components/CheckboxButtons.tsx","app/components/PaginationApp.tsx","app/components/RadioButtonGroup.tsx","app/layout/LoadingComponent.tsx","features/catalog/ProductCardSkeleton.tsx","features/catalog/ProductItem.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/Catalog.tsx","features/catalog/ProductDetail.tsx","app/components/AppCheckbox.tsx","app/components/AppTextInput.tsx","features/checkout/AddressForm.tsx","features/checkout/PaymentForm.tsx","features/checkout/Review.tsx","features/checkout/checkoutValidation.ts","features/checkout/CheckoutPage.tsx","features/contact/ContactPage.tsx","features/home/HomePage.tsx","features/order/OrderDetail.tsx","features/order/Order.tsx","app/errors/NotFound.tsx","app/errors/ServerError.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","app/layout/PrivateRoute.tsx","app/layout/App.tsx","reportWebVitals.ts","index.tsx"],"names":["PaginatedList","items","metadata","metaData","this","currencyFormat","currency","toFixed","fetchBasketAsync","createAsyncThunk","_","thunkApi","a","agent","Basket","get","rejectWithValue","error","data","condition","key","b","document","cookie","match","pop","getCookie","addItemToBasketAsync","productId","quantity","addItem","removeItemFromBasket","removeItem","basketSilice","createSlice","name","initialState","basket","status","reducers","setBasket","state","action","payload","clearBasket","extraReducers","builder","addCase","pending","id","meta","arg","fulfilled","removedItemIndex","findIndex","item","undefined","splice","rejected","console","log","addMatcher","isAnyOf","actions","signInAsync","Account","login","userDto","user","dispatch","localStorage","setItem","JSON","stringify","fetchCurrentUserAsync","setUser","parse","getItem","getCurrentUser","accountSlice","signOut","history","push","toast","productsAdapter","createEntityAdapter","getAxiosParams","urlSearhParams","params","URLSearchParams","append","pageNumber","toString","pageSize","orderBy","searchTerm","brands","length","types","fetchProductListAsync","getState","catalog","productParams","Catalog","list","response","setMetaData","fetchProductAsync","detail","fetchFiltersAsync","filters","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","setPageNumber","resetProductParams","setAll","upsertOne","productsSelector","getSelectors","store","configureStore","reducer","account","useAppDispatch","useDispatch","useAppSelector","useSelector","axios","defaults","baseURL","process","withCredentials","requestBody","interceptors","request","use","config","token","headers","Authorization","pagination","errors","modalStateErrors","flat","title","pathname","Promise","reject","url","then","body","post","delete","TestError","get400Error","get401Error","get404Error","get500Error","getValidationError","value","register","getUserAddress","Orders","fetch","create","values","AboutPage","useState","validationErrors","setValidationErrors","Container","Typography","gutterBottom","variant","ButtonGroup","fullWidth","Button","onClick","catch","Alert","severity","AlertTitle","List","map","ListItem","ListItemText","Login","useHistory","location","useLocation","useForm","mode","handleSubmit","formState","isSubmitting","isValid","formSubmit","from","component","Paper","maxWidth","sx","display","flexDirection","alignItems","p","Avatar","m","bgcolor","Box","onSubmit","noValidate","mt","TextField","margin","label","autoComplete","autoFocus","required","username","helperText","message","type","password","FormControlLabel","control","Checkbox","color","LoadingButton","disabled","loading","mb","Grid","container","to","Register","setError","success","setTimeout","forEach","includes","handleErrors","pattern","email","BasketSummary","subtotal","reduce","sum","price","deliveryFee","total","TableContainer","Table","TableBody","TableRow","TableCell","colSpan","align","style","fontStyle","BasketTable","isBasket","minWidth","TableHead","border","scope","Remove","Add","Delete","BasketPage","xs","Link","size","CheckboxButtons","checked","onChange","checkedItems","setCheckedItems","FormGroup","newChecked","i","filter","handleChecked","PaginationApp","onPageChange","totalCount","totalPages","currentPage","justifyContent","Pagination","count","page","e","RadioButtonGroup","options","selectedValue","FormControl","FormLabel","RadioGroup","Radio","LoadingComponent","Backdrop","open","invisible","height","CircularProgress","position","top","ProductCardSkeleton","Card","CardHeader","avatar","Skeleton","animation","width","marginBottom","CardContent","CardActions","ProductItem","product","charAt","toUpperCase","titleTypographyProps","fontWeight","CardMedia","image","pictureUrl","alt","objectFit","brand","ProductList","products","spacing","ProductSearch","setSearchTerm","debounceSearch","debounce","event","target","sortOptions","productList","selectAll","useEffect","ProductDetail","useParams","selectById","productStatus","setQuantity","itemInBasket","find","parseInt","src","Divider","description","quantityInStock","updatedQuantity","AppCheckbox","props","field","useController","defaultValue","AppTextInput","fieldState","AddressForm","useFormContext","sm","isDirty","PaymentForm","md","Review","validationSchema","yup","fullName","address1","address2","city","zip","country","nameOnCard","steps","getStepContent","step","Error","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setLoading","currentValidationSchema","methods","resolver","yupResolver","reset","getValues","saveAddress","handleNext","shippingAddress","orderNum","my","Stepper","pt","pb","Step","StepLabel","ml","ContactPage","HomePage","OrderDetail","order","setSelectedOrder","orderStatus","orderItems","orders","setOrders","selectedOrderNumber","setSelectedOrderNumber","finally","orderDate","split","NotFound","ServerError","SignedInMenu","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","Menu","onClose","TransitionComponent","Fade","MenuItem","midLinks","path","rightLinks","navLinkStyle","textDecoration","Header","darkMode","handleThemeChange","itemCount","AppBar","Toolbar","NavLink","Switch","IconButton","Badge","badgeContent","ShoppingCart","PrivateRoute","Component","rest","render","App","initApp","useCallback","setDarkMode","paletteType","theme","createTheme","palette","background","default","hideProgressBar","CssBaseline","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7665d383.chunk.js","sourcesContent":["export interface MetaData {\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalPages: number;\r\n  totalCount: number;\r\n}\r\n\r\nexport class PaginatedList<T> {\r\n  items: T;\r\n  metaData: MetaData;\r\n\r\n  constructor(items: T, metadata: MetaData) {\r\n    this.items = items;\r\n    this.metaData = metadata;\r\n  }\r\n}\r\n","export function getCookie(key: string) {\r\n  var b = document.cookie.match('(^|;)\\\\s*' + key + '\\\\s*=\\\\s*([^;]+)');\r\n  return b ? b.pop() : '';\r\n}\r\n\r\nexport const currencyFormat = (currency: number) => {\r\n  return `$${(currency / 100).toFixed(2)}`;\r\n};\r\n","import { createAsyncThunk, createSlice, isAnyOf } from '@reduxjs/toolkit';\r\nimport agent from '../../app/api/agent';\r\nimport { Basket } from '../../app/models/Basket';\r\nimport { getCookie } from '../../app/uti/utilities';\r\n\r\ninterface BasketState {\r\n  basket: Basket | null;\r\n  status: string;\r\n}\r\n\r\nconst initialState: BasketState = {\r\n  basket: null,\r\n  status: '',\r\n};\r\n\r\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\r\n  'basket/fetchBasketAsync',\r\n  async (_, thunkApi) => {\r\n    try {\r\n      return await agent.Basket.get();\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!getCookie('buyerId')) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const addItemToBasketAsync = createAsyncThunk<\r\n  Basket,\r\n  { productId: number; quantity?: number }\r\n>('basket/addItemToBasket', async ({ productId, quantity = 1 }, thunkApi) => {\r\n  try {\r\n    return await agent.Basket.addItem(productId, quantity);\r\n  } catch (error: any) {\r\n    return thunkApi.rejectWithValue({ error: error.data });\r\n  }\r\n});\r\n\r\nexport const removeItemFromBasket = createAsyncThunk<\r\n  Basket,\r\n  { productId: number; quantity: number; name?: string }\r\n>(\r\n  'basket/removeItemFromBasket',\r\n  async ({ productId, quantity = 1 }, thunkApi) => {\r\n    try {\r\n      return await agent.Basket.removeItem(productId, quantity);\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const basketSilice = createSlice({\r\n  name: 'basket',\r\n  initialState,\r\n  reducers: {\r\n    setBasket: (state, action) => {\r\n      state.basket = action.payload;\r\n    },\r\n    clearBasket: (state) => {\r\n      state.basket = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(addItemToBasketAsync.pending, (state, action) => {\r\n      const id = action.meta.arg.productId;\r\n      state.status = `pendingAddItem${id}`;\r\n    });\r\n\r\n    builder.addCase(removeItemFromBasket.pending, (state, action) => {\r\n      const { productId, name } = action.meta.arg;\r\n      state.status = `pendingRemoveItem${productId}${name}`;\r\n    });\r\n    builder.addCase(removeItemFromBasket.fulfilled, (state, action) => {\r\n      const { productId, quantity } = action.meta.arg;\r\n\r\n      const removedItemIndex = state.basket?.items.findIndex(\r\n        (item) => item.productId === productId\r\n      );\r\n\r\n      if (removedItemIndex === -1 || removedItemIndex === undefined) return;\r\n\r\n      state.basket!.items[removedItemIndex].quantity -= quantity;\r\n\r\n      if (state.basket!.items[removedItemIndex].quantity <= 0) {\r\n        state.basket?.items.splice(removedItemIndex, 1);\r\n      }\r\n\r\n      state.status = 'idle';\r\n    });\r\n    builder.addCase(removeItemFromBasket.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n      console.log(action.payload);\r\n    });\r\n\r\n    builder.addMatcher(\r\n      isAnyOf(addItemToBasketAsync.fulfilled, fetchBasketAsync.fulfilled),\r\n      (state, action) => {\r\n        state.basket = action.payload;\r\n        state.status = 'idle';\r\n      }\r\n    );\r\n    builder.addMatcher(\r\n      isAnyOf(addItemToBasketAsync.rejected, fetchBasketAsync.rejected),\r\n      (state, action) => {\r\n        state.status = 'idle';\r\n        console.log(action.payload);\r\n      }\r\n    );\r\n  },\r\n});\r\n\r\nexport const { setBasket, clearBasket } = basketSilice.actions;\r\n","import { createAsyncThunk, createSlice, isAnyOf } from '@reduxjs/toolkit';\r\nimport { FieldValues } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { history } from '../..';\r\nimport agent from '../../app/api/agent';\r\nimport { User } from '../../app/models/User';\r\nimport { setBasket } from '../basket/basketSlice';\r\n\r\ninterface AccountState {\r\n  user: User | null;\r\n}\r\n\r\nconst initialState: AccountState = {\r\n  user: null,\r\n};\r\n\r\nexport const signInAsync = createAsyncThunk<User, FieldValues>(\r\n  'account/signin',\r\n  async (data, thunkApi) => {\r\n    try {\r\n      const userDto = await agent.Account.login(data);\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkApi.dispatch(setBasket(basket));\r\n\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      return user;\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchCurrentUserAsync = createAsyncThunk<User>(\r\n  'account/fetchCurrentUser',\r\n  async (_, thunkApi) => {\r\n    thunkApi.dispatch(setUser(JSON.parse(localStorage.getItem('user')!)));\r\n    try {\r\n      const userDto = await agent.Account.getCurrentUser();\r\n      const { basket, ...user } = userDto;\r\n      if (basket) thunkApi.dispatch(setBasket(basket));\r\n\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      return user;\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  },\r\n  {\r\n    condition: () => {\r\n      if (!localStorage.getItem('user')) return false;\r\n    },\r\n  }\r\n);\r\n\r\nexport const accountSlice = createSlice({\r\n  name: 'account',\r\n  initialState,\r\n  reducers: {\r\n    signOut: (state) => {\r\n      state.user = null;\r\n      localStorage.removeItem('user');\r\n      history.push('/login');\r\n    },\r\n    setUser: (state, action) => {\r\n      state.user = action.payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchCurrentUserAsync.rejected, (state, action) => {\r\n      state.user = null;\r\n      localStorage.removeItem('user');\r\n      toast.error('Session expired - please login again');\r\n      history.push('/');\r\n    });\r\n\r\n    builder.addCase(signInAsync.rejected, (state, action) => {\r\n      throw action.payload;\r\n    });\r\n\r\n    builder.addMatcher(\r\n      isAnyOf(signInAsync.fulfilled, fetchCurrentUserAsync.fulfilled),\r\n      (state, action) => {\r\n        state.user = action.payload;\r\n      }\r\n    );\r\n  },\r\n});\r\n\r\nexport const { signOut, setUser } = accountSlice.actions;\r\n","import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from '@reduxjs/toolkit';\r\nimport agent from '../../app/api/agent';\r\nimport { MetaData } from '../../app/models/Pagination';\r\nimport { Product, ProductParams } from '../../app/models/Product';\r\nimport { RootState } from '../../app/store/configureStore';\r\n\r\ninterface CatalogState {\r\n  productsLoaded: boolean;\r\n  filtersLoaded: boolean;\r\n  status: string;\r\n  brands: string[];\r\n  types: string[];\r\n  productParams: ProductParams;\r\n  metaData: MetaData | null;\r\n}\r\n\r\nconst productsAdapter = createEntityAdapter<Product>();\r\n\r\nconst getAxiosParams = (urlSearhParams: ProductParams) => {\r\n  const params = new URLSearchParams();\r\n  params.append('pageNumber', urlSearhParams.pageNumber.toString());\r\n  params.append('pageSize', urlSearhParams.pageSize.toString());\r\n  params.append('orderBy', urlSearhParams.orderBy);\r\n  if (urlSearhParams.searchTerm)\r\n    params.append('searchTerm', urlSearhParams.searchTerm);\r\n  if (urlSearhParams.brands.length > 0) {\r\n    params.append('brands', urlSearhParams.brands.toString());\r\n  }\r\n  if (urlSearhParams.types.length > 0) {\r\n    params.append('types', urlSearhParams.types.toString());\r\n  }\r\n  return params;\r\n};\r\n\r\nexport const fetchProductListAsync = createAsyncThunk<\r\n  Product[],\r\n  void,\r\n  { state: RootState }\r\n>('catalog/fetchProductList', async (_, thunkApi) => {\r\n  const params = getAxiosParams(thunkApi.getState().catalog.productParams);\r\n  try {\r\n    const response = await agent.Catalog.list(params);\r\n    thunkApi.dispatch(setMetaData(response.metaData));\r\n\r\n    return response.items;\r\n  } catch (error: any) {\r\n    return thunkApi.rejectWithValue({ error: error.data });\r\n  }\r\n});\r\n\r\nexport const fetchProductAsync = createAsyncThunk<Product, number>(\r\n  'catalog/fetchProduct',\r\n  async (productId, thunkApi) => {\r\n    try {\r\n      return await agent.Catalog.detail(productId);\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error });\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchFiltersAsync = createAsyncThunk(\r\n  'catalog/fetchFilters',\r\n  async (_, thunkApi) => {\r\n    try {\r\n      return await agent.Catalog.filters();\r\n    } catch (error: any) {\r\n      return thunkApi.rejectWithValue({ error: error.data });\r\n    }\r\n  }\r\n);\r\n\r\nconst initParams = () => ({\r\n  orderBy: 'name',\r\n  pageNumber: 1,\r\n  pageSize: 6,\r\n  brands: [],\r\n  types: [],\r\n});\r\n\r\nexport const catalogSlice = createSlice({\r\n  name: 'catalog',\r\n  initialState: productsAdapter.getInitialState<CatalogState>({\r\n    productsLoaded: false,\r\n    filtersLoaded: false,\r\n    status: '',\r\n    brands: [],\r\n    types: [],\r\n    productParams: initParams(),\r\n    metaData: null,\r\n  }),\r\n  reducers: {\r\n    setProductParams: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = {\r\n        ...state.productParams,\r\n        ...action.payload,\r\n        pageNumber: 1,\r\n      };\r\n    },\r\n    setPageNumber: (state, action) => {\r\n      state.productsLoaded = false;\r\n      state.productParams = { ...state.productParams, ...action.payload };\r\n    },\r\n    resetProductParams: (state) => {\r\n      state.productParams = initParams();\r\n    },\r\n    setMetaData: (state, action) => {\r\n      state.metaData = action.payload;\r\n      // state.productsLoaded = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchProductListAsync.pending, (state) => {\r\n      state.status = 'pendingFetchProductList';\r\n    });\r\n    builder.addCase(fetchProductListAsync.fulfilled, (state, action) => {\r\n      productsAdapter.setAll(state, action.payload);\r\n      state.productsLoaded = true;\r\n      state.status = 'idle';\r\n    });\r\n    builder.addCase(fetchProductListAsync.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n      console.log(action.payload);\r\n    });\r\n    builder.addCase(fetchProductAsync.pending, (state, action) => {\r\n      state.status = 'pendingFetchProduct';\r\n    });\r\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\r\n      productsAdapter.upsertOne(state, action.payload);\r\n      state.status = 'idle';\r\n    });\r\n    builder.addCase(fetchProductAsync.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n      console.log(action.payload);\r\n    });\r\n    // fetch filter\r\n    builder.addCase(fetchFiltersAsync.pending, (state) => {\r\n      state.status = 'pendingFetchFiters';\r\n    });\r\n    builder.addCase(fetchFiltersAsync.fulfilled, (state, action) => {\r\n      state.status = 'idle';\r\n      state.filtersLoaded = true;\r\n      state.brands = action.payload.brands;\r\n      state.types = action.payload.types;\r\n    });\r\n    builder.addCase(fetchFiltersAsync.rejected, (state, action) => {\r\n      state.status = 'idle';\r\n    });\r\n  },\r\n});\r\n\r\nexport const productsSelector = productsAdapter.getSelectors<RootState>(\r\n  (state) => state.catalog\r\n);\r\n\r\nexport const {\r\n  setProductParams,\r\n  resetProductParams,\r\n  setMetaData,\r\n  setPageNumber,\r\n} = catalogSlice.actions;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { accountSlice } from '../../features/account/accountSlice';\r\nimport { basketSilice } from '../../features/basket/basketSlice';\r\nimport { catalogSlice } from '../../features/catalog/catalogSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    basket: basketSilice.reducer,\r\n    catalog: catalogSlice.reducer,\r\n    account: accountSlice.reducer,\r\n  },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import axios, { AxiosError, AxiosResponse } from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport { history } from '../..';\r\nimport { PaginatedList } from '../models/Pagination';\r\nimport { store } from '../store/configureStore';\r\n\r\nconst sleep = () => new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\naxios.defaults.withCredentials = true;\r\n\r\nconst requestBody = (response: AxiosResponse) => response.data;\r\n\r\naxios.interceptors.request.use((config) => {\r\n  const token = store.getState().account.user?.token;\r\n  if (token) config.headers!.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n  async (response: AxiosResponse) => {\r\n    if (process.env.NODE_ENV === 'development') await sleep();\r\n    const pagination = response.headers['pagination'];\r\n    if (pagination) {\r\n      response.data = new PaginatedList(response.data, JSON.parse(pagination));\r\n      return response;\r\n    }\r\n    return response;\r\n  },\r\n  (error: AxiosError) => {\r\n    const { data, status } = error.response!;\r\n    switch (status) {\r\n      case 400:\r\n        if (data.errors) {\r\n          const modalStateErrors: string[] = [];\r\n          for (const key in data.errors) {\r\n            if (data.errors[key]) {\r\n              modalStateErrors.push(data.errors[key]);\r\n            }\r\n          }\r\n\r\n          throw modalStateErrors.flat();\r\n        }\r\n        toast.error(data.title);\r\n        break;\r\n      case 401:\r\n        toast.error(data.title);\r\n        break;\r\n      case 404:\r\n        toast.error(data.title);\r\n        break;\r\n      case 500:\r\n        history.push({\r\n          pathname: '/server-error',\r\n          state: { error: data },\r\n        });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n    return Promise.reject(error.response);\r\n  }\r\n);\r\n\r\nconst request = {\r\n  get: (url: string, params?: URLSearchParams) =>\r\n    axios.get(url, { params }).then(requestBody),\r\n  post: (url: string, body: {}) => axios.post(url, body).then(requestBody),\r\n  put: (url: string, body: {}) => axios.put(url, body).then(requestBody),\r\n  delete: (url: string) => axios.delete(url).then(requestBody),\r\n};\r\n\r\nconst Catalog = {\r\n  list: (params: URLSearchParams) => request.get('products', params),\r\n  detail: (id: number) => request.get(`products/${id}`),\r\n  filters: () => request.get('products/filters'),\r\n};\r\n\r\nconst TestError = {\r\n  get400Error: () => request.get('buggy/bad-request'),\r\n  get401Error: () => request.get('buggy/unauthorise'),\r\n  get404Error: () => request.get('buggy/not-found'),\r\n  get500Error: () => request.get('buggy/server-error'),\r\n  getValidationError: () => request.get('buggy/validation-error'),\r\n};\r\n\r\nconst Basket = {\r\n  get: () => request.get('basket'),\r\n  addItem: (productId: number, quantity: number = 1) =>\r\n    request.post(`basket?productId=${productId}&quantity=${quantity}`, {}),\r\n  removeItem: (productId: number, quantity: number = 1) =>\r\n    request.delete(`basket?productId=${productId}&quantity=${quantity}`),\r\n};\r\n\r\nconst Account = {\r\n  login: (value: any) => request.post('/account/login', value),\r\n  register: (value: any) => request.post('/account/register', value),\r\n  getCurrentUser: () => request.get('/account/currentUser'),\r\n  getUserAddress: () => request.get('/account/getUserAddress'),\r\n};\r\n\r\nconst Orders = {\r\n  list: () => request.get('/orders'),\r\n  fetch: (id: number) => request.get(`/orders/${id}`),\r\n  create: (values: any) => request.post('/orders', values),\r\n};\r\n\r\nconst agent = {\r\n  Catalog,\r\n  TestError,\r\n  Basket,\r\n  Account,\r\n  Orders,\r\n};\r\n\r\nexport default agent;\r\n","import {\r\n  Alert,\r\n  AlertTitle,\r\n  Button,\r\n  ButtonGroup,\r\n  Container,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { useState } from 'react';\r\nimport agent from '../../app/api/agent';\r\n\r\nconst AboutPage = () => {\r\n  const [validationErrors, setValidationErrors] = useState<string[]>([]);\r\n\r\n  const getValidationErrors = () => {\r\n    agent.TestError.getValidationError()\r\n      .then(() => console.log('should not see it'))\r\n      .catch((errors) => setValidationErrors(errors));\r\n  };\r\n  return (\r\n    <Container>\r\n      <Typography gutterBottom variant='h2'>\r\n        Errors for testing purposes\r\n      </Typography>\r\n      <ButtonGroup fullWidth>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get400Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 400 Error\r\n        </Button>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get401Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 401 Error\r\n        </Button>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get404Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 404 Error\r\n        </Button>\r\n        <Button\r\n          variant='contained'\r\n          onClick={() =>\r\n            agent.TestError.get500Error().catch((error) => console.log(error))\r\n          }\r\n        >\r\n          Test 500 Error\r\n        </Button>\r\n        <Button variant='contained' onClick={getValidationErrors}>\r\n          Test validation error\r\n        </Button>\r\n      </ButtonGroup>\r\n\r\n      {validationErrors.length > 0 && (\r\n        <Alert severity='error'>\r\n          <AlertTitle>Validation Errors</AlertTitle>\r\n          <List>\r\n            {validationErrors.map((error) => (\r\n              <ListItem key={error}>\r\n                <ListItemText>{error}</ListItemText>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        </Alert>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AboutPage;\r\n","import LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { Paper } from '@mui/material';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Box from '@mui/material/Box';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Container from '@mui/material/Container';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport * as React from 'react';\r\nimport { FieldValues, useForm } from 'react-hook-form';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useAppDispatch } from '../../app/store/configureStore';\r\nimport { signInAsync } from './accountSlice';\r\n\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const location = useLocation<any>();\r\n  const dispatch = useAppDispatch();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: 'all',\r\n  });\r\n\r\n  const formSubmit = async (data: FieldValues) => {\r\n    try {\r\n      await dispatch(signInAsync(data));\r\n      history.push(location.state?.from.pathname || '/catalog');\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth='xs'\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component='h1' variant='h5'>\r\n        Sign in\r\n      </Typography>\r\n      <Box\r\n        component='form'\r\n        onSubmit={handleSubmit(formSubmit)}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Username'\r\n          autoComplete='username'\r\n          autoFocus\r\n          {...register('username', { required: 'Username is requied' })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Password'\r\n          type='password'\r\n          autoComplete='current-password'\r\n          {...register('password', { required: 'Password is requied' })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n        <FormControlLabel\r\n          control={<Checkbox value='remember' color='primary' />}\r\n          label='Remember me'\r\n        />\r\n        <LoadingButton\r\n          disabled={!isValid}\r\n          loading={isSubmitting}\r\n          type='submit'\r\n          fullWidth\r\n          variant='contained'\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Sign In\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to='/login'>{\"Don't have an account? Sign Up\"}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { Paper } from '@mui/material';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Box from '@mui/material/Box';\r\nimport Container from '@mui/material/Container';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport * as React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport agent from '../../app/api/agent';\r\n\r\nexport default function Register() {\r\n  const history = useHistory();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    setError,\r\n    formState: { isSubmitting, errors, isValid },\r\n  } = useForm({\r\n    mode: 'all',\r\n  });\r\n\r\n  const handleErrors = (errors: any) => {\r\n    errors.forEach((error: string) => {\r\n      if (error.includes('Email')) setError('email', { message: error });\r\n      if (error.includes('Username')) setError('username', { message: error });\r\n      if (error.includes('Password')) setError('password', { message: error });\r\n    });\r\n  };\r\n  return (\r\n    <Container\r\n      component={Paper}\r\n      maxWidth='xs'\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        p: 4,\r\n      }}\r\n    >\r\n      <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n        <LockOutlinedIcon />\r\n      </Avatar>\r\n      <Typography component='h1' variant='h5'>\r\n        Sign up\r\n      </Typography>\r\n      <Box\r\n        component='form'\r\n        onSubmit={handleSubmit((data) =>\r\n          agent.Account.register(data)\r\n            .then(() => {\r\n              toast.success('Registration successful - you can loggin now');\r\n              setTimeout(() => history.push('/login'), 3000);\r\n            })\r\n            .catch((errors) => handleErrors(errors))\r\n        )}\r\n        noValidate\r\n        sx={{ mt: 1 }}\r\n      >\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Username'\r\n          autoComplete='username'\r\n          autoFocus\r\n          {...register('username', {\r\n            required: 'Username is requied',\r\n          })}\r\n          error={!!errors.username}\r\n          helperText={errors?.username?.message}\r\n        />\r\n\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Email'\r\n          autoComplete='email'\r\n          {...register('email', {\r\n            required: 'Username is requied',\r\n            pattern: {\r\n              value: /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/,\r\n              message: 'Not a valid email',\r\n            },\r\n          })}\r\n          error={!!errors.email}\r\n          helperText={errors?.email?.message}\r\n        />\r\n\r\n        <TextField\r\n          margin='normal'\r\n          fullWidth\r\n          label='Password'\r\n          type='password'\r\n          autoComplete='current-password'\r\n          {...register('password', {\r\n            required: 'Password is requied',\r\n            pattern: {\r\n              value:\r\n                /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\r\n              message: 'Password does not meet complexity requiments',\r\n            },\r\n          })}\r\n          error={!!errors.password}\r\n          helperText={errors?.password?.message}\r\n        />\r\n\r\n        <LoadingButton\r\n          disabled={!isValid}\r\n          loading={isSubmitting}\r\n          type='submit'\r\n          fullWidth\r\n          variant='contained'\r\n          sx={{ mt: 3, mb: 2 }}\r\n        >\r\n          Register\r\n        </LoadingButton>\r\n        <Grid container>\r\n          <Grid item>\r\n            <Link to='/login'>{'Already have an account? Sign in'}</Link>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n} from '@mui/material';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport { currencyFormat } from '../../app/uti/utilities';\r\n\r\ninterface Props {\r\n  subtotal?: number;\r\n}\r\n\r\nexport default function BasketSummary({ subtotal }: Props) {\r\n  const DELIVERY_FEE = 500;\r\n  const BORDER_FEE = 10000;\r\n\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  if (subtotal === undefined) {\r\n    subtotal =\r\n      basket?.items.reduce(\r\n        (sum, item) => (sum += item.price * item.quantity),\r\n        0\r\n      ) || 0;\r\n  }\r\n  const deliveryFee = subtotal >= BORDER_FEE ? 0 : DELIVERY_FEE;\r\n  const total = subtotal + deliveryFee;\r\n\r\n  return (\r\n    <>\r\n      <TableContainer component={Paper} variant={'outlined'}>\r\n        <Table>\r\n          <TableBody>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Subtotal</TableCell>\r\n              <TableCell align='right'>{currencyFormat(subtotal)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Delivery fee*</TableCell>\r\n              <TableCell align='right'>{currencyFormat(deliveryFee)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell colSpan={2}>Total</TableCell>\r\n              <TableCell align='right'>{currencyFormat(total)}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>\r\n                <span style={{ fontStyle: 'italic' }}>\r\n                  *Orders over $100 qualify for free delivery\r\n                </span>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </>\r\n  );\r\n}\r\n","import { Remove, Add, Delete } from '@mui/icons-material';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n} from '@mui/material';\r\nimport { BasketItem } from '../../app/models/Basket';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { removeItemFromBasket, addItemToBasketAsync } from './basketSlice';\r\n\r\ninterface Props {\r\n  items: BasketItem[];\r\n  isBasket?: boolean;\r\n}\r\n\r\nconst BasketTable = ({ items, isBasket = true }: Props) => {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label='simple table'>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Name</TableCell>\r\n            <TableCell align='right'>Price</TableCell>\r\n            <TableCell align='right'>Quantity</TableCell>\r\n            <TableCell align='right'>SubTotal</TableCell>\r\n            {isBasket && <TableCell align='right'></TableCell>}\r\n          </TableRow>\r\n        </TableHead>\r\n\r\n        <TableBody>\r\n          {items.map((item) => (\r\n            <TableRow\r\n              key={item.productId}\r\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n            >\r\n              <TableCell component='th' scope='row'>\r\n                {item.name}\r\n              </TableCell>\r\n\r\n              <TableCell align='right'>\r\n                ${(item.price / 100).toFixed(2)}\r\n              </TableCell>\r\n\r\n              <TableCell align='right'>\r\n                {isBasket && (\r\n                  <LoadingButton\r\n                    loading={status.includes(\r\n                      `pendingRemoveItem${item.productId}rem`\r\n                    )}\r\n                    color='error'\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        removeItemFromBasket({\r\n                          productId: item.productId,\r\n                          quantity: 1,\r\n                          name: 'rem',\r\n                        })\r\n                      )\r\n                    }\r\n                  >\r\n                    <Remove />\r\n                  </LoadingButton>\r\n                )}\r\n\r\n                {item.quantity}\r\n\r\n                {isBasket && (\r\n                  <LoadingButton\r\n                    loading={status.includes(`pendingAddItem${item.productId}`)}\r\n                    color='secondary'\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        addItemToBasketAsync({\r\n                          productId: item.productId,\r\n                        })\r\n                      )\r\n                    }\r\n                  >\r\n                    <Add />\r\n                  </LoadingButton>\r\n                )}\r\n              </TableCell>\r\n\r\n              <TableCell align='right'>\r\n                ${((item.price / 100) * item.quantity).toFixed(2)}\r\n              </TableCell>\r\n\r\n              {isBasket && (\r\n                <TableCell align='right'>\r\n                  <LoadingButton\r\n                    color='error'\r\n                    loading={status.includes(\r\n                      `pendingRemoveItem${item.productId}del`\r\n                    )}\r\n                    onClick={() =>\r\n                      dispatch(\r\n                        removeItemFromBasket({\r\n                          productId: item.productId,\r\n                          quantity: item.quantity,\r\n                          name: 'del',\r\n                        })\r\n                      )\r\n                    }\r\n                  >\r\n                    <Delete></Delete>\r\n                  </LoadingButton>\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default BasketTable;\r\n","import { Button, Grid, Typography } from '@mui/material';\r\nimport { Fragment } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport BasketSummary from './BasketSummary';\r\nimport BasketTable from './BasketTable';\r\n\r\nconst BasketPage = () => {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  // if (status) return <LoadingComponent message='basket loading...' />;\r\n\r\n  if (!basket)\r\n    return <Typography variant='h3'>Your basket is empty</Typography>;\r\n\r\n  return (\r\n    <Fragment>\r\n      <BasketTable items={basket.items} />\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary />\r\n          <Button\r\n            component={Link}\r\n            to='/checkout'\r\n            variant='contained'\r\n            fullWidth\r\n            size='large'\r\n          >\r\n            Check out\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default BasketPage;\r\n","import { FormGroup, FormControlLabel, Checkbox } from '@mui/material';\r\nimport { useState } from 'react';\r\n\r\ninterface Props {\r\n  items: string[];\r\n  checked?: string[];\r\n  onChange: (items: string[]) => void;\r\n}\r\n\r\nconst CheckboxButtons = ({ items, checked, onChange }: Props) => {\r\n  const [checkedItems, setCheckedItems] = useState(checked || []);\r\n\r\n  const handleChecked = (value: string) => {\r\n    const currentIndex = checkedItems.findIndex((i) => i === value);\r\n    let newChecked: string[] = [];\r\n    if (currentIndex >= 0) newChecked = checkedItems.filter((i) => i !== value);\r\n    else newChecked = [...checkedItems, value];\r\n    setCheckedItems(newChecked);\r\n\r\n    onChange(newChecked);\r\n  };\r\n\r\n  return (\r\n    <FormGroup>\r\n      {items.map((item) => (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={checkedItems.includes(item)}\r\n              onClick={() => handleChecked(item)}\r\n            />\r\n          }\r\n          label={item}\r\n          key={item}\r\n        />\r\n      ))}\r\n    </FormGroup>\r\n  );\r\n};\r\n\r\nexport default CheckboxButtons;\r\n","import { Box, Typography, Pagination } from '@mui/material';\r\nimport { MetaData } from '../models/Pagination';\r\n\r\ninterface Props {\r\n  metaData: MetaData;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nconst PaginationApp = ({ metaData, onPageChange }: Props) => {\r\n  const { totalCount, totalPages, currentPage, pageSize } = metaData;\r\n  return (\r\n    <Box display='flex' justifyContent='space-between' alignItems='center'>\r\n      <Typography>\r\n        Displaying {(currentPage - 1) * pageSize + 1}-\r\n        {currentPage * pageSize > totalCount\r\n          ? totalCount\r\n          : currentPage * pageSize}{' '}\r\n        of {totalCount} items\r\n      </Typography>\r\n      <Pagination\r\n        count={totalPages}\r\n        page={currentPage}\r\n        color='secondary'\r\n        size='large'\r\n        onChange={(e, page) => onPageChange(page)}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default PaginationApp;\r\n","import {\r\n  FormControl,\r\n  FormLabel,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n} from '@mui/material';\r\n\r\ninterface Props {\r\n  options: any[];\r\n  selectedValue: string;\r\n  onChange: (event: any) => void;\r\n}\r\n\r\nconst RadioButtonGroup = ({ options, selectedValue, onChange }: Props) => {\r\n  return (\r\n    <FormControl>\r\n      <FormLabel id='demo-radio-buttons-group-label'></FormLabel>\r\n      <RadioGroup value={selectedValue} onChange={onChange}>\r\n        {options.map(({ value, label }) => (\r\n          <FormControlLabel\r\n            value={value}\r\n            control={<Radio />}\r\n            label={label}\r\n            key={value}\r\n          />\r\n        ))}\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default RadioButtonGroup;\r\n","import { Backdrop, Box, CircularProgress, Typography } from '@mui/material';\r\n\r\ninterface Props {\r\n  message?: string;\r\n}\r\n\r\nconst LoadingComponent = ({ message = 'Loading...' }: Props) => {\r\n  return (\r\n    <Backdrop open={true} invisible={true}>\r\n      <Box\r\n        display='flex'\r\n        justifyContent='center'\r\n        alignItems='center'\r\n        height='100vh'\r\n      >\r\n        <CircularProgress size={100} color='secondary' />\r\n        <Typography variant='h4' sx={{ position: 'fixed', top: '60%' }}>\r\n          {message}\r\n        </Typography>\r\n      </Box>\r\n    </Backdrop>\r\n  );\r\n};\r\nexport default LoadingComponent;\r\n","import {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  Grid,\r\n  Skeleton,\r\n} from '@mui/material';\r\n\r\nexport default function ProductCardSkeleton() {\r\n  return (\r\n    <Grid item xs component={Card}>\r\n      <CardHeader\r\n        avatar={\r\n          <Skeleton\r\n            animation='wave'\r\n            variant='circular'\r\n            width={40}\r\n            height={40}\r\n          />\r\n        }\r\n        title={\r\n          <Skeleton\r\n            animation='wave'\r\n            height={10}\r\n            width='80%'\r\n            style={{ marginBottom: 6 }}\r\n          />\r\n        }\r\n      />\r\n      <Skeleton sx={{ height: 190 }} animation='wave' variant='rectangular' />\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation='wave' height={10} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation='wave' height={10} width='80%' />\r\n        </>\r\n      </CardContent>\r\n      <CardActions>\r\n        <>\r\n          <Skeleton animation='wave' height={10} width='40%' />\r\n          <Skeleton animation='wave' height={10} width='20%' />\r\n        </>\r\n      </CardActions>\r\n    </Grid>\r\n  );\r\n}\r\n","import { LoadingButton } from '@mui/lab';\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  CardMedia,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\nimport { Product } from '../../app/models/Product';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { addItemToBasketAsync } from '../basket/basketSlice';\r\n\r\ninterface Props {\r\n  product: Product;\r\n}\r\n\r\nconst ProductItem = ({ product }: Props) => {\r\n  const { status } = useAppSelector((state) => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <Card sx={{ maxWidth: 345 }}>\r\n      <CardHeader\r\n        avatar={\r\n          <Avatar sx={{ bgcolor: 'secondary.main' }}>\r\n            {product.name.charAt(0).toUpperCase()}\r\n          </Avatar>\r\n        }\r\n        title={product.name}\r\n        titleTypographyProps={{\r\n          fontWeight: 'bold',\r\n          color: 'primary.main',\r\n        }}\r\n      />\r\n      <CardMedia\r\n        component='img'\r\n        height='140'\r\n        image={product.pictureUrl}\r\n        alt={product.name}\r\n        sx={{ objectFit: 'contain', bgcolor: 'primary.light' }}\r\n      />\r\n      <CardContent>\r\n        <Typography gutterBottom variant='h5' component='div'>\r\n          ${(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n        <Typography variant='body2' color='text.secondary'>\r\n          {product.brand} / {product.type}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <LoadingButton\r\n          loading={status === `pendingAddItem${product.id}`}\r\n          size='small'\r\n          onClick={() =>\r\n            dispatch(addItemToBasketAsync({ productId: product.id }))\r\n          }\r\n        >\r\n          Add to cart\r\n        </LoadingButton>\r\n        <Button size='small' component={Link} to={`/catalog/${product.id}`}>\r\n          View\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ProductItem;\r\n","import { Grid } from '@mui/material';\r\nimport { Product } from '../../app/models/Product';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport ProductCardSkeleton from './ProductCardSkeleton';\r\nimport ProductItem from './ProductItem';\r\n\r\ninterface Props {\r\n  products: Product[];\r\n}\r\n\r\nconst ProductList = ({ products }: Props) => {\r\n  const { productsLoaded } = useAppSelector((state) => state.catalog);\r\n  return (\r\n    <Grid container spacing={4}>\r\n      {products.map((product) => (\r\n        <Grid item xs={4} key={product.id}>\r\n          {!productsLoaded ? (\r\n            <ProductCardSkeleton key={product.id} />\r\n          ) : (\r\n            <ProductItem product={product} />\r\n          )}\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n","import { debounce, TextField } from '@mui/material';\r\nimport { useState } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport { setProductParams } from './catalogSlice';\r\n\r\nconst ProductSearch = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { productParams } = useAppSelector((state) => state.catalog);\r\n  const [searchTerm, setSearchTerm] = useState(productParams.searchTerm || '');\r\n\r\n  const debounceSearch = debounce((event) => {\r\n    dispatch(setProductParams({ searchTerm: event.target.value }));\r\n  }, 500);\r\n\r\n  return (\r\n    <TextField\r\n      label='Search product'\r\n      variant='outlined'\r\n      fullWidth\r\n      value={searchTerm}\r\n      onChange={(event) => {\r\n        setSearchTerm(event.target.value);\r\n        debounceSearch(event);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProductSearch;\r\n","import { Grid, Paper } from '@mui/material';\r\nimport { useEffect } from 'react';\r\nimport CheckboxButtons from '../../app/components/CheckboxButtons';\r\nimport PaginationApp from '../../app/components/PaginationApp';\r\nimport RadioButtonGroup from '../../app/components/RadioButtonGroup';\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport {\r\n  fetchFiltersAsync,\r\n  fetchProductListAsync,\r\n  productsSelector,\r\n  setPageNumber,\r\n  setProductParams,\r\n} from './catalogSlice';\r\nimport ProductList from './ProductList';\r\nimport ProductSearch from './ProductSearch';\r\n\r\nconst sortOptions = [\r\n  { value: 'name', label: 'Alphabetical' },\r\n  { value: 'priceDesc', label: 'Price - High to low' },\r\n  { value: 'price', label: 'Price - Low to high' },\r\n];\r\n\r\nconst Catalog = () => {\r\n  const dispatch = useAppDispatch();\r\n  const productList = useAppSelector(productsSelector.selectAll);\r\n  const {\r\n    productsLoaded,\r\n    filtersLoaded,\r\n    brands,\r\n    types,\r\n    productParams,\r\n    metaData,\r\n  } = useAppSelector((state) => state.catalog);\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductListAsync());\r\n  }, [productsLoaded, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!filtersLoaded) dispatch(fetchFiltersAsync());\r\n  }, [dispatch, filtersLoaded]);\r\n\r\n  if (!filtersLoaded) return <LoadingComponent message='Loading products...' />;\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item xs={3}>\r\n        <Paper sx={{ mb: 2 }}>\r\n          <ProductSearch />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <RadioButtonGroup\r\n            selectedValue={productParams.orderBy}\r\n            options={sortOptions}\r\n            onChange={(event) => {\r\n              dispatch(setProductParams({ orderBy: event.target.value }));\r\n            }}\r\n          />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckboxButtons\r\n            items={brands}\r\n            checked={productParams.brands}\r\n            onChange={(items: string[]) => {\r\n              dispatch(setProductParams({ brands: items }));\r\n            }}\r\n          />\r\n        </Paper>\r\n\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <CheckboxButtons\r\n            items={types}\r\n            checked={productParams.types}\r\n            onChange={(items: string[]) => {\r\n              dispatch(setProductParams({ types: items }));\r\n            }}\r\n          />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={9}>\r\n        <ProductList products={productList} />\r\n      </Grid>\r\n\r\n      <Grid item xs={3} />\r\n      <Grid item xs={9}>\r\n        {metaData && (\r\n          <PaginationApp\r\n            metaData={metaData}\r\n            onPageChange={(page) =>\r\n              dispatch(setPageNumber({ pageNumber: page }))\r\n            }\r\n          />\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Catalog;\r\n","import { LoadingButton } from '@mui/lab';\r\nimport {\r\n  Divider,\r\n  Grid,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableRow,\r\n  TextField,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { useAppDispatch, useAppSelector } from '../../app/store/configureStore';\r\nimport {\r\n  addItemToBasketAsync,\r\n  removeItemFromBasket,\r\n} from '../basket/basketSlice';\r\nimport { fetchProductAsync, productsSelector } from './catalogSlice';\r\n\r\nconst ProductDetail = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { id } = useParams<{ id: string }>();\r\n  const product = useAppSelector((state) =>\r\n    productsSelector.selectById(state, id)\r\n  );\r\n\r\n  console.log(product);\r\n  const { status: productStatus } = useAppSelector((state) => state.catalog);\r\n\r\n  const { basket, status } = useAppSelector((state) => state.basket);\r\n  const [quantity, setQuantity] = useState<number>(1);\r\n  const itemInBasket = basket?.items.find((i) => i.productId === product?.id);\r\n\r\n  useEffect(() => {\r\n    if (!product) dispatch(fetchProductAsync(parseInt(id)));\r\n    if (itemInBasket) setQuantity(itemInBasket.quantity);\r\n  }, [id, itemInBasket, product, dispatch]);\r\n\r\n  const handleChangeQuantity = (e: any) => {\r\n    if (parseInt(e.target.value) >= 0) setQuantity(parseInt(e.target.value));\r\n  };\r\n\r\n  const handleUpdateCart = () => {\r\n    if (!itemInBasket || quantity > itemInBasket?.quantity) {\r\n      const updatedQuantity = itemInBasket\r\n        ? quantity - itemInBasket.quantity\r\n        : quantity;\r\n      dispatch(\r\n        addItemToBasketAsync({\r\n          productId: product?.id!,\r\n          quantity: updatedQuantity,\r\n        })\r\n      );\r\n    } else {\r\n      const updatedQuantity = itemInBasket.quantity - quantity;\r\n      dispatch(\r\n        removeItemFromBasket({\r\n          productId: product?.id!,\r\n          quantity: updatedQuantity,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  if (productStatus.includes('pending'))\r\n    return <LoadingComponent message='Loading product...' />;\r\n\r\n  if (!product) return <Typography variant='h2'>Product not found</Typography>;\r\n  return (\r\n    <>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={6}>\r\n          <img\r\n            src={product.pictureUrl}\r\n            alt={product.name}\r\n            style={{ width: '100%' }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Typography variant='h3'>{product.name}</Typography>\r\n          <Divider sx={{ mb: 2 }} />\r\n          <Typography variant='h4' color='secondary'>\r\n            ${(product.price / 100).toFixed(2)}\r\n          </Typography>\r\n          <TableContainer>\r\n            <Table>\r\n              <TableBody>\r\n                <TableRow>\r\n                  <TableCell>Name</TableCell>\r\n                  <TableCell>{product.name}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Description</TableCell>\r\n                  <TableCell>{product.description}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Type</TableCell>\r\n                  <TableCell>{product.type}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Brand</TableCell>\r\n                  <TableCell>{product.brand}</TableCell>\r\n                </TableRow>\r\n                <TableRow>\r\n                  <TableCell>Quantity in stock</TableCell>\r\n                  <TableCell>{product.quantityInStock}</TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                variant='outlined'\r\n                type='number'\r\n                label='Quantity in cart'\r\n                fullWidth\r\n                value={quantity}\r\n                onChange={handleChangeQuantity}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <LoadingButton\r\n                loading={status.includes('pending')}\r\n                sx={{ height: '55px' }}\r\n                color='primary'\r\n                size='large'\r\n                variant='contained'\r\n                fullWidth\r\n                onClick={handleUpdateCart}\r\n                disabled={\r\n                  (quantity === 0 && !itemInBasket) ||\r\n                  quantity === itemInBasket?.quantity\r\n                }\r\n              >\r\n                {itemInBasket ? 'Update quantity' : 'Add to cart'}\r\n              </LoadingButton>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n","import { Checkbox, FormControlLabel } from '@mui/material';\r\nimport { useController, UseControllerProps } from 'react-hook-form';\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst AppCheckbox = (props: Props) => {\r\n  const { field } = useController({ ...props, defaultValue: false });\r\n  return (\r\n    <FormControlLabel\r\n      disabled={props.disabled || false}\r\n      control={<Checkbox {...field} checked={field.value} color='secondary' />}\r\n      label={props.label}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AppCheckbox;\r\n","import { TextField } from '@mui/material';\r\nimport { useController, UseControllerProps } from 'react-hook-form';\r\n\r\ninterface Props extends UseControllerProps {\r\n  label: string;\r\n}\r\n\r\nconst AppTextInput = (props: Props) => {\r\n  const { fieldState, field } = useController({ ...props, defaultValue: '' });\r\n\r\n  return (\r\n    <TextField\r\n      {...props}\r\n      {...field}\r\n      fullWidth\r\n      variant='outlined'\r\n      error={!!fieldState.error}\r\n      helperText={fieldState.error?.message}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AppTextInput;\r\n","import { Grid, Typography } from '@mui/material';\r\nimport { useFormContext } from 'react-hook-form';\r\nimport AppCheckbox from '../../app/components/AppCheckbox';\r\nimport AppTextInput from '../../app/components/AppTextInput';\r\n\r\nexport default function AddressForm() {\r\n  const { control, formState } = useFormContext();\r\n  return (\r\n    <>\r\n      <Typography variant='h6' gutterBottom>\r\n        Shipping address\r\n      </Typography>\r\n\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name='fullName' label='Full name' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name='address1' label='Address 1' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <AppTextInput control={control} name='address2' label='Address 2' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='city' label='City' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='state' label='State' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='zip' label='Zip' />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <AppTextInput control={control} name='country' label='Country' />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <AppCheckbox\r\n            disabled={!formState.isDirty}\r\n            control={control}\r\n            name='saveAddress'\r\n            label='Save it as the default address'\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  Typography,\r\n  Grid,\r\n  TextField,\r\n  FormControlLabel,\r\n  Checkbox,\r\n} from '@mui/material';\r\nimport { useFormContext } from 'react-hook-form';\r\nimport AppTextInput from '../../app/components/AppTextInput';\r\n\r\nexport default function PaymentForm() {\r\n  const { control } = useFormContext();\r\n  return (\r\n    <>\r\n      <Typography variant='h6' gutterBottom>\r\n        Payment method\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={6}>\r\n          <AppTextInput\r\n            control={control}\r\n            name='nameOnCard'\r\n            label='Name on card'\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            id='cardNumber'\r\n            label='Card number'\r\n            fullWidth\r\n            autoComplete='cc-number'\r\n            variant='standard'\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            id='expDate'\r\n            label='Expiry date'\r\n            fullWidth\r\n            autoComplete='cc-exp'\r\n            variant='standard'\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            id='cvv'\r\n            label='CVV'\r\n            helperText='Last three digits on signature strip'\r\n            fullWidth\r\n            autoComplete='cc-csc'\r\n            variant='standard'\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <FormControlLabel\r\n            control={<Checkbox color='secondary' name='saveCard' value='yes' />}\r\n            label='Remember credit card details for next time'\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { Grid } from '@mui/material';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport BasketSummary from '../basket/BasketSummary';\r\nimport BasketTable from '../basket/BasketTable';\r\n\r\nexport default function Review() {\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n\r\n  return (\r\n    <>\r\n      {basket && <BasketTable items={basket.items} isBasket={false} />}\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import * as yup from 'yup';\r\n\r\nexport const validationSchema = [\r\n  yup.object({\r\n    fullName: yup.string().required('Fulname is required'),\r\n    address1: yup.string().required('Address 1 is required'),\r\n    address2: yup.string().required(),\r\n    city: yup.string().required('City is required'),\r\n    state: yup.string().required('State is required'),\r\n    zip: yup.string().required('Zip is required'),\r\n    country: yup.string().required('Country is required'),\r\n  }),\r\n  yup.object({}),\r\n  yup.object({\r\n    nameOnCard: yup.string().required('Name on card is required'),\r\n  }),\r\n];\r\n","import {\r\n  Paper,\r\n  Typography,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Box,\r\n  Button,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport { FieldValues, FormProvider, useForm } from 'react-hook-form';\r\nimport AddressForm from './AddressForm';\r\nimport PaymentForm from './PaymentForm';\r\nimport Review from './Review';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { validationSchema } from './checkoutValidation';\r\nimport { useAppDispatch } from '../../app/store/configureStore';\r\nimport agent from '../../app/api/agent';\r\nimport { clearBasket } from '../basket/basketSlice';\r\nimport { LoadingButton } from '@mui/lab';\r\n\r\nconst steps = ['Shipping address', 'Review your order', 'Payment details'];\r\n\r\nfunction getStepContent(step: number) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddressForm />;\r\n    case 1:\r\n      return <Review />;\r\n    case 2:\r\n      return <PaymentForm />;\r\n    default:\r\n      throw new Error('Unknown step');\r\n  }\r\n}\r\n\r\nexport default function CheckoutPage() {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [orderNumber, setOrderNumber] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n\r\n  const methods = useForm({\r\n    mode: 'all',\r\n    resolver: yupResolver(currentValidationSchema),\r\n  });\r\n\r\n  useEffect(() => {\r\n    agent.Account.getUserAddress().then((response) => {\r\n      if (response) {\r\n        methods.reset({\r\n          ...methods.getValues(),\r\n          ...response,\r\n          saveAddress: false,\r\n        });\r\n      }\r\n    });\r\n  }, [methods]);\r\n\r\n  const handleNext = async (data: FieldValues) => {\r\n    const { nameOnCard, saveAddress, ...shippingAddress } = data;\r\n\r\n    if (activeStep === steps.length - 1) {\r\n      try {\r\n        setLoading(true);\r\n        const orderNum = await agent.Orders.create({\r\n          saveAddress,\r\n          shippingAddress,\r\n        });\r\n        setOrderNumber(orderNum);\r\n        dispatch(clearBasket());\r\n        setActiveStep(activeStep + 1);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep(activeStep - 1);\r\n  };\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <Paper\r\n        variant='outlined'\r\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\r\n      >\r\n        <Typography component='h1' variant='h4' align='center'>\r\n          Checkout\r\n        </Typography>\r\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n        <>\r\n          {activeStep === steps.length ? (\r\n            <>\r\n              <Typography variant='h5' gutterBottom>\r\n                Thank you for your order.\r\n              </Typography>\r\n              <Typography variant='subtitle1'>\r\n                Your order number is {orderNumber}. We have emailed your order\r\n                confirmation, and will send you an update when your order has\r\n                shipped.\r\n              </Typography>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <form onSubmit={methods.handleSubmit(handleNext)}>\r\n                {getStepContent(activeStep)}\r\n                <Box sx={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                  {activeStep !== 0 && (\r\n                    <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\r\n                      Back\r\n                    </Button>\r\n                  )}\r\n                  <LoadingButton\r\n                    loading={loading}\r\n                    disabled={!methods.formState.isValid}\r\n                    variant='contained'\r\n                    type='submit'\r\n                    sx={{ mt: 3, ml: 1 }}\r\n                  >\r\n                    {activeStep === steps.length - 1 ? 'Place order' : 'Next'}\r\n                  </LoadingButton>\r\n                </Box>\r\n              </form>\r\n            </>\r\n          )}\r\n        </>\r\n      </Paper>\r\n    </FormProvider>\r\n  );\r\n}\r\n","const ContactPage = () => {\r\n  return <div>ContactPage</div>;\r\n};\r\n\r\nexport default ContactPage;\r\n","const HomePage = () => {\r\n  return <div>Home</div>;\r\n};\r\n\r\nexport default HomePage;\r\n","import { Box, Button, Grid, Typography } from '@mui/material';\r\nimport { BasketItem } from '../../app/models/Basket';\r\nimport { Order } from '../../app/models/Order';\r\nimport BasketSummary from '../basket/BasketSummary';\r\nimport BasketTable from '../basket/BasketTable';\r\n\r\ninterface Props {\r\n  order: Order;\r\n  setSelectedOrder: (id: number) => void;\r\n}\r\n\r\nconst OrderDetail = ({ order, setSelectedOrder }: Props) => {\r\n  return (\r\n    <>\r\n      <Box display='flex' justifyContent='space-between'>\r\n        <Typography sx={{ p: 2 }} gutterBottom variant='h4'>\r\n          Order#{order.id} - {order.orderStatus}\r\n        </Typography>\r\n        <Button\r\n          onClick={() => setSelectedOrder(0)}\r\n          sx={{ m: 2 }}\r\n          size='large'\r\n          variant='contained'\r\n        >\r\n          Back\r\n        </Button>\r\n      </Box>\r\n      <BasketTable items={order.orderItems as BasketItem[]} isBasket={false} />\r\n      <Grid container>\r\n        <Grid item xs={6} />\r\n        <Grid item xs={6}>\r\n          <BasketSummary subtotal={order.subtotal} />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderDetail;\r\n","import {\r\n  TableContainer,\r\n  Paper,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Button,\r\n} from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\nimport agent from '../../app/api/agent';\r\nimport LoadingComponent from '../../app/layout/LoadingComponent';\r\nimport { Order } from '../../app/models/Order';\r\nimport OrderDetail from './OrderDetail';\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState<Order[] | null>(null);\r\n  const [loading, setLoading] = useState<Boolean>(true);\r\n  const [selectedOrderNumber, setSelectedOrderNumber] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    agent.Orders.list()\r\n      .then((orders) => setOrders(orders))\r\n      .catch((error) => console.log(error))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) return <LoadingComponent message='Loading orders...' />;\r\n\r\n  if (selectedOrderNumber > 0)\r\n    return (\r\n      <OrderDetail\r\n        order={orders?.find((order) => order.id === selectedOrderNumber)!}\r\n        setSelectedOrder={setSelectedOrderNumber}\r\n      />\r\n    );\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table sx={{ minWidth: 650 }} aria-label='simple table'>\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Order number</TableCell>\r\n            <TableCell align='right'>Total</TableCell>\r\n            <TableCell align='right'>Order date</TableCell>\r\n            <TableCell align='right'>Order status</TableCell>\r\n            <TableCell align='right'></TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {orders?.map((order) => (\r\n            <TableRow\r\n              key={order.id}\r\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n            >\r\n              <TableCell component='th' scope='row'>\r\n                {order.id}\r\n              </TableCell>\r\n              <TableCell align='right'>{order.total}</TableCell>\r\n              <TableCell align='right'>\r\n                {order.orderDate.split('T')[0]}\r\n              </TableCell>\r\n              <TableCell align='right'>{order.orderStatus}</TableCell>\r\n              <TableCell align='right'>\r\n                <Button onClick={() => setSelectedOrderNumber(order.id)}>\r\n                  View\r\n                </Button>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import { Button, Container, Divider, Paper, Typography } from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <Container component={Paper} sx={{ height: 400 }}>\r\n      <Typography variant='h3' gutterBottom>\r\n        Oops - we could not find what are you looking for\r\n      </Typography>\r\n      <Divider />\r\n      <Button fullWidth component={Link} to='/catalog'>\r\n        Go back to shop\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import { Button, Container, Divider, Paper, Typography } from '@mui/material';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\nconst ServerError = () => {\r\n  const history = useHistory();\r\n  const { state } = useLocation<any>();\r\n  return (\r\n    <Container component={Paper}>\r\n      {state?.error ? (\r\n        <>\r\n          <Typography variant='h3' color='error' gutterBottom>\r\n            {state.error.title}\r\n          </Typography>\r\n          <Divider />\r\n          <Typography>\r\n            {state.error.detail || 'Internal server error'}\r\n          </Typography>\r\n        </>\r\n      ) : (\r\n        <Typography variant='h5' gutterBottom>\r\n          Server error\r\n        </Typography>\r\n      )}\r\n      <Button onClick={() => history.push('/catalog')}>\r\n        Go back to the store\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ServerError;\r\n","import React, { useState } from 'react';\r\nimport { Button, Menu, Fade, MenuItem } from '@mui/material';\r\nimport { useAppDispatch, useAppSelector } from '../store/configureStore';\r\nimport { signOut } from '../../features/account/accountSlice';\r\nimport { clearBasket } from '../../features/basket/basketSlice';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst SignedInMenu = () => {\r\n  const dispatch = useAppDispatch();\r\n  const { user } = useAppSelector((state) => state.account);\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={handleClick} sx={{ color: 'inherit', typography: 'h6' }}>\r\n        {user?.email}\r\n      </Button>\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Fade}\r\n      >\r\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n        <MenuItem onClick={handleClose} component={Link} to='/orders'>\r\n          My orders\r\n        </MenuItem>\r\n        <MenuItem\r\n          onClick={() => {\r\n            dispatch(clearBasket());\r\n            dispatch(signOut());\r\n          }}\r\n        >\r\n          Log out\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignedInMenu;\r\n","import { ShoppingCart } from '@mui/icons-material';\r\nimport {\r\n  AppBar,\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  Switch,\r\n  Toolbar,\r\n  Typography,\r\n} from '@mui/material';\r\nimport { Box } from '@mui/system';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { useAppSelector } from '../store/configureStore';\r\nimport SignedInMenu from './SignedInMenu';\r\n\r\ninterface Props {\r\n  darkMode: boolean;\r\n  handleThemeChange: () => void;\r\n}\r\n\r\nconst midLinks = [\r\n  { title: 'catalog', path: '/catalog' },\r\n  { title: 'about', path: '/about' },\r\n  { title: 'contact', path: '/contact' },\r\n];\r\n\r\nconst rightLinks = [\r\n  { title: 'login', path: '/login' },\r\n  { title: 'register', path: '/register' },\r\n];\r\n\r\nconst navLinkStyle = {\r\n  color: 'inherit',\r\n  typography: 'h6',\r\n  textDecoration: 'none',\r\n  '&:hover': {\r\n    color: 'grey.500',\r\n  },\r\n  '&:active': {\r\n    color: 'text.secondary',\r\n  },\r\n};\r\n\r\nconst Header = ({ darkMode, handleThemeChange }: Props) => {\r\n  const { user } = useAppSelector((state) => state.account);\r\n  const { basket } = useAppSelector((state) => state.basket);\r\n  const itemCount =\r\n    basket?.items.reduce((sum, item) => (sum += item.quantity), 0) || 0;\r\n\r\n  return (\r\n    <AppBar position='static' sx={{ mb: 4 }}>\r\n      <Toolbar\r\n        sx={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Box display='flex' alignItems='center'>\r\n          <Typography variant='h5' component={NavLink} to='/' sx={navLinkStyle}>\r\n            Re-store\r\n          </Typography>\r\n          <Switch checked={darkMode} onChange={handleThemeChange} />\r\n        </Box>\r\n\r\n        <List sx={{ display: 'flex' }}>\r\n          {midLinks.map(({ title, path }) => (\r\n            <ListItem\r\n              component={NavLink}\r\n              to={path}\r\n              key={path}\r\n              sx={navLinkStyle}\r\n            >\r\n              {title.toUpperCase()}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n\r\n        <Box display='flex' alignItems='center'>\r\n          <IconButton\r\n            component={Link}\r\n            to='/basket'\r\n            size='large'\r\n            sx={{ color: 'inherit' }}\r\n          >\r\n            <Badge badgeContent={itemCount} color='secondary'>\r\n              <ShoppingCart />\r\n            </Badge>\r\n          </IconButton>\r\n\r\n          {user ? (\r\n            <SignedInMenu />\r\n          ) : (\r\n            <List sx={{ display: 'flex' }}>\r\n              {rightLinks.map(({ title, path }) => (\r\n                <ListItem\r\n                  component={NavLink}\r\n                  to={path}\r\n                  key={path}\r\n                  sx={navLinkStyle}\r\n                >\r\n                  {title.toUpperCase()}\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          )}\r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ComponentType } from 'react';\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  RouteComponentProps,\r\n  RouteProps,\r\n} from 'react-router-dom';\r\nimport { useAppSelector } from '../store/configureStore';\r\n\r\ninterface Props extends RouteProps {\r\n  component: ComponentType<RouteComponentProps<any>> | ComponentType<any>;\r\n}\r\n\r\nexport default function PrivateRoute({ component: Component, ...rest }: Props) {\r\n  const { user } = useAppSelector((state) => state.account);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        user ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/login',\r\n              state: { from: props.location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n","import { ThemeProvider } from '@emotion/react';\nimport { Container, CssBaseline } from '@mui/material';\nimport createTheme from '@mui/material/styles/createTheme';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport AboutPage from '../../features/about/AboutPage';\nimport { fetchCurrentUserAsync } from '../../features/account/accountSlice';\nimport Login from '../../features/account/Login';\nimport Register from '../../features/account/Register';\nimport BasketPage from '../../features/basket/BasketPage';\nimport { fetchBasketAsync } from '../../features/basket/basketSlice';\nimport Catalog from '../../features/catalog/Catalog';\nimport ProductDetail from '../../features/catalog/ProductDetail';\nimport CheckoutPage from '../../features/checkout/CheckoutPage';\nimport ContactPage from '../../features/contact/ContactPage';\nimport HomePage from '../../features/home/HomePage';\nimport Orders from '../../features/order/Order';\nimport NotFound from '../errors/NotFound';\nimport ServerError from '../errors/ServerError';\nimport { useAppDispatch } from '../store/configureStore';\nimport Header from './Header';\nimport LoadingComponent from './LoadingComponent';\nimport PrivateRoute from './PrivateRoute';\n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const [loading, setLoading] = useState(true);\n\n  const initApp = useCallback(async () => {\n    try {\n      await dispatch(fetchCurrentUserAsync());\n      await dispatch(fetchBasketAsync());\n    } catch (error) {\n      console.log(error);\n    }\n  }, [dispatch]);\n\n  useEffect(() => {\n    initApp().then(() => setLoading(false));\n  }, [initApp]);\n\n  const [darkMode, setDarkMode] = useState(false);\n  const paletteType = darkMode ? 'dark' : 'light';\n  const theme = createTheme({\n    palette: {\n      mode: paletteType,\n      background: {\n        default: paletteType === 'light' ? '#eaeaea' : '#121212',\n      },\n    },\n  });\n\n  const handleThemeChange = () => {\n    setDarkMode(!darkMode);\n  };\n\n  if (loading) return <LoadingComponent />;\n\n  return (\n    <ThemeProvider theme={theme}>\n      <ToastContainer position='bottom-right' hideProgressBar theme='colored' />\n      <CssBaseline />\n      <Header darkMode={darkMode} handleThemeChange={handleThemeChange} />\n      <Container>\n        <Switch>\n          <Route exact path='/' component={HomePage} />\n          <Route exact path='/catalog' component={Catalog} />\n          <Route path='/catalog/:id' component={ProductDetail} />\n          <Route path='/about' component={AboutPage} />\n          <Route path='/contact' component={ContactPage} />\n          <Route path='/server-error' component={ServerError} />\n          <Route path='/basket' component={BasketPage} />\n          <PrivateRoute path='/checkout' component={CheckoutPage} />\n          <PrivateRoute path='/orders' component={Orders} />\n          <Route path='/login' component={Login} />\n          <Route path='/register' component={Register} />\n          <Route path='*' component={NotFound} />\n        </Switch>\n      </Container>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Router } from 'react-router-dom';\nimport App from './app/layout/App';\nimport reportWebVitals from './reportWebVitals';\nimport { createBrowserHistory } from 'history';\nimport { Provider } from 'react-redux';\nimport { store } from './app/store/configureStore';\nimport { fetchProductListAsync } from './features/catalog/catalogSlice';\n\nexport const history = createBrowserHistory();\n\nstore.dispatch(fetchProductListAsync());\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <Router history={history}>\n          <App />\n        </Router>\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}